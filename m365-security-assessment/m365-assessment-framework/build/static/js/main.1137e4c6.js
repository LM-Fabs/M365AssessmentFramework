/*! For license information please see main.1137e4c6.js.LICENSE.txt */
(()=>{"use strict";var e={13:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(827);r.__exportStar(n(171),t),r.__exportStar(n(836),t)},49:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,g(b,v.prototype),b.isPureReactComponent=!0;var C=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,o)&&!A.hasOwnProperty(o)&&(i[o]=t[o]);var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(o in c=e.defaultProps)void 0===i[o]&&(i[o]=c[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function x(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return a=a(c=e),e=""===i?"."+_(c,0):i,C(a)?(o="",null!=e&&(o=e.replace(I,"$&/")+"/"),x(a,t,o,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+e)),t.push(a)),1;if(c=0,i=""===i?".":i+":",C(e))for(var l=0;l<e.length;l++){var u=i+_(s=e[l],l);c+=x(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(s=e.next()).done;)c+=x(s=s.value,t,o,u=i+_(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function R(e,t,n){if(null==e)return e;var r=[],o=0;return x(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},O={transition:null},M={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=w,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)k.call(t,l)&&!A.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},119:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(345)},171:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TokenCredentialAuthenticationProvider=void 0;var r=n(827),o=n(287),i=function(){function e(e,t){if(!e)throw new o.GraphClientError("Please pass a token credential object to the TokenCredentialAuthenticationProvider class constructor");if(!t)throw new o.GraphClientError("Please pass the TokenCredentialAuthenticationProviderOptions with scopes to the TokenCredentialAuthenticationProvider class constructor");this.authenticationProviderOptions=t,this.tokenCredential=e}return e.prototype.getAccessToken=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,t,n;return r.__generator(this,(function(r){switch(r.label){case 0:if(e=this.authenticationProviderOptions.scopes,t=new o.GraphClientError,!e||0===e.length)throw t.name="Empty Scopes",t.message="Scopes cannot be empty, Please provide scopes",t;return[4,this.tokenCredential.getToken(e,this.authenticationProviderOptions.getTokenOptions)];case 1:if(n=r.sent())return[2,n.token];throw t.message="Cannot retrieve accessToken from the Token Credential object",t.name="Access token is undefined",t}}))}))},e}();t.TokenCredentialAuthenticationProvider=i},287:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GraphClientError=void 0;var r=n(827),o=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return r.__extends(t,e),t.setGraphClientError=function(e){var n;return e instanceof Error?n=e:(n=new t).customError=e,n},t}(Error);t.GraphClientError=o},340:(e,t,n)=>{e.exports=n(761)},345:(e,t,n)=>{var r=n(950),o=n(340);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),I=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var j,U=Object.assign;function D(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var q=!1;function F(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var o=l.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var c="\n"+o[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=a&&0<=s);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function H(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case T:return"Profiler";case A:return"StrictMode";case x:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){$(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ie(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ce(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Ae=null;function Te(e){if(e=bo(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=ko(t),ke(e.stateNode,e.type,t))}}function Ee(e){Se?Ae?Ae.push(e):Ae=[e]:Se=e}function Ie(){if(Se){var e=Se,t=Ae;if(Ae=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function _e(e,t){return e(t)}function xe(){}var Re=!1;function Pe(e,t,n){if(Re)return e(t,n);Re=!0;try{return _e(e,t,n)}finally{Re=!1,(null!==Se||null!==Ae)&&(xe(),Ie())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=ko(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Oe=!1}function Le(e,t,n,r,o,i,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var je=!1,Ue=null,De=!1,qe=null,Fe={onError:function(e){je=!0,Ue=e}};function He(e,t,n,r,o,i,a,s,c){je=!1,Ue=null,Le.apply(Fe,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(i(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return Ke(o),e;if(a===r)return Ke(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,c=o.child;c;){if(c===n){s=!0,n=o,r=a;break}if(c===r){s=!0,r=o,n=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===n){s=!0,n=a,r=o;break}if(c===r){s=!0,r=a,n=o;break}c=c.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Qe=o.unstable_scheduleCallback,Ge=o.unstable_cancelCallback,Ye=o.unstable_shouldYield,Je=o.unstable_requestPaint,$e=o.unstable_now,Xe=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=dt(s):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~o)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Ct,kt,St,At,Tt,Et=!1,It=[],_t=null,xt=null,Rt=null,Pt=new Map,Nt=new Map,Ot=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":xt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function jt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Ut(e){var t=wo(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bo(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function qt(e,t,n){Dt(e)&&n.delete(t)}function Ft(){Et=!1,null!==_t&&Dt(_t)&&(_t=null),null!==xt&&Dt(xt)&&(xt=null),null!==Rt&&Dt(Rt)&&(Rt=null),Pt.forEach(qt),Nt.forEach(qt)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ft)))}function Bt(e){function t(t){return Ht(t,e)}if(0<It.length){Ht(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Ht(_t,e),null!==xt&&Ht(xt,e),null!==Rt&&Ht(Rt,e),Pt.forEach(t),Nt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ut(n),null===n.blockedOn&&Ot.shift()}var zt=b.ReactCurrentBatchConfig,Kt=!0;function Wt(e,t,n,r){var o=wt,i=zt.transition;zt.transition=null;try{wt=1,Qt(e,t,n,r)}finally{wt=o,zt.transition=i}}function Vt(e,t,n,r){var o=wt,i=zt.transition;zt.transition=null;try{wt=4,Qt(e,t,n,r)}finally{wt=o,zt.transition=i}}function Qt(e,t,n,r){if(Kt){var o=Yt(e,t,n,r);if(null===o)Kr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return _t=jt(_t,e,t,n,r,o),!0;case"dragenter":return xt=jt(xt,e,t,n,r,o),!0;case"mouseover":return Rt=jt(Rt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Pt.set(i,jt(Pt.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Nt.set(i,jt(Nt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==o;){var i=bo(o);if(null!==i&&Ct(i),null===(i=Yt(e,t,n,r))&&Kr(e,t,r,Gt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Gt=null;function Yt(e,t,n,r){if(Gt=null,null!==(e=wo(e=Ce(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,o="value"in $t?$t.value:$t.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(ln),dn=U({},ln,{view:0,detail:0}),hn=on(dn),pn=U({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(an=e.screenX-cn.screenX,sn=e.screenY-cn.screenY):sn=an=0,cn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=on(pn),gn=on(U({},pn,{dataTransfer:0})),mn=on(U({},dn,{relatedTarget:0})),vn=on(U({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=on(yn),bn=on(U({},ln,{data:0})),Cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return An}var En=U({},dn,{key:function(e){if(e.key){var t=Cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(En),_n=on(U({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=on(U({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Rn=on(U({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=U({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=on(Pn),On=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var jn=u&&"TextEvent"in window&&!Ln,Un=u&&(!Mn||Ln&&8<Ln&&11>=Ln),Dn=String.fromCharCode(32),qn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ee(r),0<(t=Vr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Qn=null;function Gn(e){Dr(e,0)}function Yn(e){if(Q(Co(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Qn=Vn=null)}function nr(e){if("value"===e.propertyName&&Yn(Qn)){var t=[];Wn(t,Qn,e,Ce(e)),Pe(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Qn)}function ir(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var a=ur(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==mr||mr!==G(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&cr(yr,r)||(yr=r,0<(r=Vr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionend:Cr("Transition","TransitionEnd")},Sr={},Ar={};function Tr(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return Sr[e]=n[t];return e}u&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Tr("animationend"),Ir=Tr("animationiteration"),_r=Tr("animationstart"),xr=Tr("transitionend"),Rr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Rr.set(e,t),c(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Mr=Pr[Or];Nr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}Nr(Er,"onAnimationEnd"),Nr(Ir,"onAnimationIteration"),Nr(_r,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(xr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,c,l){if(He.apply(this,arguments),je){if(!je)throw Error(i(198));var u=Ue;je=!1,Ue=null,De||(De=!0,qe=u)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==i&&o.isPropagationStopped())break e;Ur(o,s,l),i=c}else for(a=0;a<r.length;a++){if(c=(s=r[a]).instance,l=s.currentTarget,s=s.listener,c!==i&&o.isPropagationStopped())break e;Ur(o,s,l),i=c}}}if(De)throw e=qe,De=!1,qe=null,e}function qr(e,t){var n=t[mo];void 0===n&&(n=t[mo]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Hr]){e[Hr]=!0,a.forEach((function(t){"selectionchange"!==t&&(jr.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,Fr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Jt(t)){case 1:var o=Wt;break;case 4:o=Vt;break;default:o=Qt}n=o.bind(null,t,n,e),o=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===o||8===c.nodeType&&c.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=wo(s)))return;if(5===(c=a.tag)||6===c){r=i=a;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=i,o=Ce(n),a=[];e:{var s=Rr.get(e);if(void 0!==s){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=In;break;case"focusin":l="focus",c=mn;break;case"focusout":l="blur",c=mn;break;case"beforeblur":case"afterblur":c=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=xn;break;case Er:case Ir:case _r:c=vn;break;case xr:c=Rn;break;case"scroll":c=hn;break;case"wheel":c=Nn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=_n}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=r;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==h&&(null!=(g=Ne(f,h))&&u.push(Wr(f,g,p)))),d)break;f=f.return}0<u.length&&(s=new c(s,l,null,n,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!wo(l)&&!l[go])&&(c||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?wo(l):null)&&(l!==(d=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=fn,g="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=_n,g="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==c?s:Co(c),p=null==l?s:Co(l),(s=new u(g,f+"leave",c,n,o)).target=d,s.relatedTarget=p,g=null,wo(o)===r&&((u=new u(h,f+"enter",l,n,o)).target=p,u.relatedTarget=d,g=u),d=g,c&&l)e:{for(h=l,f=0,p=u=c;p;p=Qr(p))f++;for(p=0,g=h;g;g=Qr(g))p++;for(;0<f-p;)u=Qr(u),f--;for(;0<p-f;)h=Qr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Qr(u),h=Qr(h)}u=null}else u=null;null!==c&&Gr(a,s,c,u,!1),null!==l&&null!==d&&Gr(a,d,l,u,!0)}if("select"===(c=(s=r?Co(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var m=Jn;else if(Kn(s))if($n)m=ar;else{m=or;var v=rr}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ir);switch(m&&(m=m(e,r))?Wn(a,m,n,o):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?Co(r):window,e){case"focusin":(Kn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(a,n,o);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(a,n,o)}var y;if(Mn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Fn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Un&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(y=en()):(Xt="value"in($t=o)?$t.value:$t.textContent,Bn=!0)),0<(v=Vr(r,w)).length&&(w=new bn(w,e,null,n,o),a.push({event:w,listeners:v}),y?w.data=y:null!==(y=Hn(n))&&(w.data=y))),(y=jn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(qn=!0,Dn);case"textInput":return(e=t.data)===Dn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Mn&&Fn(e,t)?(e=en(),Zt=Xt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=y))}Dr(a,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Ne(e,n))&&r.unshift(Wr(e,i,o)),null!=(i=Ne(e,t))&&r.push(Wr(e,i,o))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==l&&(s=l,o?null!=(c=Ne(n,i))&&a.unshift(Wr(n,c,s)):o||null!=(c=Ne(n,i))&&a.push(Wr(n,c,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(i(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout((function(){throw e}))}function co(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Bt(t)}function lo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),po="__reactFiber$"+ho,fo="__reactProps$"+ho,go="__reactContainer$"+ho,mo="__reactEvents$"+ho,vo="__reactListeners$"+ho,yo="__reactHandles$"+ho;function wo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[go]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[po])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function bo(e){return!(e=e[po]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Co(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ko(e){return e[fo]||null}var So=[],Ao=-1;function To(e){return{current:e}}function Eo(e){0>Ao||(e.current=So[Ao],So[Ao]=null,Ao--)}function Io(e,t){Ao++,So[Ao]=e.current,e.current=t}var _o={},xo=To(_o),Ro=To(!1),Po=_o;function No(e,t){var n=e.type.contextTypes;if(!n)return _o;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Oo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mo(){Eo(Ro),Eo(xo)}function Lo(e,t,n){if(xo.current!==_o)throw Error(i(168));Io(xo,t),Io(Ro,n)}function jo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,z(e)||"Unknown",o));return U({},n,r)}function Uo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_o,Po=xo.current,Io(xo,e),Io(Ro,Ro.current),!0}function Do(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=jo(e,t,Po),r.__reactInternalMemoizedMergedChildContext=e,Eo(Ro),Eo(xo),Io(xo,e)):Eo(Ro),Io(Ro,n)}var qo=null,Fo=!1,Ho=!1;function Bo(e){null===qo?qo=[e]:qo.push(e)}function zo(){if(!Ho&&null!==qo){Ho=!0;var e=0,t=wt;try{var n=qo;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}qo=null,Fo=!1}catch(o){throw null!==qo&&(qo=qo.slice(e+1)),Qe(Ze,zo),o}finally{wt=t,Ho=!1}}return null}var Ko=[],Wo=0,Vo=null,Qo=0,Go=[],Yo=0,Jo=null,$o=1,Xo="";function Zo(e,t){Ko[Wo++]=Qo,Ko[Wo++]=Vo,Vo=e,Qo=t}function ei(e,t,n){Go[Yo++]=$o,Go[Yo++]=Xo,Go[Yo++]=Jo,Jo=e;var r=$o;e=Xo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,$o=1<<32-at(t)+o|n<<o|r,Xo=i+e}else $o=1<<i|n<<o|r,Xo=e}function ti(e){null!==e.return&&(Zo(e,1),ei(e,1,0))}function ni(e){for(;e===Vo;)Vo=Ko[--Wo],Ko[Wo]=null,Qo=Ko[--Wo],Ko[Wo]=null;for(;e===Jo;)Jo=Go[--Yo],Go[Yo]=null,Xo=Go[--Yo],Go[Yo]=null,$o=Go[--Yo],Go[Yo]=null}var ri=null,oi=null,ii=!1,ai=null;function si(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ci(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=lo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Jo?{id:$o,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!ci(e,t)){if(li(e))throw Error(i(418));t=lo(n.nextSibling);var r=ri;t&&ci(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function hi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(li(e))throw pi(),Error(i(418));for(;t;)si(e,t),t=lo(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=lo(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?lo(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=oi;e;)e=lo(e.nextSibling)}function fi(){oi=ri=null,ii=!1}function gi(e){null===ai?ai=[e]:ai.push(e)}var mi=b.ReactCurrentBatchConfig;function vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&wi(i)===t.type)?((r=o(t,n.props)).ref=vi(e,t,n),r.return=e,r):((r=Ml(n.type,n.key,n.props,null,e.mode,r)).ref=vi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Dl(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case C:return(n=Ml(t.type,t.key,t.props,null,e.mode,n)).ref=vi(e,null,t),n.return=e,n;case k:return(t=Dl(t,e.mode,n)).return=e,t;case N:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ll(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case C:return n.key===o?l(e,t,n,r):null;case k:return n.key===o?u(e,t,n,r):null;case N:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||L(n))return null!==o?null:d(e,t,n,r,null);yi(e,n)}return null}function f(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case C:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case N:return f(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,o,null);yi(t,r)}return null}function g(o,i,s,c){for(var l=null,u=null,d=i,g=i=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var v=p(o,d,s[g],c);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(o,d),i=a(v,i,g),null===u?l=v:u.sibling=v,u=v,d=m}if(g===s.length)return n(o,d),ii&&Zo(o,g),l;if(null===d){for(;g<s.length;g++)null!==(d=h(o,s[g],c))&&(i=a(d,i,g),null===u?l=d:u.sibling=d,u=d);return ii&&Zo(o,g),l}for(d=r(o,d);g<s.length;g++)null!==(m=f(d,o,g,s[g],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),i=a(m,i,g),null===u?l=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(o,e)})),ii&&Zo(o,g),l}function m(o,s,c,l){var u=L(c);if("function"!==typeof u)throw Error(i(150));if(null==(c=u.call(c)))throw Error(i(151));for(var d=u=null,g=s,m=s=0,v=null,y=c.next();null!==g&&!y.done;m++,y=c.next()){g.index>m?(v=g,g=null):v=g.sibling;var w=p(o,g,y.value,l);if(null===w){null===g&&(g=v);break}e&&g&&null===w.alternate&&t(o,g),s=a(w,s,m),null===d?u=w:d.sibling=w,d=w,g=v}if(y.done)return n(o,g),ii&&Zo(o,m),u;if(null===g){for(;!y.done;m++,y=c.next())null!==(y=h(o,y.value,l))&&(s=a(y,s,m),null===d?u=y:d.sibling=y,d=y);return ii&&Zo(o,m),u}for(g=r(o,g);!y.done;m++,y=c.next())null!==(y=f(g,o,m,y.value,l))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),s=a(y,s,m),null===d?u=y:d.sibling=y,d=y);return e&&g.forEach((function(e){return t(o,e)})),ii&&Zo(o,m),u}return function e(r,i,a,c){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case C:e:{for(var l=a.key,u=i;null!==u;){if(u.key===l){if((l=a.type)===S){if(7===u.tag){n(r,u.sibling),(i=o(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===N&&wi(l)===u.type){n(r,u.sibling),(i=o(u,a.props)).ref=vi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((i=Ll(a.props.children,r.mode,c,a.key)).return=r,r=i):((c=Ml(a.type,a.key,a.props,null,r.mode,c)).ref=vi(r,i,a),c.return=r,r=c)}return s(r);case k:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Dl(a,r.mode,c)).return=r,r=i}return s(r);case N:return e(r,i,(u=a._init)(a._payload),c)}if(te(a))return g(r,i,a,c);if(L(a))return m(r,i,a,c);yi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Ul(a,r.mode,c)).return=r,r=i),s(r)):n(r,i)}}var Ci=bi(!0),ki=bi(!1),Si=To(null),Ai=null,Ti=null,Ei=null;function Ii(){Ei=Ti=Ai=null}function _i(e){var t=Si.current;Eo(Si),e._currentValue=t}function xi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ri(e,t){Ai=e,Ei=Ti=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Pi(e){var t=e._currentValue;if(Ei!==e)if(e={context:e,memoizedValue:t,next:null},null===Ti){if(null===Ai)throw Error(i(308));Ti=e,Ai.dependencies={lanes:0,firstContext:e}}else Ti=Ti.next=e;return t}var Ni=null;function Oi(e){null===Ni?Ni=[e]:Ni.push(e)}function Mi(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Oi(t)):(n.next=o.next,o.next=n),t.interleaved=n,Li(e,r)}function Li(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var ji=!1;function Ui(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_c)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Li(e,n)}return null===(o=r.interleaved)?(t.next=t,Oi(r)):(t.next=o.next,o.next=t),r.interleaved=t,Li(e,n)}function Hi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var o=e.updateQueue;ji=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var c=s,l=c.next;c.next=null,null===a?i=l:a.next=l,a=c;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(null!==i){var d=o.baseState;for(a=0,u=l=c=null,s=i;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,g=s;switch(h=t,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=g.payload)?f.call(p,d,h):f)||void 0===h)break e;d=U({},d,h);break e;case 2:ji=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=p,c=d):u=u.next=p,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(c=d),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);jc|=a,e.lanes=a,e.memoizedState=d}}function Ki(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var Wi={},Vi=To(Wi),Qi=To(Wi),Gi=To(Wi);function Yi(e){if(e===Wi)throw Error(i(174));return e}function Ji(e,t){switch(Io(Gi,t),Io(Qi,e),Io(Vi,Wi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Eo(Vi),Io(Vi,t)}function $i(){Eo(Vi),Eo(Qi),Eo(Gi)}function Xi(e){Yi(Gi.current);var t=Yi(Vi.current),n=ce(t,e.type);t!==n&&(Io(Qi,e),Io(Vi,n))}function Zi(e){Qi.current===e&&(Eo(Vi),Eo(Qi))}var ea=To(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var oa=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,aa=0,sa=null,ca=null,la=null,ua=!1,da=!1,ha=0,pa=0;function fa(){throw Error(i(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,o,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Za:es,e=n(r,o),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(i(301));a+=1,la=ca=null,t.updateQueue=null,oa.current=ts,e=n(r,o)}while(da)}if(oa.current=Xa,t=null!==ca&&null!==ca.next,aa=0,la=ca=sa=null,ua=!1,t)throw Error(i(300));return e}function va(){var e=0!==ha;return ha=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?sa.memoizedState=la=e:la=la.next=e,la}function wa(){if(null===ca){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=ca.next;var t=null===la?sa.memoizedState:la.next;if(null!==t)la=t,ca=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ca=e).memoizedState,baseState:ca.baseState,baseQueue:ca.baseQueue,queue:ca.queue,next:null},null===la?sa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function Ca(e){var t=wa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ca,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var c=s=null,l=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=h,s=r):l=l.next=h,sa.lanes|=d,jc|=d}u=u.next}while(null!==u&&u!==a);null===l?s=r:l.next=c,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,sa.lanes|=a,jc|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=wa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sr(a,t.memoizedState)||(ws=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Aa(e,t){var n=sa,r=wa(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,ws=!0),r=r.queue,ja(Ia.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Pa(9,Ea.bind(null,n,r,o,t),void 0,null),null===xc)throw Error(i(349));0!==(30&aa)||Ta(n,t,o)}return o}function Ta(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,r){t.value=n,t.getSnapshot=r,_a(t)&&xa(e)}function Ia(e,t,n){return n((function(){_a(t)&&xa(e)}))}function _a(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function xa(e){var t=Li(e,1);null!==t&&nl(t,e,1,-1)}function Ra(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,sa,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Na(){return wa().memoizedState}function Oa(e,t,n,r){var o=ya();sa.flags|=e,o.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Ma(e,t,n,r){var o=wa();r=void 0===r?null:r;var i=void 0;if(null!==ca){var a=ca.memoizedState;if(i=a.destroy,null!==r&&ga(r,a.deps))return void(o.memoizedState=Pa(t,n,i,r))}sa.flags|=e,o.memoizedState=Pa(1|t,n,i,r)}function La(e,t){return Oa(8390656,8,e,t)}function ja(e,t){return Ma(2048,8,e,t)}function Ua(e,t){return Ma(4,2,e,t)}function Da(e,t){return Ma(4,4,e,t)}function qa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4,4,qa.bind(null,t,e),n)}function Ha(){}function Ba(e,t){var n=wa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function za(e,t){var n=wa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ka(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=gt(),sa.lanes|=n,jc|=n,e.baseState=!0),t)}function Wa(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{wt=n,ia.transition=r}}function Va(){return wa().memoizedState}function Qa(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Ja(t,n);else if(null!==(n=Mi(e,t,n,r))){nl(n,e,r,el()),$a(n,t,r)}}function Ga(e,t,n){var r=tl(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Ja(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,a)){var c=t.interleaved;return null===c?(o.next=o,Oi(t)):(o.next=c.next,c.next=o),void(t.interleaved=o)}}catch(l){}null!==(n=Mi(e,t,o,r))&&(nl(n,e,r,o=el()),$a(n,t,r))}}function Ya(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ja(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $a(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xa={readContext:Pi,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Za={readContext:Pi,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Pi,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4194308,4,qa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oa(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ra,useDebugValue:Ha,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ra(!1),t=e[0];return e=Wa.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,o=ya();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===xc)throw Error(i(349));0!==(30&aa)||Ta(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,La(Ia.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,Ea.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=xc.identifierPrefix;if(ii){var n=Xo;t=":"+t+"R"+(n=($o&~(1<<32-at($o)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Pi,useCallback:Ba,useContext:Pi,useEffect:ja,useImperativeHandle:Fa,useInsertionEffect:Ua,useLayoutEffect:Da,useMemo:za,useReducer:Ca,useRef:Na,useState:function(){return Ca(ba)},useDebugValue:Ha,useDeferredValue:function(e){return Ka(wa(),ca.memoizedState,e)},useTransition:function(){return[Ca(ba)[0],wa().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Aa,useId:Va,unstable_isNewReconciler:!1},ts={readContext:Pi,useCallback:Ba,useContext:Pi,useEffect:ja,useImperativeHandle:Fa,useInsertionEffect:Ua,useLayoutEffect:Da,useMemo:za,useReducer:ka,useRef:Na,useState:function(){return ka(ba)},useDebugValue:Ha,useDeferredValue:function(e){var t=wa();return null===ca?t.memoizedState=e:Ka(t,ca.memoizedState,e)},useTransition:function(){return[ka(ba)[0],wa().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Aa,useId:Va,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),o=tl(e),i=qi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,o))&&(nl(t,e,o,r),Hi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),o=tl(e),i=qi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Fi(e,i,o))&&(nl(t,e,o,r),Hi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),o=qi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Fi(e,o,r))&&(nl(t,e,r,n),Hi(t,e,r))}};function is(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(o,i))}function as(e,t,n){var r=!1,o=_o,i=t.contextType;return"object"===typeof i&&null!==i?i=Pi(i):(o=Oo(t)?Po:xo.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?No(e,o):_o),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function cs(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ui(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Pi(i):(i=Oo(t)?Po:xo.current,o.context=No(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(rs(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),zi(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function ls(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=qi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kc||(Kc=!0,Wc=r),ds(0,t)},n}function fs(e,t,n){(n=qi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Vc?Vc=new Set([this]):Vc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Tl.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=qi(-1,1)).tag=2,Fi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var ys=b.ReactCurrentOwner,ws=!1;function bs(e,t,n,r){t.child=null===e?ki(t,null,n,r):Ci(t,e.child,n,r)}function Cs(e,t,n,r,o){n=n.render;var i=t.ref;return Ri(t,o),r=ma(e,t,n,r,i,o),n=va(),null===e||ws?(ii&&n&&ti(t),t.flags|=1,bs(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ks(e,t,o))}function ks(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Nl(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ml(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ss(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)return Ks(e,t,o)}return t.flags|=1,(e=Ol(i,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(cr(i,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Ks(e,t,o);0!==(131072&e.flags)&&(ws=!0)}}return Es(e,t,n,r,o)}function As(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Io(Oc,Nc),Nc|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Io(Oc,Nc),Nc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Io(Oc,Nc),Nc|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Io(Oc,Nc),Nc|=r;return bs(e,t,o,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,r,o){var i=Oo(n)?Po:xo.current;return i=No(t,i),Ri(t,o),n=ma(e,t,n,r,i,o),r=va(),null===e||ws?(ii&&r&&ti(t),t.flags|=1,bs(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ks(e,t,o))}function Is(e,t,n,r,o){if(Oo(n)){var i=!0;Uo(t)}else i=!1;if(Ri(t,o),null===t.stateNode)zs(e,t),as(t,n,r),cs(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Pi(l):l=No(t,l=Oo(n)?Po:xo.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||c!==l)&&ss(t,a,r,l),ji=!1;var h=t.memoizedState;a.state=h,zi(t,r,a,o),c=t.memoizedState,s!==r||h!==c||Ro.current||ji?("function"===typeof u&&(rs(t,n,u,r),c=t.memoizedState),(s=ji||is(t,n,s,r,h,c,l))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Di(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ns(t.type,s),a.props=l,d=t.pendingProps,h=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=Pi(c):c=No(t,c=Oo(n)?Po:xo.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==c)&&ss(t,a,r,c),ji=!1,h=t.memoizedState,a.state=h,zi(t,r,a,o);var f=t.memoizedState;s!==d||h!==f||Ro.current||ji?("function"===typeof p&&(rs(t,n,p,r),f=t.memoizedState),(l=ji||is(t,n,l,r,h,f,c)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _s(e,t,n,r,i,o)}function _s(e,t,n,r,o,i){Ts(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&Do(t,n,!1),Ks(e,t,i);r=t.stateNode,ys.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ci(t,e.child,null,i),t.child=Ci(t,null,s,i)):bs(e,t,s,i),t.memoizedState=r.state,o&&Do(t,n,!0),t.child}function xs(e){var t=e.stateNode;t.pendingContext?Lo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lo(0,t.context,!1),Ji(e,t.containerInfo)}function Rs(e,t,n,r,o){return fi(),gi(o),t.flags|=256,bs(e,t,n,r),t.child}var Ps,Ns,Os,Ms,Ls={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Us(e,t,n){var r,o=t.pendingProps,a=ea.current,s=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Io(ea,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=o.children,e=o.fallback,s?(o=t.mode,s=t.child,c={mode:"hidden",children:c},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=jl(c,o,0,null),e=Ll(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Ls,e):Ds(t,c));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,s){if(n)return 256&t.flags?(t.flags&=-257,qs(e,t,s,r=us(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=jl({mode:"visible",children:r.children},o,0,null),(a=Ll(a,o,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ci(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return qs(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var c=r.dgst;return r=c,qs(e,t,s,r=us(a=Error(i(419)),r,void 0))}if(c=0!==(s&e.childLanes),ws||c){if(null!==(r=xc)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Li(e,o),nl(r,e,o,-1))}return gl(),qs(e,t,s,r=us(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Il.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=lo(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Go[Yo++]=$o,Go[Yo++]=Xo,Go[Yo++]=Jo,$o=e.id,Xo=e.overflow,Jo=t),t=Ds(t,r.children),t.flags|=4096,t)}(e,t,c,o,r,a,n);if(s){s=o.fallback,c=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:o.children};return 0===(1&c)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=l,t.deletions=null):(o=Ol(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Ol(r,s):(s=Ll(s,c,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,c=null===(c=e.child.memoizedState)?js(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,o}return e=(s=e.child).sibling,o=Ol(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Ds(e,t){return(t=jl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qs(e,t,n,r){return null!==r&&gi(r),Ci(t,e.child,null,n),(e=Ds(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xi(e.return,t,n)}function Hs(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Bs(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,n,t);else if(19===e.tag)Fs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Io(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Hs(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Hs(t,!0,n,null,i);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vs(t),null;case 1:case 17:return Oo(t.type)&&Mo(),Vs(t),null;case 3:return r=t.stateNode,$i(),Eo(Ro),Eo(xo),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(al(ai),ai=null))),Ns(e,t),Vs(t),null;case 5:Zi(t);var o=Yi(Gi.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Vs(t),null}if(e=Yi(Vi.current),hi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[po]=t,r[fo]=a,e=0!==(1&t.mode),n){case"dialog":qr("cancel",r),qr("close",r);break;case"iframe":case"object":case"embed":qr("load",r);break;case"video":case"audio":for(o=0;o<Lr.length;o++)qr(Lr[o],r);break;case"source":qr("error",r);break;case"img":case"image":case"link":qr("error",r),qr("load",r);break;case"details":qr("toggle",r);break;case"input":J(r,a),qr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},qr("invalid",r);break;case"textarea":oe(r,a),qr("invalid",r)}for(var c in ye(n,a),o=null,a)if(a.hasOwnProperty(c)){var l=a[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,l,e),o=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,l,e),o=["children",""+l]):s.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&qr("scroll",r)}switch(n){case"input":V(r),Z(r,a,!0);break;case"textarea":V(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[po]=t,e[fo]=r,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":qr("cancel",e),qr("close",e),o=r;break;case"iframe":case"object":case"embed":qr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Lr.length;o++)qr(Lr[o],e);o=r;break;case"source":qr("error",e),o=r;break;case"img":case"image":case"link":qr("error",e),qr("load",e),o=r;break;case"details":qr("toggle",e),o=r;break;case"input":J(e,r),o=Y(e,r),qr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=U({},r,{value:void 0}),qr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),qr("invalid",e)}for(a in ye(n,o),l=o)if(l.hasOwnProperty(a)){var u=l[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&qr("scroll",e):null!=u&&w(e,a,u,c))}switch(n){case"input":V(e),Z(e,r,!1);break;case"textarea":V(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vs(t),null;case 6:if(e&&null!=t.stateNode)Ms(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Gi.current),Yi(Vi.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return Vs(t),null;case 13:if(Eo(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))pi(),fi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[po]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vs(t),a=!1}else null!==ai&&(al(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Mc&&(Mc=3):gl())),null!==t.updateQueue&&(t.flags|=4),Vs(t),null);case 4:return $i(),Ns(e,t),null===e&&Br(t.stateNode.containerInfo),Vs(t),null;case 10:return _i(t.type._context),Vs(t),null;case 19:if(Eo(ea),null===(a=t.memoizedState))return Vs(t),null;if(r=0!==(128&t.flags),null===(c=a.rendering))if(r)Ws(a,!1);else{if(0!==Mc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ta(e))){for(t.flags|=128,Ws(a,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Io(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Bc&&(t.flags|=128,r=!0,Ws(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(a,!0),null===a.tail&&"hidden"===a.tailMode&&!c.alternate&&!ii)return Vs(t),null}else 2*$e()-a.renderingStartTime>Bc&&1073741824!==n&&(t.flags|=128,r=!0,Ws(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=a.last)?n.sibling=c:t.child=c,a.last=c)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=ea.current,Io(ea,r?1&n|2:1&n),t):(Vs(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nc)&&(Vs(t),6&t.subtreeFlags&&(t.flags|=8192)):Vs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Gs(e,t){switch(ni(t),t.tag){case 1:return Oo(t.type)&&Mo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $i(),Eo(Ro),Eo(xo),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(Eo(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Eo(ea),null;case 4:return $i(),null;case 10:return _i(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ns=function(){},Os=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Yi(Vi.current);var i,a=null;switch(n){case"input":o=Y(e,o),r=Y(e,r),a=[];break;case"select":o=U({},o,{value:void 0}),r=U({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var c=o[u];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(i in c)!c.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&c[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(a||(a=[]),a.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&qr("scroll",e),a||c===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ms=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Js=!1,$s="function"===typeof WeakSet?WeakSet:Set,Xs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Al(e,t,r)}else n.current=null}function ec(e,t,n){try{n()}catch(r){Al(e,t,r)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&ec(t,n,i)}o=o.next}while(o!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function oc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[fo],delete t[mo],delete t[vo],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var uc=null,dc=!1;function hc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Js||Zs(n,t);case 6:var r=uc,o=dc;uc=null,hc(e,t,n),dc=o,null!==(uc=r)&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?co(e.parentNode,n):1===e.nodeType&&co(e,n),Bt(e)):co(uc,n.stateNode));break;case 4:r=uc,o=dc,uc=n.stateNode.containerInfo,dc=!0,hc(e,t,n),uc=r,dc=o;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&ec(n,t,a),o=o.next}while(o!==r)}hc(e,t,n);break;case 1:if(!Js&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Al(n,t,s)}hc(e,t,n);break;case 21:hc(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,hc(e,t,n),Js=r):hc(e,t,n);break;default:hc(e,t,n)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=_l.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,dc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===uc)throw Error(i(160));pc(a,s,o),uc=null,dc=!1;var l=o.alternate;null!==l&&(l.return=null),o.return=null}catch(u){Al(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mc(t,e),t=t.sibling}function mc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),vc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(m){Al(e,e.return,m)}try{nc(5,e,e.return)}catch(m){Al(e,e.return,m)}}break;case 1:gc(t,e),vc(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(gc(t,e),vc(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(m){Al(e,e.return,m)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===a.type&&null!=a.name&&$(o,a),we(c,s);var u=we(c,a);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];"style"===d?me(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):w(o,d,h,u)}switch(c){case"input":X(o,a);break;case"textarea":ie(o,a);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?ne(o,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[fo]=a}catch(m){Al(e,e.return,m)}}break;case 6:if(gc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(m){Al(e,e.return,m)}}break;case 3:if(gc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Al(e,e.return,m)}break;case 4:default:gc(t,e),vc(e);break;case 13:gc(t,e),vc(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Hc=$e())),4&r&&fc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(u=Js)||d,gc(t,e),Js=u):gc(t,e),vc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xs=e,d=e.child;null!==d;){for(h=Xs=d;null!==Xs;){switch(f=(p=Xs).child,p.tag){case 0:case 11:case 14:case 15:nc(4,p,p.return);break;case 1:Zs(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Al(r,n,m)}}break;case 5:Zs(p,p.return);break;case 22:if(null!==p.memoizedState){Cc(h);continue}}null!==f?(f.return=p,Xs=f):Cc(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(c=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=ge("display",s))}catch(m){Al(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Al(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gc(t,e),vc(e),4&r&&fc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),lc(e,sc(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;cc(e,sc(e),a);break;default:throw Error(i(161))}}catch(s){Al(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yc(e,t,n){Xs=e,wc(e,t,n)}function wc(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var o=Xs,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Ys;if(!a){var s=o.alternate,c=null!==s&&null!==s.memoizedState||Js;s=Ys;var l=Js;if(Ys=a,(Js=c)&&!l)for(Xs=o;null!==Xs;)c=(a=Xs).child,22===a.tag&&null!==a.memoizedState?kc(o):null!==c?(c.return=a,Xs=c):kc(o);for(;null!==i;)Xs=i,wc(i,t,n),i=i.sibling;Xs=o,Ys=s,Js=l}bc(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Xs=i):bc(e)}}function bc(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ki(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ki(t,s,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}Js||512&t.flags&&oc(t)}catch(p){Al(t,t.return,p)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function Cc(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function kc(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){Al(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(c){Al(t,o,c)}}var i=t.return;try{oc(t)}catch(c){Al(t,i,c)}break;case 5:var a=t.return;try{oc(t)}catch(c){Al(t,a,c)}}}catch(c){Al(t,t.return,c)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var Sc,Ac=Math.ceil,Tc=b.ReactCurrentDispatcher,Ec=b.ReactCurrentOwner,Ic=b.ReactCurrentBatchConfig,_c=0,xc=null,Rc=null,Pc=0,Nc=0,Oc=To(0),Mc=0,Lc=null,jc=0,Uc=0,Dc=0,qc=null,Fc=null,Hc=0,Bc=1/0,zc=null,Kc=!1,Wc=null,Vc=null,Qc=!1,Gc=null,Yc=0,Jc=0,$c=null,Xc=-1,Zc=0;function el(){return 0!==(6&_c)?$e():-1!==Xc?Xc:Xc=$e()}function tl(e){return 0===(1&e.mode)?1:0!==(2&_c)&&0!==Pc?Pc&-Pc:null!==mi.transition?(0===Zc&&(Zc=gt()),Zc):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nl(e,t,n,r){if(50<Jc)throw Jc=0,$c=null,Error(i(185));vt(e,n,r),0!==(2&_c)&&e===xc||(e===xc&&(0===(2&_c)&&(Uc|=n),4===Mc&&sl(e,Pc)),rl(e,r),1===n&&0===_c&&0===(1&t.mode)&&(Bc=$e()+500,Fo&&zo()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,c=o[a];-1===c?0!==(s&n)&&0===(s&r)||(o[a]=pt(s,t)):c<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===xc?Pc:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Fo=!0,Bo(e)}(cl.bind(null,e)):Bo(cl.bind(null,e)),ao((function(){0===(6&_c)&&zo()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=xl(n,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ol(e,t){if(Xc=-1,Zc=0,0!==(6&_c))throw Error(i(327));var n=e.callbackNode;if(kl()&&e.callbackNode!==n)return null;var r=ht(e,e===xc?Pc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var o=_c;_c|=2;var a=fl();for(xc===e&&Pc===t||(zc=null,Bc=$e()+500,hl(e,t));;)try{yl();break}catch(c){pl(e,c)}Ii(),Tc.current=a,_c=o,null!==Rc?t=0:(xc=null,Pc=0,t=Mc)}if(0!==t){if(2===t&&(0!==(o=ft(e))&&(r=o,t=il(e,o))),1===t)throw n=Lc,hl(e,0),sl(e,r),rl(e,$e()),n;if(6===t)sl(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=ml(e,r))&&(0!==(a=ft(e))&&(r=a,t=il(e,a))),1===t))throw n=Lc,hl(e,0),sl(e,r),rl(e,$e()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Cl(e,Fc,zc);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Hc+500-$e())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(Cl.bind(null,e,Fc,zc),t);break}Cl(e,Fc,zc);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>o&&(o=s),r&=~a}if(r=o,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ac(r/1960))-r)){e.timeoutHandle=ro(Cl.bind(null,e,Fc,zc),r);break}Cl(e,Fc,zc);break;default:throw Error(i(329))}}}return rl(e,$e()),e.callbackNode===n?ol.bind(null,e):null}function il(e,t){var n=qc;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Fc,Fc=n,null!==t&&al(t)),e}function al(e){null===Fc?Fc=e:Fc.push.apply(Fc,e)}function sl(e,t){for(t&=~Dc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!==(6&_c))throw Error(i(327));kl();var t=ht(e,0);if(0===(1&t))return rl(e,$e()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=il(e,r))}if(1===n)throw n=Lc,hl(e,0),sl(e,t),rl(e,$e()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cl(e,Fc,zc),rl(e,$e()),null}function ll(e,t){var n=_c;_c|=1;try{return e(t)}finally{0===(_c=n)&&(Bc=$e()+500,Fo&&zo())}}function ul(e){null!==Gc&&0===Gc.tag&&0===(6&_c)&&kl();var t=_c;_c|=1;var n=Ic.transition,r=wt;try{if(Ic.transition=null,wt=1,e)return e()}finally{wt=r,Ic.transition=n,0===(6&(_c=t))&&zo()}}function dl(){Nc=Oc.current,Eo(Oc)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Rc)for(n=Rc.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mo();break;case 3:$i(),Eo(Ro),Eo(xo),ra();break;case 5:Zi(r);break;case 4:$i();break;case 13:case 19:Eo(ea);break;case 10:_i(r.type._context);break;case 22:case 23:dl()}n=n.return}if(xc=e,Rc=e=Ol(e.current,null),Pc=Nc=t,Mc=0,Lc=null,Dc=Uc=jc=0,Fc=qc=null,null!==Ni){for(t=0;t<Ni.length;t++)if(null!==(r=(n=Ni[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}Ni=null}return e}function pl(e,t){for(;;){var n=Rc;try{if(Ii(),oa.current=Xa,ua){for(var r=sa.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ua=!1}if(aa=0,la=ca=sa=null,da=!1,ha=0,Ec.current=null,null===n||null===n.return){Mc=1,Lc=t,Rc=null;break}e:{var a=e,s=n.return,c=n,l=t;if(t=Pc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,d=c,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ms(s);if(null!==f){f.flags&=-257,vs(f,s,c,0,t),1&f.mode&&gs(a,u,t),l=u;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(l),t.updateQueue=m}else g.add(l);break e}if(0===(1&t)){gs(a,u,t),gl();break e}l=Error(i(426))}else if(ii&&1&c.mode){var v=ms(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,c,0,t),gi(ls(l,c));break e}}a=l=ls(l,c),4!==Mc&&(Mc=2),null===qc?qc=[a]:qc.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,ps(0,l,t));break e;case 1:c=l;var y=a.type,w=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Vc||!Vc.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t,Bi(a,fs(a,c,t));break e}}a=a.return}while(null!==a)}bl(n)}catch(b){t=b,Rc===n&&null!==n&&(Rc=n=n.return);continue}break}}function fl(){var e=Tc.current;return Tc.current=Xa,null===e?Xa:e}function gl(){0!==Mc&&3!==Mc&&2!==Mc||(Mc=4),null===xc||0===(268435455&jc)&&0===(268435455&Uc)||sl(xc,Pc)}function ml(e,t){var n=_c;_c|=2;var r=fl();for(xc===e&&Pc===t||(zc=null,hl(e,t));;)try{vl();break}catch(o){pl(e,o)}if(Ii(),_c=n,Tc.current=r,null!==Rc)throw Error(i(261));return xc=null,Pc=0,Mc}function vl(){for(;null!==Rc;)wl(Rc)}function yl(){for(;null!==Rc&&!Ye();)wl(Rc)}function wl(e){var t=Sc(e.alternate,e,Nc);e.memoizedProps=e.pendingProps,null===t?bl(e):Rc=t,Ec.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Nc)))return void(Rc=n)}else{if(null!==(n=Gs(n,t)))return n.flags&=32767,void(Rc=n);if(null===e)return Mc=6,void(Rc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rc=t);Rc=t=e}while(null!==t);0===Mc&&(Mc=5)}function Cl(e,t,n){var r=wt,o=Ic.transition;try{Ic.transition=null,wt=1,function(e,t,n,r){do{kl()}while(null!==Gc);if(0!==(6&_c))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===xc&&(Rc=xc=null,Pc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,xl(tt,(function(){return kl(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ic.transition,Ic.transition=null;var s=wt;wt=1;var c=_c;_c|=4,Ec.current=null,function(e,t){if(eo=Kt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(C){n=null;break e}var s=0,c=-1,l=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==o&&3!==h.nodeType||(c=s+o),h!==a||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===o&&(c=s),p===a&&++d===r&&(l=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Kt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(C){Al(t,t.return,C)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}g=tc,tc=!1}(e,n),mc(n,e),fr(to),Kt=!!eo,to=eo=null,e.current=n,yc(n,e,o),Je(),_c=c,wt=s,Ic.transition=a}else e.current=n;if(Qc&&(Qc=!1,Gc=e,Yc=o),a=e.pendingLanes,0===a&&(Vc=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Kc)throw Kc=!1,e=Wc,Wc=null,e;0!==(1&Yc)&&0!==e.tag&&kl(),a=e.pendingLanes,0!==(1&a)?e===$c?Jc++:(Jc=0,$c=e):Jc=0,zo()}(e,t,n,r)}finally{Ic.transition=o,wt=r}return null}function kl(){if(null!==Gc){var e=bt(Yc),t=Ic.transition,n=wt;try{if(Ic.transition=null,wt=16>e?16:e,null===Gc)var r=!1;else{if(e=Gc,Gc=null,Yc=0,0!==(6&_c))throw Error(i(331));var o=_c;for(_c|=4,Xs=e.current;null!==Xs;){var a=Xs,s=a.child;if(0!==(16&Xs.flags)){var c=a.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Xs=u;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:nc(8,d,a)}var h=d.child;if(null!==h)h.return=d,Xs=h;else for(;null!==Xs;){var p=(d=Xs).sibling,f=d.return;if(ic(d),d===u){Xs=null;break}if(null!==p){p.return=f,Xs=p;break}Xs=f}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Xs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(a=Xs).flags))switch(a.tag){case 0:case 11:case 15:nc(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Xs=y;break e}Xs=a.return}}var w=e.current;for(Xs=w;null!==Xs;){var b=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Xs=b;else e:for(s=w;null!==Xs;){if(0!==(2048&(c=Xs).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(k){Al(c,c.return,k)}if(c===s){Xs=null;break e}var C=c.sibling;if(null!==C){C.return=c.return,Xs=C;break e}Xs=c.return}}if(_c=o,zo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(k){}r=!0}return r}finally{wt=n,Ic.transition=t}}return!1}function Sl(e,t,n){e=Fi(e,t=ps(0,t=ls(n,t),1),1),t=el(),null!==e&&(vt(e,1,t),rl(e,t))}function Al(e,t,n){if(3===e.tag)Sl(e,e,n);else for(;null!==t;){if(3===t.tag){Sl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vc||!Vc.has(r))){t=Fi(t,e=fs(t,e=ls(n,e),1),1),e=el(),null!==t&&(vt(t,1,e),rl(t,e));break}}t=t.return}}function Tl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,xc===e&&(Pc&n)===n&&(4===Mc||3===Mc&&(130023424&Pc)===Pc&&500>$e()-Hc?hl(e,0):Dc|=n),rl(e,t)}function El(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=el();null!==(e=Li(e,t))&&(vt(e,t,n),rl(e,n))}function Il(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),El(e,n)}function _l(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),El(e,n)}function xl(e,t){return Qe(e,t)}function Rl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new Rl(e,t,n,r)}function Nl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ml(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)Nl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Ll(n.children,o,a,t);case A:s=8,o|=8;break;case T:return(e=Pl(12,n,t,2|o)).elementType=T,e.lanes=a,e;case x:return(e=Pl(13,n,t,o)).elementType=x,e.lanes=a,e;case R:return(e=Pl(19,n,t,o)).elementType=R,e.lanes=a,e;case O:return jl(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case I:s=9;break e;case _:s=11;break e;case P:s=14;break e;case N:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Pl(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Ll(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function jl(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function Dl(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ql(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Fl(e,t,n,r,o,i,a,s,c){return e=new ql(e,t,n,s,c),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Pl(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ui(i),e}function Hl(e){if(!e)return _o;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Oo(n))return jo(e,n,t)}return t}function Bl(e,t,n,r,o,i,a,s,c){return(e=Fl(n,r,!0,e,0,i,0,s,c)).context=Hl(null),n=e.current,(i=qi(r=el(),o=tl(n))).callback=void 0!==t&&null!==t?t:null,Fi(n,i,o),e.current.lanes=o,vt(e,o,r),rl(e,r),e}function zl(e,t,n,r){var o=t.current,i=el(),a=tl(o);return n=Hl(n),null===t.context?t.context=n:t.pendingContext=n,(t=qi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fi(o,t,a))&&(nl(e,o,a,i),Hi(e,o,a)),a}function Kl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vl(e,t){Wl(e,t),(e=e.alternate)&&Wl(e,t)}Sc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ro.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:xs(t),fi();break;case 5:Xi(t);break;case 1:Oo(t.type)&&Uo(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Io(Si,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Io(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Us(e,t,n):(Io(ea,1&ea.current),null!==(e=Ks(e,t,n))?e.sibling:null);Io(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Io(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,As(e,t,n)}return Ks(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,ii&&0!==(1048576&t.flags)&&ei(t,Qo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zs(e,t),e=t.pendingProps;var o=No(t,xo.current);Ri(t,n),o=ma(null,t,r,e,o,n);var a=va();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oo(r)?(a=!0,Uo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ui(t),o.updater=os,t.stateNode=o,o._reactInternals=t,cs(t,r,e,n),t=_s(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),bs(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zs(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Nl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===P)return 14}return 2}(r),e=ns(r,e),o){case 0:t=Es(null,t,r,e,n);break e;case 1:t=Is(null,t,r,e,n);break e;case 11:t=Cs(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ns(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Es(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,Is(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(xs(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Di(e,t),zi(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,r,n,o=ls(Error(i(423)),t));break e}if(r!==o){t=Rs(e,t,r,n,o=ls(Error(i(424)),t));break e}for(oi=lo(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=ki(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===o){t=Ks(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return Xi(t),null===e&&ui(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==a&&no(r,a)&&(t.flags|=32),Ts(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Us(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ci(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Cs(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,Io(Si,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===o.children&&!Ro.current){t=Ks(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var c=a.dependencies;if(null!==c){s=a.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=qi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),xi(a.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),xi(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}bs(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Ri(t,n),r=r(o=Pi(o)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),ks(e,t,r,o=ns(r.type,o),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),zs(e,t),t.tag=1,Oo(r)?(e=!0,Uo(t)):e=!1,Ri(t,n),as(t,r,o),cs(t,r,o,n),_s(null,t,r,!0,e,n);case 19:return Bs(e,t,n);case 22:return As(e,t,n)}throw Error(i(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Gl(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xl(){}function Zl(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Kl(a);s.call(e)}}zl(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Kl(a);i.call(e)}}var a=Bl(t,r,e,0,null,!1,0,"",Xl);return e._reactRootContainer=a,e[go]=a.current,Br(8===e.nodeType?e.parentNode:e),ul(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=Kl(c);s.call(e)}}var c=Fl(e,0,!1,null,0,!1,0,"",Xl);return e._reactRootContainer=c,e[go]=c.current,Br(8===e.nodeType?e.parentNode:e),ul((function(){zl(t,c,n,r)})),c}(n,t,e,o,r);return Kl(a)}Yl.prototype.render=Gl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));zl(e,t,null,null)},Yl.prototype.unmount=Gl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul((function(){zl(null,e,null,null)})),t[go]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ut(e)}},Ct=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rl(t,$e()),0===(6&_c)&&(Bc=$e()+500,zo()))}break;case 13:ul((function(){var t=Li(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Vl(e,1)}},kt=function(e){if(13===e.tag){var t=Li(e,134217728);if(null!==t)nl(t,e,134217728,el());Vl(e,134217728)}},St=function(e){if(13===e.tag){var t=tl(e),n=Li(e,t);if(null!==n)nl(n,e,t,el());Vl(e,t)}},At=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},ke=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ko(r);if(!o)throw Error(i(90));Q(r),X(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=ll,xe=ul;var eu={usingClientEntryPoint:!1,Events:[bo,Co,ko,Ee,Ie,ll]},tu={findFiberByHostInstance:wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ot=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(i(299));var n=!1,r="",o=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Fl(e,1,!1,null,0,n,0,r,o),e[go]=t.current,Br(8===e.nodeType?e.parentNode:e),new Gl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,n){if(!$l(t))throw Error(i(200));return Zl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",s=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bl(t,null,e,1,null!=n?n:null,o,0,a,s),e[go]=t.current,Br(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Yl(t)},t.render=function(e,t,n){if(!$l(t))throw Error(i(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$l(e))throw Error(i(40));return!!e._reactRootContainer&&(ul((function(){Zl(null,null,e,!1,(function(){e._reactRootContainer=null,e[go]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$l(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zl(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},352:(e,t,n)=>{var r=n(119);t.H=r.createRoot,r.hydrateRoot},414:(e,t,n)=>{e.exports=n(654)},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,{A:()=>s})},654:(e,t,n)=>{var r=n(950),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:l,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},761:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<o&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else{if(!(l<o&&0>i(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],d=1,h=null,p=3,f=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function C(e){if(m=!1,b(e),!g)if(null!==r(l))g=!0,O(k);else{var t=r(u);null!==t&&M(C,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,y(E),E=-1),f=!0;var i=p;try{for(b(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!x());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&o(l),b(n)}else o(l);h=r(l)}if(null!==h)var c=!0;else{var d=r(u);null!==d&&M(C,d.startTime-n),c=!1}return c}finally{h=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,A=!1,T=null,E=-1,I=5,_=-1;function x(){return!(t.unstable_now()-_<I)}function R(){if(null!==T){var e=t.unstable_now();_=e;var n=!0;try{n=T(!0,e)}finally{n?S():(A=!1,T=null)}}else A=!1}if("function"===typeof w)S=function(){w(R)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,N=P.port2;P.port1.onmessage=R,S=function(){N.postMessage(null)}}else S=function(){v(R,0)};function O(e){T=e,A||(A=!0,S())}function M(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,O(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(l)&&e===r(u)&&(m?(y(E),E=-1):m=!0,M(C,i-a))):(e.sortIndex=s,n(l,e),g||f||(g=!0,O(k))),e},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},827:(e,t,n)=>{n.r(t),n.d(t,{__addDisposableResource:()=>L,__assign:()=>i,__asyncDelegator:()=>T,__asyncGenerator:()=>A,__asyncValues:()=>E,__await:()=>S,__awaiter:()=>f,__classPrivateFieldGet:()=>N,__classPrivateFieldIn:()=>M,__classPrivateFieldSet:()=>O,__createBinding:()=>m,__decorate:()=>s,__disposeResources:()=>U,__esDecorate:()=>l,__exportStar:()=>v,__extends:()=>o,__generator:()=>g,__importDefault:()=>P,__importStar:()=>R,__makeTemplateObject:()=>I,__metadata:()=>p,__param:()=>c,__propKey:()=>d,__read:()=>w,__rest:()=>a,__rewriteRelativeImportExtension:()=>D,__runInitializers:()=>u,__setFunctionName:()=>h,__spread:()=>b,__spreadArray:()=>k,__spreadArrays:()=>C,__values:()=>y,default:()=>q});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function l(e,t,n,r,o,i){function a(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var s,c=r.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h=!1,p=n.length-1;p>=0;p--){var f={};for(var g in r)f[g]="access"===g?{}:r[g];for(var g in r.access)f.access[g]=r.access[g];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(a(e||null))};var m=(0,n[p])("accessor"===c?{get:d.get,set:d.set}:d[l],f);if("accessor"===c){if(void 0===m)continue;if(null===m||"object"!==typeof m)throw new TypeError("Object expected");(s=a(m.get))&&(d.get=s),(s=a(m.set))&&(d.set=s),(s=a(m.init))&&o.unshift(s)}else(s=a(m))&&("field"===c?o.unshift(s):d[l]=s)}u&&Object.defineProperty(u,r.name,d),h=!0}function u(e,t,n){for(var r=arguments.length>2,o=0;o<t.length;o++)n=r?t[o].call(e,n):t[o].call(e);return r?n:void 0}function d(e){return"symbol"===typeof e?e:"".concat(e)}function h(e,t,n){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function p(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function g(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(c){s=[6,c],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}var m=Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function v(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||m(t,e,n)}function y(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function w(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(s){o={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(w(arguments[t]));return e}function C(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function k(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function A(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",(function(e){return function(t){return Promise.resolve(t).then(e,l)}})),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))},t&&(r[e]=t(r[e])))}function s(e,t){try{(n=o[e](t)).value instanceof S?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(r){u(i[0][3],r)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function T(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:S(e[r](t)),done:!1}:o?o(t):t}:o}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=y(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function I(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var _=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},x=function(e){return x=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},x(e)};function R(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=x(e),r=0;r<n.length;r++)"default"!==n[r]&&m(t,e,n[r]);return _(t,e),t}function P(e){return e&&e.__esModule?e:{default:e}}function N(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function O(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}function M(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}function L(e,t,n){if(null!==t&&void 0!==t){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(o=r)}if("function"!==typeof r)throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var j="function"===typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function U(e){function t(t){e.error=e.hasError?new j(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,r=0;return function o(){for(;n=e.stack.pop();)try{if(!n.async&&1===r)return r=0,e.stack.push(n),Promise.resolve().then(o);if(n.dispose){var i=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(i).then(o,(function(e){return t(e),o()}))}else r|=1}catch(a){t(a)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function D(e,t){return"string"===typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,n,r,o,i){return n?t?".jsx":".js":!r||o&&i?r+o+"."+i.toLowerCase()+"js":e})):e}const q={__extends:o,__assign:i,__rest:a,__decorate:s,__param:c,__esDecorate:l,__runInitializers:u,__propKey:d,__setFunctionName:h,__metadata:p,__awaiter:f,__generator:g,__createBinding:m,__exportStar:v,__values:y,__read:w,__spread:b,__spreadArrays:C,__spreadArray:k,__await:S,__asyncGenerator:A,__asyncDelegator:T,__asyncValues:E,__makeTemplateObject:I,__importStar:R,__importDefault:P,__classPrivateFieldGet:N,__classPrivateFieldSet:O,__classPrivateFieldIn:M,__addDisposableResource:L,__disposeResources:U,__rewriteRelativeImportExtension:D}},836:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},915:(e,t,n)=>{n.d(t,{AssessmentHistoryService:()=>o});var r=n(555);class o{constructor(){this.baseUrl=void 0,this.baseUrl={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_ID:"d1cc9e16-9194-4892-92c5-473c9f65dcb3"}.REACT_APP_API_URL||"/api"}static getInstance(){return o.instance||(o.instance=new o),o.instance}async storeAssessmentHistory(e){try{var t,n,r,o,i;const a={assessmentId:e.id,tenantId:e.tenantId,date:e.assessmentDate,overallScore:(null===(t=e.metrics.score)||void 0===t?void 0:t.overall)||0,categoryScores:{identity:(null===(n=e.metrics.score)||void 0===n?void 0:n.identity)||0,dataProtection:(null===(r=e.metrics.score)||void 0===r?void 0:r.dataProtection)||0,endpoint:(null===(o=e.metrics.score)||void 0===o?void 0:o.endpoint)||0,cloudApps:(null===(i=e.metrics.score)||void 0===i?void 0:i.cloudApps)||0},metrics:e.metrics},s=await fetch("".concat(this.baseUrl,"/assessment-history"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok)throw new Error("Failed to store assessment history: ".concat(s.statusText))}catch(a){throw console.error("Error storing assessment history:",a),a}}async getAssessmentHistory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{const n=await fetch("".concat(this.baseUrl,"/assessment-history/").concat(e,"?limit=").concat(t));if(!n.ok){if(404===n.status)return[];throw new Error("Failed to fetch assessment history: ".concat(n.statusText))}return(await n.json()).map((e=>(0,r.A)((0,r.A)({},e),{},{date:new Date(e.date)})))}catch(n){return console.error("Error fetching assessment history:",n),[]}}async compareWithPrevious(e){try{var t,n,r,o,i;const a=(await this.getAssessmentHistory(e.tenantId,2)).filter((t=>t.assessmentId!==e.id)).sort(((e,t)=>t.date.getTime()-e.date.getTime()));if(0===a.length)return null;const s=a[0],c={date:e.assessmentDate,overallScore:(null===(t=e.metrics.score)||void 0===t?void 0:t.overall)||0,categoryScores:{identity:(null===(n=e.metrics.score)||void 0===n?void 0:n.identity)||0,dataProtection:(null===(r=e.metrics.score)||void 0===r?void 0:r.dataProtection)||0,endpoint:(null===(o=e.metrics.score)||void 0===o?void 0:o.endpoint)||0,cloudApps:(null===(i=e.metrics.score)||void 0===i?void 0:i.cloudApps)||0}},l=(e,t)=>{const n=e-t,r=0===t?0:Math.round(n/t*100);return{current:e,previous:t,change:Math.round(100*n)/100,changePercent:r}};return{overall:l(c.overallScore,s.overallScore),categories:{identity:l(c.categoryScores.identity,s.categoryScores.identity),dataProtection:l(c.categoryScores.dataProtection,s.categoryScores.dataProtection),endpoint:l(c.categoryScores.endpoint,s.categoryScores.endpoint),cloudApps:l(c.categoryScores.cloudApps,s.categoryScores.cloudApps)},timespan:{current:c.date,previous:s.date,daysDifference:Math.floor((c.date.getTime()-s.date.getTime())/864e5)}}}catch(a){return console.error("Error comparing assessments:",a),null}}async getRecentAssessments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return this.getAssessmentHistory(e,t)}async cleanupOldHistory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;try{const n=new Date;n.setDate(n.getDate()-t);const r=await fetch("".concat(this.baseUrl,"/assessment-history/").concat(e,"/cleanup"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({cutoffDate:n.toISOString()})});if(!r.ok)throw new Error("Failed to cleanup assessment history: ".concat(r.statusText))}catch(n){console.error("Error cleaning up assessment history:",n)}}}o.instance=void 0},950:(e,t,n)=>{e.exports=n(49)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(i,a),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{hasBrowserEnv:()=>Dt,hasStandardBrowserEnv:()=>Ft,hasStandardBrowserWebWorkerEnv:()=>Ht,navigator:()=>qt,origin:()=>Bt});var o,i=n(950),a=n.t(i,2),s=n(352),c=n(119),l=n.t(c,2);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(o||(o={}));const d="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function p(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function g(e,t,n,r){return void 0===n&&(n=null),u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function v(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,c=o.Pop,l=null,p=v();function v(){return(s.state||{idx:null}).idx}function y(){c=o.Pop;let e=v(),t=null==e?null:e-p;p=e,l&&l({action:c,location:b.location,delta:t})}function w(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==p&&(p=0,s.replaceState(u({},s.state,{idx:p}),""));let b={get action(){return c},get location(){return e(i,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(d,y),l=e,()=>{i.removeEventListener(d,y),l=null}},createHref:e=>t(i,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=o.Push;let r=g(b.location,e,t);n&&n(r,e),p=v()+1;let u=f(r,p),d=b.createHref(r);try{s.pushState(u,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(d)}a&&l&&l({action:c,location:b.location,delta:1})},replace:function(e,t){c=o.Replace;let r=g(b.location,e,t);n&&n(r,e),p=v();let i=f(r,p),u=b.createHref(r);s.replaceState(i,"",u),a&&l&&l({action:c,location:b.location,delta:0})},go:e=>s.go(e)};return b}var w;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(w||(w={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),C(e,t,n,!1)}function C(e,t,n,r){let o=L(("string"===typeof t?v(t):t).pathname||"/",n);if(null==o)return null;let i=k(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let s=0;null==a&&s<i.length;++s){let e=M(o);a=N(i[s],e,r)}return a}function k(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let o=(e,o,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(h(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=F([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),k(e.children,t,c,s)),(null!=e.path||e.index)&&t.push({path:s,score:P(s,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of S(e.path))o(e,t,r);else o(e,t)})),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return o?[i,""]:[i];let a=S(r.join("/")),s=[];return s.push(...a.map((e=>""===e?i:[i,e].join("/")))),o&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const A=/^:[\w-]+$/,T=3,E=2,I=1,_=10,x=-2,R=e=>"*"===e;function P(e,t){let n=e.split("/"),r=n.length;return n.some(R)&&(r+=x),t&&(r+=E),n.filter((e=>!R(e))).reduce(((e,t)=>e+(A.test(t)?T:""===t?I:_)),r)}function N(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,o={},i="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],c=s===r.length-1,l="/"===i?t:t.slice(i.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:c},l),d=e.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!u)return null;Object.assign(o,u.params),a.push({params:o,pathname:F([i,u.pathname]),pathnameBase:H(F([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=F([i,u.pathnameBase]))}return a}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);p("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=s[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const c=s[n];return e[r]=o&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:i,pathnameBase:a,pattern:e}}function M(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return p(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function L(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function j(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function U(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function D(e,t){let n=U(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function q(e,t,n,r){let o;void 0===r&&(r=!1),"string"===typeof e?o=v(e):(o=u({},e),h(!o.pathname||!o.pathname.includes("?"),j("?","pathname","search",o)),h(!o.pathname||!o.pathname.includes("#"),j("#","pathname","hash",o)),h(!o.search||!o.search.includes("#"),j("#","search","hash",o)));let i,a=""===e||""===o.pathname,s=a?"/":o.pathname;if(null==s)i=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;o.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:o=""}="string"===typeof e?v(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:B(r),hash:z(o)}}(o,i),l=s&&"/"!==s&&s.endsWith("/"),d=(a||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!l&&!d||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function K(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],V=(new Set(W),["get",...W]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(this,arguments)}const G=i.createContext(null);const Y=i.createContext(null);const J=i.createContext(null);const $=i.createContext(null);const X=i.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=i.createContext(null);function ee(){return null!=i.useContext($)}function te(){return ee()||h(!1),i.useContext($).location}function ne(e){i.useContext(J).static||i.useLayoutEffect(e)}function re(){let{isDataRoute:e}=i.useContext(X);return e?function(){let{router:e}=he(ue.UseNavigateStable),t=fe(de.UseNavigateStable),n=i.useRef(!1);return ne((()=>{n.current=!0})),i.useCallback((function(r,o){void 0===o&&(o={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,Q({fromRouteId:t},o)))}),[e,t])}():function(){ee()||h(!1);let e=i.useContext(G),{basename:t,future:n,navigator:r}=i.useContext(J),{matches:o}=i.useContext(X),{pathname:a}=te(),s=JSON.stringify(D(o,n.v7_relativeSplatPath)),c=i.useRef(!1);return ne((()=>{c.current=!0})),i.useCallback((function(n,o){if(void 0===o&&(o={}),!c.current)return;if("number"===typeof n)return void r.go(n);let i=q(n,JSON.parse(s),a,"path"===o.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:F([t,i.pathname])),(o.replace?r.replace:r.push)(i,o.state,o)}),[t,r,s,a,e])}()}function oe(e,t,n,r){ee()||h(!1);let{navigator:a}=i.useContext(J),{matches:s}=i.useContext(X),c=s[s.length-1],l=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let d,p=te();if(t){var f;let e="string"===typeof t?v(t):t;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||h(!1),d=e}else d=p;let g=d.pathname||"/",m=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");m="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:m});let w=le(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:F([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:F([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,n,r);return t&&w?i.createElement($.Provider,{value:{location:Q({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:o.Pop}},w):w}function ie(){let e=function(){var e;let t=i.useContext(Z),n=pe(de.UseRouteError),r=fe(de.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=K(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:o},n):null,null)}const ae=i.createElement(ie,null);class se extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(X.Provider,{value:this.props.routeContext},i.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,o=i.useContext(G);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(X.Provider,{value:t},r)}function le(e,t,n,r){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,c=null==(o=n)?void 0:o.errors;if(null!=c){let e=s.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||h(!1),s=s.slice(0,Math.min(s.length,e+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<s.length;i++){let e=s[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=i),e.route.id){let{loaderData:t,errors:r}=n,o=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||o){l=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight(((e,r,o)=>{let a,d=!1,h=null,p=null;var f;n&&(a=c&&r.route.id?c[r.route.id]:void 0,h=r.route.errorElement||ae,l&&(u<0&&0===o?(f="route-fallback",!1||ge[f]||(ge[f]=!0),d=!0,p=null):u===o&&(d=!0,p=r.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,o+1)),m=()=>{let t;return t=a?h:d?p:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ce,{match:r,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===o)?i.createElement(se,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function he(e){let t=i.useContext(G);return t||h(!1),t}function pe(e){let t=i.useContext(Y);return t||h(!1),t}function fe(e){let t=function(){let e=i.useContext(X);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const ge={};function me(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}a.startTransition;function ve(e){let{to:t,replace:n,state:r,relative:o}=e;ee()||h(!1);let{future:a,static:s}=i.useContext(J),{matches:c}=i.useContext(X),{pathname:l}=te(),u=re(),d=q(t,D(c,a.v7_relativeSplatPath),l,"path"===o),p=JSON.stringify(d);return i.useEffect((()=>u(JSON.parse(p),{replace:n,state:r,relative:o})),[u,p,o,n,r]),null}function ye(e){h(!1)}function we(e){let{basename:t="/",children:n=null,location:r,navigationType:a=o.Pop,navigator:s,static:c=!1,future:l}=e;ee()&&h(!1);let u=t.replace(/^\/*/,"/"),d=i.useMemo((()=>({basename:u,navigator:s,static:c,future:Q({v7_relativeSplatPath:!1},l)})),[u,l,s,c]);"string"===typeof r&&(r=v(r));let{pathname:p="/",search:f="",hash:g="",state:m=null,key:y="default"}=r,w=i.useMemo((()=>{let e=L(p,u);return null==e?null:{location:{pathname:e,search:f,hash:g,state:m,key:y},navigationType:a}}),[u,p,f,g,m,y,a]);return null==w?null:i.createElement(J.Provider,{value:d},i.createElement($.Provider,{children:n,value:w}))}function be(e){let{children:t,location:n}=e;return oe(Ce(t),n)}new Promise((()=>{}));i.Component;function Ce(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,((e,r)=>{if(!i.isValidElement(e))return;let o=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,Ce(e.props.children,o));e.type!==ye&&h(!1),e.props.index&&e.props.children&&h(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ce(e.props.children,o)),n.push(a)})),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(Yg){}new Map;const ke=a.startTransition;l.flushSync,a.useId;function Se(e){let{basename:t,children:n,future:r,window:o}=e,a=i.useRef();var s;null==a.current&&(a.current=(void 0===(s={window:o,v5Compat:!0})&&(s={}),y((function(e,t){let{pathname:n,search:r,hash:o}=e.location;return g("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:m(t)}),null,s)));let c=a.current,[l,u]=i.useState({action:c.action,location:c.location}),{v7_startTransition:d}=r||{},h=i.useCallback((e=>{d&&ke?ke((()=>u(e))):u(e)}),[u,d]);return i.useLayoutEffect((()=>c.listen(h)),[c,h]),i.useEffect((()=>me(r)),[r]),i.createElement(we,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:c,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ae,Te;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));var Ee=n(555);const Ie={identity:"Identity & Access Management",dataProtection:"Data Protection",endpoint:"Endpoint Security",cloudApps:"Cloud Apps Security",informationProtection:"Information Protection",threatProtection:"Threat Protection"},_e=({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_ID:"d1cc9e16-9194-4892-92c5-473c9f65dcb3"}.REACT_APP_REDIRECT_URI||window.location.origin,"/.auth/login/aad"),xe="/.auth/logout",Re="/.auth/me",Pe={clientId:"d1cc9e16-9194-4892-92c5-473c9f65dcb3",authority:"https://login.microsoftonline.com/organizations",redirectUri:window.location.origin,navigateToLoginRequestUrl:!0},Ne={scopes:["User.Read","Organization.Read.All","Reports.Read.All","SecurityEvents.Read.All","Directory.Read.All","Policy.Read.All","Application.ReadWrite.All"],prompt:"select_account"},Oe=((0,Ee.A)({},Ne),()=>{const[e,t]=(0,i.useState)({isAuthenticated:!1,user:null,loading:!0,error:null}),n=(0,i.useCallback)((async()=>{try{t((e=>(0,Ee.A)((0,Ee.A)({},e),{},{loading:!0,error:null})));const r=await fetch(Re);if(r.ok){const o=await r.json();if(o.clientPrincipal){var e,n;const r={displayName:o.clientPrincipal.userDetails,email:o.clientPrincipal.userDetails,id:o.clientPrincipal.userId,tenantId:null===(e=o.clientPrincipal.claims)||void 0===e||null===(n=e.find((e=>"tid"===e.typ)))||void 0===n?void 0:n.val};t({isAuthenticated:!0,user:r,loading:!1,error:null})}else t({isAuthenticated:!1,user:null,loading:!1,error:null})}else t({isAuthenticated:!1,user:null,loading:!1,error:null})}catch(r){console.error("Auth check failed:",r),t({isAuthenticated:!1,user:null,loading:!1,error:"Failed to check authentication status"})}}),[]);(0,i.useEffect)((()=>{n()}),[n]);const r=(0,i.useCallback)((async()=>{window.location.href=_e}),[]),o=(0,i.useCallback)((async()=>{window.location.href=xe}),[]),a=(0,i.useCallback)((async()=>{try{const e=await fetch("/api/auth/token");if(e.ok){return(await e.json()).accessToken}return null}catch(e){return console.error("Failed to get access token:",e),null}}),[]);return(0,Ee.A)((0,Ee.A)({},e),{},{login:r,logout:o,getAccessToken:a,checkAuthStatus:n})});function Me(e,t){return function(){return e.apply(t,arguments)}}const{toString:Le}=Object.prototype,{getPrototypeOf:je}=Object,{iterator:Ue,toStringTag:De}=Symbol,qe=(Fe=Object.create(null),e=>{const t=Le.call(e);return Fe[t]||(Fe[t]=t.slice(8,-1).toLowerCase())});var Fe;const He=e=>(e=e.toLowerCase(),t=>qe(t)===e),Be=e=>t=>typeof t===e,{isArray:ze}=Array,Ke=Be("undefined");const We=He("ArrayBuffer");const Ve=Be("string"),Qe=Be("function"),Ge=Be("number"),Ye=e=>null!==e&&"object"===typeof e,Je=e=>{if("object"!==qe(e))return!1;const t=je(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(De in e)&&!(Ue in e)},$e=He("Date"),Xe=He("File"),Ze=He("Blob"),et=He("FileList"),tt=He("URLSearchParams"),[nt,rt,ot,it]=["ReadableStream","Request","Response","Headers"].map(He);function at(e,t){let n,r,{allOwnKeys:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),ze(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=o?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let a;for(n=0;n<i;n++)a=r[n],t.call(null,e[a],a,e)}}function st(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const ct="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,lt=e=>!Ke(e)&&e!==ct;const ut=(dt="undefined"!==typeof Uint8Array&&je(Uint8Array),e=>dt&&e instanceof dt);var dt;const ht=He("HTMLFormElement"),pt=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),ft=He("RegExp"),gt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};at(n,((n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)};const mt=He("AsyncFunction"),vt=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],ct.addEventListener("message",(e=>{let{source:t,data:o}=e;t===ct&&o===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),ct.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,Qe(ct.postMessage)),yt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(ct):"undefined"!==typeof process&&process.nextTick||vt,wt={isArray:ze,isArrayBuffer:We,isBuffer:function(e){return null!==e&&!Ke(e)&&null!==e.constructor&&!Ke(e.constructor)&&Qe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Qe(e.append)&&("formdata"===(t=qe(e))||"object"===t&&Qe(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&We(e.buffer),t},isString:Ve,isNumber:Ge,isBoolean:e=>!0===e||!1===e,isObject:Ye,isPlainObject:Je,isReadableStream:nt,isRequest:rt,isResponse:ot,isHeaders:it,isUndefined:Ke,isDate:$e,isFile:Xe,isBlob:Ze,isRegExp:ft,isFunction:Qe,isStream:e=>Ye(e)&&Qe(e.pipe),isURLSearchParams:tt,isTypedArray:ut,isFileList:et,forEach:at,merge:function e(){const{caseless:t}=lt(this)&&this||{},n={},r=(r,o)=>{const i=t&&st(n,o)||o;Je(n[i])&&Je(r)?n[i]=e(n[i],r):Je(r)?n[i]=e({},r):ze(r)?n[i]=r.slice():n[i]=r};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&at(arguments[o],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return at(t,((t,r)=>{n&&Qe(t)?e[r]=Me(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,a;const s={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&je(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:qe,kindOfTest:He,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(ze(e))return e;let t=e.length;if(!Ge(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Ue]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:ht,hasOwnProperty:pt,hasOwnProp:pt,reduceDescriptors:gt,freezeMethods:e=>{gt(e,((t,n)=>{if(Qe(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Qe(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return ze(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:st,global:ct,isContextDefined:lt,isSpecCompliantForm:function(e){return!!(e&&Qe(e.append)&&"FormData"===e[De]&&e[Ue])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Ye(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=ze(e)?[]:{};return at(e,((e,t)=>{const i=n(e,r+1);!Ke(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:mt,isThenable:e=>e&&(Ye(e)||Qe(e))&&Qe(e.then)&&Qe(e.catch),setImmediate:vt,asap:yt,isIterable:e=>null!=e&&Qe(e[Ue])};function bt(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}wt.inherits(bt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wt.toJSONObject(this.config),code:this.code,status:this.status}}});const Ct=bt.prototype,kt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{kt[e]={value:e}})),Object.defineProperties(bt,kt),Object.defineProperty(Ct,"isAxiosError",{value:!0}),bt.from=(e,t,n,r,o,i)=>{const a=Object.create(Ct);return wt.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),bt.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const St=bt;function At(e){return wt.isPlainObject(e)||wt.isArray(e)}function Tt(e){return wt.endsWith(e,"[]")?e.slice(0,-2):e}function Et(e,t,n){return e?e.concat(t).map((function(e,t){return e=Tt(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const It=wt.toFlatObject(wt,{},null,(function(e){return/^is[A-Z]/.test(e)}));const _t=function(e,t,n){if(!wt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=wt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!wt.isUndefined(t[e])}))).metaTokens,o=n.visitor||l,i=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&wt.isSpecCompliantForm(t);if(!wt.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(wt.isDate(e))return e.toISOString();if(!s&&wt.isBlob(e))throw new St("Blob is not supported. Use a Buffer instead.");return wt.isArrayBuffer(e)||wt.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,o){let s=e;if(e&&!o&&"object"===typeof e)if(wt.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(wt.isArray(e)&&function(e){return wt.isArray(e)&&!e.some(At)}(e)||(wt.isFileList(e)||wt.endsWith(n,"[]"))&&(s=wt.toArray(e)))return n=Tt(n),s.forEach((function(e,r){!wt.isUndefined(e)&&null!==e&&t.append(!0===a?Et([n],r,i):null===a?n:n+"[]",c(e))})),!1;return!!At(e)||(t.append(Et(o,n,i),c(e)),!1)}const u=[],d=Object.assign(It,{defaultVisitor:l,convertValue:c,isVisitable:At});if(!wt.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!wt.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),wt.forEach(n,(function(n,i){!0===(!(wt.isUndefined(n)||null===n)&&o.call(t,n,wt.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t};function xt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Rt(e,t){this._pairs=[],e&&_t(e,this,t)}const Pt=Rt.prototype;Pt.append=function(e,t){this._pairs.push([e,t])},Pt.toString=function(e){const t=e?function(t){return e.call(this,t,xt)}:xt;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Nt=Rt;function Ot(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Mt(e,t,n){if(!t)return e;const r=n&&n.encode||Ot;wt.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let i;if(i=o?o(t,n):wt.isURLSearchParams(t)?t.toString():new Nt(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const Lt=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){wt.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},jt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ut={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Nt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Dt="undefined"!==typeof window&&"undefined"!==typeof document,qt="object"===typeof navigator&&navigator||void 0,Ft=Dt&&(!qt||["ReactNative","NativeScript","NS"].indexOf(qt.product)<0),Ht="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Bt=Dt&&window.location.href||"http://localhost",zt=(0,Ee.A)((0,Ee.A)({},r),Ut);const Kt=function(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),s=o>=e.length;if(i=!i&&wt.isArray(r)?r.length:i,s)return wt.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a;r[i]&&wt.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],o)&&wt.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!a}if(wt.isFormData(e)&&wt.isFunction(e.entries)){const n={};return wt.forEachEntry(e,((e,r)=>{t(function(e){return wt.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const Wt={transitional:jt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=wt.isObject(e);o&&wt.isHTMLForm(e)&&(e=new FormData(e));if(wt.isFormData(e))return r?JSON.stringify(Kt(e)):e;if(wt.isArrayBuffer(e)||wt.isBuffer(e)||wt.isStream(e)||wt.isFile(e)||wt.isBlob(e)||wt.isReadableStream(e))return e;if(wt.isArrayBufferView(e))return e.buffer;if(wt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return _t(e,new zt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return zt.isNode&&wt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=wt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return _t(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e,t,n){if(wt.isString(e))try{return(t||JSON.parse)(e),wt.trim(e)}catch(Yg){if("SyntaxError"!==Yg.name)throw Yg}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Wt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(wt.isResponse(e)||wt.isReadableStream(e))return e;if(e&&wt.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Yg){if(n){if("SyntaxError"===Yg.name)throw St.from(Yg,St.ERR_BAD_RESPONSE,this,null,this.response);throw Yg}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zt.classes.FormData,Blob:zt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wt.forEach(["delete","get","head","post","put","patch"],(e=>{Wt.headers[e]={}}));const Vt=Wt,Qt=wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gt=Symbol("internals");function Yt(e){return e&&String(e).trim().toLowerCase()}function Jt(e){return!1===e||null==e?e:wt.isArray(e)?e.map(Jt):String(e)}function $t(e,t,n,r,o){return wt.isFunction(r)?r.call(this,t,n):(o&&(t=n),wt.isString(t)?wt.isString(r)?-1!==t.indexOf(r):wt.isRegExp(r)?r.test(t):void 0:void 0)}class Xt{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=Yt(t);if(!o)throw new Error("header name must be a non-empty string");const i=wt.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Jt(e))}const i=(e,t)=>wt.forEach(e,((e,n)=>o(e,n,t)));if(wt.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(wt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&Qt[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(wt.isObject(e)&&wt.isIterable(e)){let n,r,o={};for(const t of e){if(!wt.isArray(t))throw TypeError("Object iterator must return a key-value pair");o[r=t[0]]=(n=o[r])?wt.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(o,t)}else null!=e&&o(t,e,n);return this}get(e,t){if(e=Yt(e)){const n=wt.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(wt.isFunction(t))return t.call(this,e,n);if(wt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Yt(e)){const n=wt.findKey(this,e);return!(!n||void 0===this[n]||t&&!$t(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=Yt(e)){const o=wt.findKey(n,e);!o||t&&!$t(0,n[o],o,t)||(delete n[o],r=!0)}}return wt.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!$t(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return wt.forEach(this,((r,o)=>{const i=wt.findKey(n,o);if(i)return t[i]=Jt(r),void delete t[o];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(o):String(o).trim();a!==o&&delete t[o],t[a]=Jt(r),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return wt.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&wt.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Gt]=this[Gt]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Yt(e);t[r]||(!function(e,t){const n=wt.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return wt.isArray(e)?e.forEach(r):r(e),this}}Xt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),wt.reduceDescriptors(Xt.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),wt.freezeMethods(Xt);const Zt=Xt;function en(e,t){const n=this||Vt,r=t||n,o=Zt.from(r.headers);let i=r.data;return wt.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function tn(e){return!(!e||!e.__CANCEL__)}function nn(e,t,n){St.call(this,null==e?"canceled":e,St.ERR_CANCELED,t,n),this.name="CanceledError"}wt.inherits(nn,St,{__CANCEL__:!0});const rn=nn;function on(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new St("Request failed with status code "+n.status,[St.ERR_BAD_REQUEST,St.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const an=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,a=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),l=r[a];o||(o=c),n[i]=s,r[i]=c;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-o<t)return;const h=l&&c-l;return h?Math.round(1e3*d/h):void 0}};const sn=function(e,t){let n,r,o=0,i=1e3/t;const a=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-o;for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];t>=i?a(c,e):(n=c,r||(r=setTimeout((()=>{r=null,a(n)}),i-t)))},()=>n&&a(n)]},cn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const o=an(50,250);return sn((n=>{const i=n.loaded,a=n.lengthComputable?n.total:void 0,s=i-r,c=o(s);r=i;e({loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&i<=a?(a-i)/c:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},ln=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},un=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return wt.asap((()=>e(...n)))},dn=zt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,zt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(zt.origin),zt.navigator&&/(msie|trident)/i.test(zt.navigator.userAgent)):()=>!0,hn=zt.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const a=[e+"="+encodeURIComponent(t)];wt.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),wt.isString(r)&&a.push("path="+r),wt.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function pn(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const fn=e=>e instanceof Zt?(0,Ee.A)({},e):e;function gn(e,t){t=t||{};const n={};function r(e,t,n,r){return wt.isPlainObject(e)&&wt.isPlainObject(t)?wt.merge.call({caseless:r},e,t):wt.isPlainObject(t)?wt.merge({},t):wt.isArray(t)?t.slice():t}function o(e,t,n,o){return wt.isUndefined(t)?wt.isUndefined(e)?void 0:r(void 0,e,0,o):r(e,t,0,o)}function i(e,t){if(!wt.isUndefined(t))return r(void 0,t)}function a(e,t){return wt.isUndefined(t)?wt.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t,n)=>o(fn(e),fn(t),0,!0)};return wt.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=c[r]||o,a=i(e[r],t[r],r);wt.isUndefined(a)&&i!==s||(n[r]=a)})),n}const mn=e=>{const t=gn({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:c}=t;if(t.headers=s=Zt.from(s),t.url=Mt(pn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&s.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),wt.isFormData(r))if(zt.hasStandardBrowserEnv||zt.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(zt.hasStandardBrowserEnv&&(o&&wt.isFunction(o)&&(o=o(t)),o||!1!==o&&dn(t.url))){const e=i&&a&&hn.read(a);e&&s.set(i,e)}return t},vn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=mn(e);let o=r.data;const i=Zt.from(r.headers).normalize();let a,s,c,l,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=r;function f(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let g=new XMLHttpRequest;function m(){if(!g)return;const r=Zt.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());on((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g}),g=null}g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(n(new St("Request aborted",St.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new St("Network Error",St.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||jt;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new St(t,o.clarifyTimeoutError?St.ETIMEDOUT:St.ECONNABORTED,e,g)),g=null},void 0===o&&i.setContentType(null),"setRequestHeader"in g&&wt.forEach(i.toJSON(),(function(e,t){g.setRequestHeader(t,e)})),wt.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),d&&"json"!==d&&(g.responseType=r.responseType),p&&([c,u]=cn(p,!0),g.addEventListener("progress",c)),h&&g.upload&&([s,l]=cn(h),g.upload.addEventListener("progress",s),g.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(a=t=>{g&&(n(!t||t.type?new rn(null,e,g):t),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===zt.protocols.indexOf(v)?n(new St("Unsupported protocol "+v+":",St.ERR_BAD_REQUEST,e)):g.send(o||null)}))},yn=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof St?t:new rn(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new St("timeout ".concat(t," of ms exceeded"),St.ETIMEDOUT))}),t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:s}=r;return s.unsubscribe=()=>wt.asap(a),s}};function wn(e,t){this.v=e,this.k=t}function bn(e){return function(){return new Cn(e.apply(this,arguments))}}function Cn(e){var t,n;function r(t,n){try{var i=e[t](n),a=i.value,s=a instanceof wn;Promise.resolve(s?a.v:a).then((function(n){if(s){var c="return"===t?"return":"next";if(!a.k||n.done)return r(c,n);n=e[c](n).value}o(i.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise((function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function kn(e){return new wn(e,0)}function Sn(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise((function(n){n(e[t](r))})),{done:!1,value:new wn(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function An(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Tn(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Tn(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Tn=function(e){this.s=e,this.n=e.next},Tn.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Tn(e)}Cn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Cn.prototype.next=function(e){return this._invoke("next",e)},Cn.prototype.throw=function(e){return this._invoke("throw",e)},Cn.prototype.return=function(e){return this._invoke("return",e)};const En=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},In=function(){var e=bn((function*(e,t){var n,r=!1,o=!1;try{for(var i,a=An(_n(e));r=!(i=yield kn(a.next())).done;r=!1){const e=i.value;yield*Sn(An(En(e,t)))}}catch(s){o=!0,n=s}finally{try{r&&null!=a.return&&(yield kn(a.return()))}finally{if(o)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),_n=function(){var e=bn((function*(e){if(e[Symbol.asyncIterator])return void(yield*Sn(An(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield kn(t.read());if(e)break;yield n}}finally{yield kn(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),xn=(e,t,n,r)=>{const o=In(e,t);let i,a=0,s=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return s(),void e.close();let i=r.byteLength;if(n){let e=a+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw s(t),t}},cancel:e=>(s(e),o.return())},{highWaterMark:2})},Rn="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Pn=Rn&&"function"===typeof ReadableStream,Nn=Rn&&("function"===typeof TextEncoder?(On=new TextEncoder,e=>On.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var On;const Mn=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Yg){return!1}},Ln=Pn&&Mn((()=>{let e=!1;const t=new Request(zt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),jn=Pn&&Mn((()=>wt.isReadableStream(new Response("").body))),Un={stream:jn&&(e=>e.body)};var Dn;Rn&&(Dn=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Un[e]&&(Un[e]=wt.isFunction(Dn[e])?t=>t[e]():(t,n)=>{throw new St("Response type '".concat(e,"' is not supported"),St.ERR_NOT_SUPPORT,n)})})));const qn=async(e,t)=>{const n=wt.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(wt.isBlob(e))return e.size;if(wt.isSpecCompliantForm(e)){const t=new Request(zt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return wt.isArrayBufferView(e)||wt.isArrayBuffer(e)?e.byteLength:(wt.isURLSearchParams(e)&&(e+=""),wt.isString(e)?(await Nn(e)).byteLength:void 0)})(t):n},Fn=Rn&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:h}=mn(e);l=l?(l+"").toLowerCase():"text";let p,f=yn([o,i&&i.toAbortSignal()],a);const g=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let m;try{if(c&&Ln&&"get"!==n&&"head"!==n&&0!==(m=await qn(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(wt.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=ln(m,cn(un(c)));r=xn(n.body,65536,e,t)}}wt.isString(d)||(d=d?"include":"omit");const o="credentials"in Request.prototype;p=new Request(t,(0,Ee.A)((0,Ee.A)({},h),{},{signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:o?d:void 0}));let i=await fetch(p);const a=jn&&("stream"===l||"response"===l);if(jn&&(s||a&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=wt.toFiniteNumber(i.headers.get("content-length")),[n,r]=s&&ln(t,cn(un(s),!0))||[];i=new Response(xn(i.body,65536,n,(()=>{r&&r(),g&&g()})),e)}l=l||"text";let v=await Un[wt.findKey(Un,l)||"text"](i,e);return!a&&g&&g(),await new Promise(((t,n)=>{on(t,n,{data:v,headers:Zt.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})}))}catch(v){if(g&&g(),v&&"TypeError"===v.name&&/Load failed|fetch/i.test(v.message))throw Object.assign(new St("Network Error",St.ERR_NETWORK,e,p),{cause:v.cause||v});throw St.from(v,v&&v.code,e,p)}}),Hn={http:null,xhr:vn,fetch:Fn};wt.forEach(Hn,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Yg){}Object.defineProperty(e,"adapterName",{value:t})}}));const Bn=e=>"- ".concat(e),zn=e=>wt.isFunction(e)||null===e||!1===e,Kn=e=>{e=wt.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!zn(n)&&(r=Hn[(t=String(n)).toLowerCase()],void 0===r))throw new St("Unknown adapter '".concat(t,"'"));if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Bn).join("\n"):" "+Bn(e[0]):"as no adapter specified";throw new St("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Wn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new rn(null,e)}function Vn(e){Wn(e),e.headers=Zt.from(e.headers),e.data=en.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Kn(e.adapter||Vt.adapter)(e).then((function(t){return Wn(e),t.data=en.call(e,e.transformResponse,t),t.headers=Zt.from(t.headers),t}),(function(t){return tn(t)||(Wn(e),t&&t.response&&(t.response.data=en.call(e,e.transformResponse,t.response),t.response.headers=Zt.from(t.response.headers))),Promise.reject(t)}))}const Qn="1.9.0",Gn={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Gn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Yn={};Gn.transitional=function(e,t,n){function r(e,t){return"[Axios v1.9.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,i)=>{if(!1===e)throw new St(r(o," has been removed"+(t?" in "+t:"")),St.ERR_DEPRECATED);return t&&!Yn[o]&&(Yn[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}},Gn.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const Jn={assertOptions:function(e,t,n){if("object"!==typeof e)throw new St("options must be an object",St.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new St("option "+i+" must be "+n,St.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new St("Unknown option "+i,St.ERR_BAD_OPTION)}},validators:Gn},$n=Jn.validators;class Xn{constructor(e){this.defaults=e||{},this.interceptors={request:new Lt,response:new Lt}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Yg){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=gn(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&Jn.assertOptions(n,{silentJSONParsing:$n.transitional($n.boolean),forcedJSONParsing:$n.transitional($n.boolean),clarifyTimeoutError:$n.transitional($n.boolean)},!1),null!=r&&(wt.isFunction(r)?t.paramsSerializer={serialize:r}:Jn.assertOptions(r,{encode:$n.function,serialize:$n.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Jn.assertOptions(t,{baseUrl:$n.spelling("baseURL"),withXsrfToken:$n.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&wt.merge(o.common,o[t.method]);o&&wt.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=Zt.concat(i,o);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[Vn.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{l=Vn.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return Mt(pn((e=gn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}wt.forEach(["delete","get","head","options"],(function(e){Xn.prototype[e]=function(t,n){return this.request(gn(n||{},{method:e,url:t,data:(n||{}).data}))}})),wt.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(gn(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Xn.prototype[e]=t(),Xn.prototype[e+"Form"]=t(!0)}));const Zn=Xn;class er{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new rn(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new er((function(t){e=t})),cancel:e}}}const tr=er;const nr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nr).forEach((e=>{let[t,n]=e;nr[n]=t}));const rr=nr;const or=function e(t){const n=new Zn(t),r=Me(Zn.prototype.request,n);return wt.extend(r,Zn.prototype,n,{allOwnKeys:!0}),wt.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(gn(t,n))},r}(Vt);or.Axios=Zn,or.CanceledError=rn,or.CancelToken=tr,or.isCancel=tn,or.VERSION=Qn,or.toFormData=_t,or.AxiosError=St,or.Cancel=or.CanceledError,or.all=function(e){return Promise.all(e)},or.spread=function(e){return function(t){return e.apply(null,t)}},or.isAxiosError=function(e){return wt.isObject(e)&&!0===e.isAxiosError},or.mergeConfig=gn,or.AxiosHeaders=Zt,or.formToJSON=e=>Kt(wt.isHTMLForm(e)?new FormData(e):e),or.getAdapter=Kn,or.HttpStatusCode=rr,or.default=or;const ir=or;class ar{constructor(){this.baseUrl=void 0,this.baseUrl={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_ID:"d1cc9e16-9194-4892-92c5-473c9f65dcb3"}.REACT_APP_API_URL||"/api"}static getInstance(){return ar.instance||(ar.instance=new ar),ar.instance}async createEnterpriseApplication(e){try{return(await ir.post("".concat(this.baseUrl,"/enterprise-app"),{targetTenantId:e})).data}catch(t){throw console.error("Error creating enterprise application:",t),t}}async getAssessment(e,t){try{return(await ir.get("".concat(this.baseUrl,"/assessment/").concat(e,"/").concat(t))).data}catch(n){throw console.error("Error fetching assessment:",n),n}}async getBestPractices(){try{return(await ir.get("".concat(this.baseUrl,"/best-practices"))).data}catch(e){throw console.error("Error fetching best practices:",e),e}}async getSecurityMetrics(e){try{const t=await ir.get("".concat(this.baseUrl,"/GetMetrics?tenantId=").concat(e));if(!t.status||200!==t.status)throw new Error("Failed to fetch security metrics");return t.data}catch(t){throw console.error("Error fetching security metrics:",t),t}}async getAssessments(){try{return(await ir.get("".concat(this.baseUrl,"/assessments"))).data}catch(e){throw console.error("Error fetching assessments:",e),e}}async createAssessment(e){try{try{await ir.get("".concat(this.baseUrl,"/assessment/test"))}catch(t){console.error("API test endpoint check failed, API connection might be down:",t)}console.log("Attempting to create assessment with URL:","".concat(this.baseUrl,"/assessment/create")),console.log("Data being sent:",JSON.stringify(e,null,2));const n=await ir.post("".concat(this.baseUrl,"/assessment/create"),e);return console.log("Create assessment response:",n.status,n.statusText),n.data}catch(n){throw console.error("Error creating assessment:",n),ir.isAxiosError(n)&&(n.response?(console.error("Response error data:",n.response.data),console.error("Response status:",n.response.status),console.error("Response headers:",n.response.headers)):n.request?console.error("No response received. Request details:",n.request):console.error("Error message:",n.message),console.error("Error config:",n.config)),n}}async saveAssessment(e){try{const r=await fetch("".concat(this.baseUrl,"/save-assessment"),{method:"POST",headers:(0,Ee.A)({"Content-Type":"application/json"},this.getAuthHeaders()),body:JSON.stringify(e)});if(!r.ok)throw new Error("Failed to save assessment: ".concat(r.statusText));const o=await r.json();try{const{AssessmentHistoryService:e}=await Promise.resolve().then(n.bind(n,915)),t=e.getInstance();await t.storeAssessmentHistory(o)}catch(t){console.warn("Failed to store assessment history:",t)}return o}catch(r){throw console.error("Error saving assessment:",r),new Error(r.message||"Failed to save assessment")}}async getCurrentAssessment(){try{return(await ir.get("".concat(this.baseUrl,"/assessment/current"))).data}catch(t){var e;if(404===(null===(e=t.response)||void 0===e?void 0:e.status))return null;throw console.error("Error fetching current assessment:",t),t}}async createMultiTenantApp(e){try{console.log("Creating multi-tenant application with URL:","".concat(this.baseUrl,"/enterprise-app/multi-tenant")),console.log("Data being sent:",JSON.stringify(e,null,2));const t=await ir.post("".concat(this.baseUrl,"/enterprise-app/multi-tenant"),e);return console.log("Create multi-tenant app response:",t.status,t.statusText),t.data}catch(t){throw console.error("Error creating multi-tenant application:",t),ir.isAxiosError(t)&&(t.response?(console.error("Response error data:",t.response.data),console.error("Response status:",t.response.status),console.error("Response headers:",t.response.headers)):t.request?console.error("No response received. Request details:",t.request):console.error("Error message:",t.message),console.error("Error config:",t.config)),t}}getAuthHeaders(){const e=localStorage.getItem("access_token");return e?{Authorization:"Bearer ".concat(e)}:{}}}ar.instance=void 0;const sr=()=>{const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(!1),[o,a]=(0,i.useState)(null),{fetchMetrics:s}=(()=>{const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(!1),[o,a]=(0,i.useState)(null),s=ar.getInstance(),c=(0,i.useCallback)((async e=>{r(!0),a(null);try{const n=await s.getSecurityMetrics(e);t(n)}catch(o){throw a(o.message||"Failed to fetch metrics"),o}finally{r(!1)}}),[]),l=(0,i.useCallback)((async()=>{r(!0),a(null);try{return await s.getBestPractices()}catch(o){throw a(o.message||"Failed to compare with best practices"),o}finally{r(!1)}}),[]);return{metrics:e,loading:n,error:o,fetchMetrics:c,compareWithBestPractices:l}})(),c=ar.getInstance();(0,i.useEffect)((()=>{(async()=>{r(!0);try{const e=await c.getCurrentAssessment();t(e)}catch(o){console.error("Error loading current assessment:",o),a(o.message||"Failed to load current assessment")}finally{r(!1)}})()}),[]);const l=(0,i.useCallback)((async()=>{r(!0),a(null);try{const e=await c.getCurrentAssessment();t(e)}catch(o){console.error("Error refreshing assessment:",o),a(o.message||"Failed to refresh assessment")}finally{r(!1)}}),[]),u=(0,i.useCallback)((async e=>{r(!0),a(null);try{await s(e);const n={id:crypto.randomUUID(),tenantId:e,assessmentDate:new Date,assessor:{id:"",name:"",email:""},metrics:await c.getSecurityMetrics(e),recommendations:[],status:"draft",lastModified:new Date};t(n)}catch(o){a(o.message||"Failed to create assessment")}finally{r(!1)}}),[s]),d=(0,i.useCallback)((async()=>{if(e){r(!0),a(null);try{await c.saveAssessment(e),t((0,Ee.A)((0,Ee.A)({},e),{},{lastModified:new Date}))}catch(o){a(o.message||"Failed to save assessment")}finally{r(!1)}}else a("No assessment to save")}),[e]),h=(0,i.useCallback)((async(e,n)=>{r(!0),a(null);try{const r=await c.getAssessment(e,n);t(r)}catch(o){a(o.message||"Failed to load assessment")}finally{r(!1)}}),[]);return{assessment:e,loading:n,error:o,createAssessment:u,saveAssessment:d,loadAssessment:h,refreshAssessment:l}};var cr=n(915),lr=n(414);const ur=e=>{let{percentage:t,size:n,strokeWidth:r,circleColor:o}=e;const i=(n-r)/2,a=2*i*Math.PI,s=a-t/100*a;return(0,lr.jsx)("div",{className:"circle-progress",style:{width:n,height:n},children:(0,lr.jsxs)("svg",{className:"circle-progress-svg",width:n,height:n,viewBox:"0 0 ".concat(n," ").concat(n),children:[(0,lr.jsx)("circle",{className:"circle-progress-background",cx:n/2,cy:n/2,r:i,strokeWidth:"".concat(r,"px")}),(0,lr.jsx)("circle",{className:"circle-progress-indicator",cx:n/2,cy:n/2,r:i,strokeWidth:"".concat(r,"px"),style:{strokeDasharray:a,strokeDashoffset:s,stroke:o},transform:"rotate(-90 ".concat(n/2," ").concat(n/2,")")})]})})},dr=e=>{var t,n,r,o,a;let{assessment:s,tenant:c,onCategoryClick:l}=e;const[u,d]=(0,i.useState)(null),[h,p]=(0,i.useState)(!0),f=cr.AssessmentHistoryService.getInstance();(0,i.useEffect)((()=>{(async()=>{try{p(!0);const e=await f.compareWithPrevious(s);d(e)}catch(e){console.error("Error loading assessment comparison:",e)}finally{p(!1)}})()}),[s]);const g=(null===(t=s.metrics.score)||void 0===t?void 0:t.overall)||0,m={identity:(null===(n=s.metrics.score)||void 0===n?void 0:n.identity)||0,data:(null===(r=s.metrics.score)||void 0===r?void 0:r.dataProtection)||0,devices:(null===(o=s.metrics.score)||void 0===o?void 0:o.endpoint)||0,infrastructure:(null===(a=s.metrics.score)||void 0===a?void 0:a.cloudApps)||0},v=(e,t)=>{if(0===e)return"No change";const n=e>0?"+":"";return"".concat(n).concat(e,"% (").concat(n).concat(t,"%)")},y=e=>{if(h)return(0,lr.jsx)("span",{className:"category-change loading",children:"..."});if(!u||!u.categories[e])return(0,lr.jsx)("span",{className:"category-change neutral",children:"New"});const t=u.categories[e],n=t.change;t.changePercent;if(0===n)return(0,lr.jsx)("span",{className:"category-change neutral",children:"0%"});const r=n>0?"+":"",o="category-change ".concat((e=>e>0?"positive":e<0?"negative":"neutral")(n));return(0,lr.jsxs)("span",{className:o,children:[r,n,"%"]})};return(0,lr.jsxs)("div",{className:"security-score-overview",children:[(0,lr.jsxs)("div",{className:"score-header",children:[(0,lr.jsx)("h2",{children:"Security Score Overview"}),(0,lr.jsxs)("div",{className:"last-assessment",children:["Last assessment: ",new Date(s.lastModified).toLocaleDateString(),u&&u.timespan&&(0,lr.jsxs)("span",{children:[" \xb7 ",u.timespan.daysDifference," days ago"]}),u&&(0,lr.jsx)("span",{className:"compare-link",style:{marginLeft:"10px",cursor:"pointer"},children:"Compare with previous"})]})]}),(0,lr.jsxs)("div",{className:"score-cards-container",children:[(0,lr.jsxs)("div",{className:"overall-score-card",children:[(0,lr.jsxs)("div",{className:"circle-progress-container",children:[(0,lr.jsx)(ur,{percentage:g,size:160,strokeWidth:12,circleColor:"#007BFF"}),(0,lr.jsxs)("div",{className:"overall-score-label",children:[(0,lr.jsxs)("span",{className:"score-value",children:[g,"%"]}),(0,lr.jsx)("span",{className:"score-subtitle",children:"Overall Score"})]})]}),(0,lr.jsx)("div",{className:"score-change",children:h?(0,lr.jsx)("div",{className:"score-neutral",children:"Loading comparison..."}):function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"since last assessment";if(!e)return(0,lr.jsx)("div",{className:"score-neutral",children:"No previous assessment for comparison"});const n=e.change,r=e.changePercent;return n>0?(0,lr.jsxs)("div",{className:"score-improvement",children:[(0,lr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lr.jsx)("polyline",{points:"18 15 12 9 6 15"})}),v(n,r)," ",t]}):n<0?(0,lr.jsxs)("div",{className:"score-decline",children:[(0,lr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lr.jsx)("polyline",{points:"6 9 12 15 18 9"})}),v(n,r)," ",t]}):(0,lr.jsxs)("div",{className:"score-neutral",children:["No change ",t]})}(null===u||void 0===u?void 0:u.overall,"since last assessment")})]}),(0,lr.jsxs)("div",{className:"category-scores",children:[(0,lr.jsxs)("div",{className:"category-score-card",onClick:()=>l("identity"),children:[(0,lr.jsx)("div",{className:"category-icon identity-icon",children:(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lr.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,lr.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})}),(0,lr.jsxs)("div",{className:"category-details",children:[(0,lr.jsx)("span",{className:"category-name",children:"Identity"}),(0,lr.jsxs)("span",{className:"category-score",children:[m.identity,"%"]}),y("identity")]})]}),(0,lr.jsxs)("div",{className:"category-score-card",onClick:()=>l("data"),children:[(0,lr.jsx)("div",{className:"category-icon data-icon",children:(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lr.jsx)("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),(0,lr.jsx)("path",{d:"M2 17l10 5 10-5"}),(0,lr.jsx)("path",{d:"M2 12l10 5 10-5"})]})}),(0,lr.jsxs)("div",{className:"category-details",children:[(0,lr.jsx)("span",{className:"category-name",children:"Data"}),(0,lr.jsxs)("span",{className:"category-score",children:[m.data,"%"]}),y("dataProtection")]})]}),(0,lr.jsxs)("div",{className:"category-score-card",onClick:()=>l("devices"),children:[(0,lr.jsx)("div",{className:"category-icon devices-icon",children:(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lr.jsx)("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),(0,lr.jsx)("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),(0,lr.jsx)("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}),(0,lr.jsxs)("div",{className:"category-details",children:[(0,lr.jsx)("span",{className:"category-name",children:"Devices"}),(0,lr.jsxs)("span",{className:"category-score",children:[m.devices,"%"]}),y("endpoint")]})]}),(0,lr.jsxs)("div",{className:"category-score-card",onClick:()=>l("infrastructure"),children:[(0,lr.jsx)("div",{className:"category-icon infrastructure-icon",children:(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lr.jsx)("rect",{x:"2",y:"2",width:"20",height:"8",rx:"2",ry:"2"}),(0,lr.jsx)("rect",{x:"2",y:"14",width:"20",height:"8",rx:"2",ry:"2"}),(0,lr.jsx)("line",{x1:"6",y1:"6",x2:"6.01",y2:"6"}),(0,lr.jsx)("line",{x1:"6",y1:"18",x2:"6.01",y2:"18"})]})}),(0,lr.jsxs)("div",{className:"category-details",children:[(0,lr.jsx)("span",{className:"category-name",children:"Infrastructure"}),(0,lr.jsxs)("span",{className:"category-score",children:[m.infrastructure,"%"]}),y("cloudApps")]})]})]})]})]})},hr=e=>{let{assessment:t}=e;const n=e=>{switch(e){case"shield-check":return(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lr.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}),(0,lr.jsx)("path",{d:"M9 12l2 2 4-4"})]});case"users":return(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lr.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,lr.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,lr.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,lr.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]});case"lock":return(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lr.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,lr.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]});default:return null}};return(0,lr.jsxs)("div",{className:"top-recommendations",children:[(0,lr.jsx)("h2",{children:"Top Recommendations"}),(0,lr.jsx)("div",{className:"recommendations-list",children:[{id:"rec-1",title:"Enable Multi-Factor Authentication for all admin accounts",description:"Currently only 4 out of 12 admin accounts have MFA enabled.",impact:"high",category:"identity",icon:"shield-check"},{id:"rec-2",title:"Review high privilege roles",description:"8 users with Global Admin role detected. Recommended maximum is 4.",impact:"medium",category:"identity",icon:"users"},{id:"rec-3",title:"Enable Conditional Access policies",description:"No Conditional Access policies are configured.",impact:"high",category:"access",icon:"lock"}].map((e=>(0,lr.jsxs)("div",{className:"recommendation-item",children:[(0,lr.jsx)("div",{className:"recommendation-icon ".concat(e.category,"-icon"),children:n(e.icon)}),(0,lr.jsxs)("div",{className:"recommendation-content",children:[(0,lr.jsx)("h3",{children:e.title}),(0,lr.jsx)("p",{children:e.description}),(0,lr.jsx)("button",{className:"view-details-button",children:"View details"})]})]},e.id)))}),(0,lr.jsx)("div",{className:"view-all-recommendations",children:(0,lr.jsxs)("button",{className:"view-all-button",children:["View all recommendations",(0,lr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lr.jsx)("polyline",{points:"9 18 15 12 9 6"})})]})})]})},pr=e=>{let{assessment:t}=e;const n=e=>{switch(e){case"high":return(0,lr.jsx)("span",{className:"severity-badge high",children:"High Risk"});case"medium":return(0,lr.jsx)("span",{className:"severity-badge medium",children:"Medium Risk"});case"low":return(0,lr.jsx)("span",{className:"severity-badge low",children:"Low Risk"});default:return null}};return(0,lr.jsxs)("div",{className:"critical-security-risks",children:[(0,lr.jsx)("h2",{children:"Critical Security Risks"}),(0,lr.jsx)("div",{className:"risks-list",children:[{id:"risk-1",title:"Legacy authentication is enabled",description:"Legacy authentication protocols don't support MFA and are commonly used in attacks.",severity:"high",category:"identity"},{id:"risk-2",title:"Self-service password reset not enabled",description:"Users cannot reset their passwords, increasing helpdesk load and security risks.",severity:"medium",category:"identity"},{id:"risk-3",title:"External sharing enabled for all domains",description:"SharePoint and OneDrive content can be shared with any external domain.",severity:"high",category:"data"}].map((e=>(0,lr.jsxs)("div",{className:"risk-item",children:[(0,lr.jsxs)("div",{className:"risk-icon",children:["identity"===e.category&&(0,lr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"risk-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lr.jsx)("path",{d:"M13 17.5l4 4 6-6.5M4.12 3.29L1 6.41a2 2 0 0 0 0 2.83L12.59 21a2 2 0 0 0 2.83 0l9.9-9.9a2 2 0 0 0 0-2.83L13 5.94"})}),"data"===e.category&&(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"risk-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lr.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,lr.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,lr.jsx)("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})]}),(0,lr.jsxs)("div",{className:"risk-content",children:[(0,lr.jsxs)("div",{className:"risk-header",children:[(0,lr.jsx)("h3",{children:e.title}),n(e.severity)]}),(0,lr.jsx)("p",{className:"risk-description",children:e.description}),(0,lr.jsx)("div",{className:"risk-actions",children:(0,lr.jsx)("button",{className:"details-button",children:"View details"})})]})]},e.id)))}),(0,lr.jsx)("div",{className:"view-all-risks",children:(0,lr.jsxs)("button",{className:"view-all-button",children:["View all security risks",(0,lr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lr.jsx)("polyline",{points:"9 18 15 12 9 6"})})]})})]})},fr=e=>{let{tenantId:t,limit:n=5}=e;const[r,o]=(0,i.useState)([]),[a,s]=(0,i.useState)(!0),[c,l]=(0,i.useState)(null),u=cr.AssessmentHistoryService.getInstance();(0,i.useEffect)((()=>{(async()=>{if(t)try{s(!0),l(null);const e=await u.getRecentAssessments(t,n);o(e)}catch(e){console.error("Error loading recent assessments:",e),l("Failed to load recent assessments"),o([])}finally{s(!1)}else s(!1)})()}),[t,n]);if(a)return(0,lr.jsxs)("div",{className:"recent-assessments",children:[(0,lr.jsx)("div",{className:"section-header",children:(0,lr.jsx)("h3",{children:"Recent Assessments"})}),(0,lr.jsxs)("div",{className:"loading-state",children:[(0,lr.jsx)("div",{className:"loading-spinner"}),(0,lr.jsx)("span",{children:"Loading recent assessments..."})]})]});if(c)return(0,lr.jsxs)("div",{className:"recent-assessments",children:[(0,lr.jsx)("div",{className:"section-header",children:(0,lr.jsx)("h3",{children:"Recent Assessments"})}),(0,lr.jsxs)("div",{className:"error-state",children:[(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lr.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lr.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,lr.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),(0,lr.jsx)("span",{children:c})]})]});if(0===r.length)return(0,lr.jsxs)("div",{className:"recent-assessments",children:[(0,lr.jsx)("div",{className:"section-header",children:(0,lr.jsx)("h3",{children:"Recent Assessments"})}),(0,lr.jsxs)("div",{className:"empty-state",children:[(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lr.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,lr.jsx)("polyline",{points:"14,2 14,8 20,8"}),(0,lr.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,lr.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,lr.jsx)("polyline",{points:"10,9 9,9 8,9"})]}),(0,lr.jsx)("h4",{children:"No Assessment History"}),(0,lr.jsx)("p",{children:"Run your first assessment to see historical data and trends."})]})]});const d=(e=>{if(e.length<2)return{direction:"stable",change:0};const t=e[0].overallScore-e[1].overallScore;return Math.abs(t)<2?{direction:"stable",change:t}:{direction:t>0?"up":"down",change:Math.round(t)}})(r);return(0,lr.jsxs)("div",{className:"recent-assessments",children:[(0,lr.jsxs)("div",{className:"section-header",children:[(0,lr.jsx)("h3",{children:"Recent Assessments"}),(0,lr.jsxs)("div",{className:"trend-indicator",children:[(0,lr.jsxs)("div",{className:"trend-icon ".concat(d.direction),children:["up"===d.direction&&(0,lr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lr.jsx)("polyline",{points:"18 15 12 9 6 15"})}),"down"===d.direction&&(0,lr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lr.jsx)("polyline",{points:"6 9 12 15 18 9"})}),"stable"===d.direction&&(0,lr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lr.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})]}),(0,lr.jsx)("span",{className:"trend-text",children:"stable"===d.direction?"Stable":"".concat(Math.abs(d.change),"% ").concat("up"===d.direction?"improvement":"decline")})]})]}),(0,lr.jsx)("div",{className:"assessments-list",children:r.map(((e,t)=>{return(0,lr.jsxs)("div",{className:"assessment-item ".concat(0===t?"latest":""),children:[(0,lr.jsxs)("div",{className:"assessment-main",children:[(0,lr.jsxs)("div",{className:"assessment-date",children:[(r=e.date,new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)),0===t&&(0,lr.jsx)("span",{className:"latest-badge",children:"Latest"})]}),(0,lr.jsx)("div",{className:"assessment-score",children:(0,lr.jsx)("div",{className:"score-circle",style:{background:"conic-gradient(".concat((n=e.overallScore,n>=80?"#10b981":n>=60?"#f59e0b":"#ef4444")," ").concat(3.6*e.overallScore,"deg, #e5e7eb 0deg)")},children:(0,lr.jsxs)("span",{className:"score-value",children:[e.overallScore,"%"]})})})]}),(0,lr.jsxs)("div",{className:"category-scores-mini",children:[(0,lr.jsxs)("div",{className:"category-mini",children:[(0,lr.jsx)("span",{className:"category-label",children:"ID"}),(0,lr.jsxs)("span",{className:"category-value",children:[e.categoryScores.identity,"%"]})]}),(0,lr.jsxs)("div",{className:"category-mini",children:[(0,lr.jsx)("span",{className:"category-label",children:"Data"}),(0,lr.jsxs)("span",{className:"category-value",children:[e.categoryScores.dataProtection,"%"]})]}),(0,lr.jsxs)("div",{className:"category-mini",children:[(0,lr.jsx)("span",{className:"category-label",children:"EP"}),(0,lr.jsxs)("span",{className:"category-value",children:[e.categoryScores.endpoint,"%"]})]}),(0,lr.jsxs)("div",{className:"category-mini",children:[(0,lr.jsx)("span",{className:"category-label",children:"Cloud"}),(0,lr.jsxs)("span",{className:"category-value",children:[e.categoryScores.cloudApps,"%"]})]})]})]},e.assessmentId);var n,r}))}),r.length>0&&(0,lr.jsx)("div",{className:"view-all-link",children:(0,lr.jsx)("button",{className:"link-button",children:"View Full History \u2192"})})]})},gr=e=>{let{title:t,subtitle:n,description:r,icon:o,children:i,footer:a,className:s="",onClick:c}=e;return(0,lr.jsxs)("div",{className:"bg-card text-card-foreground rounded-lg border border-border shadow-sm ".concat(c?"cursor-pointer hover:shadow-md transition-shadow":""," ").concat(s),onClick:c,children:[(t||o)&&(0,lr.jsxs)("div",{className:"flex items-center p-6 pb-2",children:[o&&(0,lr.jsx)("div",{className:"mr-3 text-primary",children:o}),(0,lr.jsxs)("div",{className:"space-y-1",children:[t&&(0,lr.jsx)("h3",{className:"text-lg font-semibold leading-none tracking-tight",children:t}),n&&(0,lr.jsx)("div",{className:"text-sm text-muted-foreground",children:n}),r&&(0,lr.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:r})]})]}),(0,lr.jsx)("div",{className:"p-6 pt-0",children:i}),a&&(0,lr.jsx)("div",{className:"flex items-center p-6 pt-0 border-t border-border",children:a})]})},mr=()=>{var e,t;const n=re(),{isAuthenticated:r}=Oe(),{assessment:o,loading:a,error:s}=sr(),[c,l]=(0,i.useState)();if(!r)return(0,lr.jsx)("div",{className:"dashboard",children:(0,lr.jsx)(gr,{title:"Authentication Required",className:"authentication-card",children:(0,lr.jsx)("p",{className:"card-message",children:"Please log in to view the dashboard."})})});if(a)return(0,lr.jsx)("div",{className:"dashboard",children:(0,lr.jsx)(gr,{className:"loading-card",children:(0,lr.jsxs)("div",{className:"loading-indicator",children:[(0,lr.jsx)("div",{className:"spinner"}),(0,lr.jsx)("span",{children:"Loading dashboard..."})]})})});if(s)return(0,lr.jsx)("div",{className:"dashboard",children:(0,lr.jsx)(gr,{title:"Error",className:"error-card",children:(0,lr.jsx)("div",{className:"error-message",children:s})})});if(!o)return(0,lr.jsx)("div",{className:"dashboard",children:(0,lr.jsx)(gr,{title:"No Active Assessment",description:"Start a new assessment to view security metrics and recommendations.",footer:(0,lr.jsx)("button",{className:"lm-button",onClick:()=>n("/settings"),children:"Create New Assessment"}),className:"no-assessment-card",children:(0,lr.jsxs)("div",{className:"empty-state",children:[(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"empty-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lr.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,lr.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,lr.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),(0,lr.jsx)("p",{children:"No assessment data available"})]})})});const u={id:o.tenantId,name:o.tenantId,securityScore:(null===(e=o.metrics.score)||void 0===e?void 0:e.overall)||0,metrics:o.metrics||{},lastAssessmentDate:new Date(o.lastModified),recommendations:(null===(t=o.recommendations)||void 0===t?void 0:t.map((e=>e.id)))||[]};return(0,lr.jsxs)("div",{className:"dashboard",children:[(0,lr.jsxs)("div",{className:"dashboard-header",children:[(0,lr.jsx)("h1",{className:"dashboard-title",children:"Dashboard"}),(0,lr.jsxs)("div",{className:"dashboard-actions",children:[(0,lr.jsx)("button",{className:"lm-button secondary",children:"Compare with previous"}),(0,lr.jsxs)("button",{className:"lm-button primary",children:[(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lr.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lr.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,lr.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"New Assessment"]})]})]}),(0,lr.jsxs)("div",{className:"last-assessment-info",children:["Last assessment: ",new Date(o.lastModified).toLocaleDateString()]}),(0,lr.jsxs)("div",{className:"dashboard-grid",children:[(0,lr.jsx)("div",{className:"security-score-section",children:(0,lr.jsx)(dr,{assessment:o,tenant:u,onCategoryClick:e=>{l(e)}})}),(0,lr.jsxs)("div",{className:"dashboard-columns",children:[(0,lr.jsxs)("div",{className:"dashboard-column",children:[(0,lr.jsx)(hr,{assessment:o}),(0,lr.jsx)(fr,{tenantId:o.tenantId,limit:5})]}),(0,lr.jsx)("div",{className:"dashboard-column",children:(0,lr.jsx)(pr,{assessment:o})})]})]})]})},vr=()=>{const e=re(),t=te(),{loading:n,error:r,isAuthenticated:o,login:a}=Oe(),[s,c]=(0,i.useState)(!1),l="true"===new URLSearchParams(t.search).get("noauto");(0,i.useEffect)((()=>{n||o||r||l||s?o&&e("/"):a()}),[n,o,r,a,e,l,s]);const u=()=>{c(!0),a()};return n?(0,lr.jsx)("div",{className:"lm-login-container",children:(0,lr.jsxs)("div",{className:"lm-login-card",children:[(0,lr.jsxs)("div",{className:"lm-logo-container",children:[(0,lr.jsx)("img",{src:"/images/lm-logo.svg",alt:"LM Logo",className:"lm-logo"}),(0,lr.jsx)("h1",{className:"lm-title",children:"M365 Security Assessment"})]}),(0,lr.jsx)("p",{className:"lm-subtitle",children:"Initializing authentication..."}),(0,lr.jsx)("div",{className:"lm-loading-spinner"})]})}):r?(0,lr.jsx)("div",{className:"lm-login-container",children:(0,lr.jsxs)("div",{className:"lm-login-card",children:[(0,lr.jsxs)("div",{className:"lm-logo-container",children:[(0,lr.jsx)("img",{src:"/images/lm-logo.svg",alt:"LM Logo",className:"lm-logo"}),(0,lr.jsx)("h1",{className:"lm-title",children:"M365 Security Assessment"})]}),(0,lr.jsx)("div",{className:"error-message",children:r}),(0,lr.jsx)("div",{className:"lm-button-container",children:(0,lr.jsxs)("button",{onClick:u,className:"lm-button",children:[(0,lr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lr.jsx)("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M13.8 12H3"})}),"Try Again"]})})]})}):l?(0,lr.jsxs)("div",{className:"lm-login-container",children:[(0,lr.jsx)("div",{className:"lm-brand-background"}),(0,lr.jsxs)("div",{className:"lm-login-card",children:[(0,lr.jsxs)("div",{className:"lm-logo-container",children:[(0,lr.jsx)("img",{src:"/images/lm-logo.svg",alt:"LM Logo",className:"lm-logo"}),(0,lr.jsx)("h1",{className:"lm-title",children:"M365 Security Assessment"})]}),(0,lr.jsx)("p",{className:"lm-subtitle",children:"You have been successfully logged out."}),(0,lr.jsx)("div",{className:"lm-button-container",children:(0,lr.jsxs)("button",{onClick:u,className:"lm-button",children:[(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 48 48",children:[(0,lr.jsx)("rect",{width:"9",height:"9",x:"6",y:"6",fill:"#f25022"}),(0,lr.jsx)("rect",{width:"9",height:"9",x:"6",y:"19",fill:"#00a4ef"}),(0,lr.jsx)("rect",{width:"9",height:"9",x:"19",y:"6",fill:"#7fba00"}),(0,lr.jsx)("rect",{width:"9",height:"9",x:"19",y:"19",fill:"#ffb900"})]}),"Sign in with Microsoft"]})})]})]}):(0,lr.jsxs)("div",{className:"lm-login-container",children:[(0,lr.jsx)("div",{className:"lm-brand-background"}),(0,lr.jsxs)("div",{className:"lm-login-card",children:[(0,lr.jsxs)("div",{className:"lm-logo-container",children:[(0,lr.jsx)("img",{src:"/images/lm-logo.svg",alt:"LM Logo",className:"lm-logo"}),(0,lr.jsx)("h1",{className:"lm-title",children:"M365 Security Assessment"})]}),(0,lr.jsx)("p",{className:"lm-subtitle",children:"Secure assessment for your Microsoft 365 environment"}),(0,lr.jsx)("div",{className:"lm-button-container",children:(0,lr.jsxs)("button",{onClick:u,className:"lm-button",children:[(0,lr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 48 48",children:[(0,lr.jsx)("rect",{width:"9",height:"9",x:"6",y:"6",fill:"#f25022"}),(0,lr.jsx)("rect",{width:"9",height:"9",x:"6",y:"19",fill:"#00a4ef"}),(0,lr.jsx)("rect",{width:"9",height:"9",x:"19",y:"6",fill:"#7fba00"}),(0,lr.jsx)("rect",{width:"9",height:"9",x:"19",y:"19",fill:"#ffb900"})]}),"Sign in with Microsoft"]})})]})]})},yr=e=>{let{assessment:t,previousAssessmentId:n,compareToBestPractices:r=!0}=e;const{comparisonResults:o,loading:a,error:s,compareWithBestPractices:c,compareWithPrevious:l}=(()=>{const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(!1),[o,a]=(0,i.useState)(null),s=ar.getInstance(),c=(0,i.useCallback)((async e=>{r(!0),a(null);try{const n=await s.getBestPractices(),r=[];r.push({category:"Identity",metric:"MFA Adoption",current:e.metrics.identity.mfaAdoption,target:n.identity.mfaAdoption,gap:n.identity.mfaAdoption-e.metrics.identity.mfaAdoption,impact:"high"}),r.push({category:"Data Protection",metric:"DLP Policies",current:e.metrics.dataProtection.dlpPolicies.active,target:n.dataProtection.dlpPolicies.minimum,gap:n.dataProtection.dlpPolicies.minimum-e.metrics.dataProtection.dlpPolicies.active,impact:"high"}),r.push({category:"Endpoint Security",metric:"Device Compliance",current:e.metrics.endpoint.deviceCompliance.compliant/e.metrics.endpoint.deviceCompliance.total*100,target:95,gap:95-e.metrics.endpoint.deviceCompliance.compliant/e.metrics.endpoint.deviceCompliance.total*100,impact:"medium"}),t(r)}catch(o){a(o.message||"Failed to compare with best practices")}finally{r(!1)}}),[]),l=(0,i.useCallback)((async(e,n)=>{r(!0),a(null);try{const r=await s.getAssessment(e.tenantId,n),o=[];Object.entries(e.metrics.score).forEach((e=>{let[t,n]=e;const i=r.metrics.score[t];o.push({category:t.charAt(0).toUpperCase()+t.slice(1),metric:"Score",current:n,target:i,gap:n-i,impact:Math.abs(n-i)>20?"high":Math.abs(n-i)>10?"medium":"low"})})),t(o)}catch(o){a(o.message||"Failed to compare with previous assessment")}finally{r(!1)}}),[]);return{comparisonResults:e,loading:n,error:o,compareWithBestPractices:c,compareWithPrevious:l}})();return(0,i.useEffect)((()=>{(async()=>{n?await l(t,n):r&&await c(t)})()}),[t,n,r]),a?(0,lr.jsx)("div",{children:"Loading comparison..."}):s?(0,lr.jsx)("div",{className:"error-message",children:s}):o&&0!==o.length?(0,lr.jsxs)("div",{className:"comparison-view",children:[(0,lr.jsx)("h3",{children:n?"Historical Comparison":"Best Practices Comparison"}),(0,lr.jsx)("div",{className:"comparison-grid",children:o.map(((e,t)=>(0,lr.jsxs)("div",{className:"comparison-item",children:[(0,lr.jsxs)("div",{className:"category-header",children:[(0,lr.jsx)("h4",{children:e.category}),(0,lr.jsx)("span",{className:"impact-badge impact-".concat(e.impact),children:e.impact.toUpperCase()})]}),(0,lr.jsxs)("div",{className:"metric-info",children:[(0,lr.jsx)("p",{className:"metric-name",children:e.metric}),(0,lr.jsxs)("div",{className:"metric-values",children:[(0,lr.jsxs)("div",{className:"current-value",children:[(0,lr.jsx)("span",{className:"label",children:"Current"}),(0,lr.jsxs)("span",{className:"value",children:[Math.round(e.current),"%"]})]}),(0,lr.jsxs)("div",{className:"target-value",children:[(0,lr.jsx)("span",{className:"label",children:"Target"}),(0,lr.jsxs)("span",{className:"value",children:[Math.round(e.target),"%"]})]})]}),(0,lr.jsxs)("div",{className:"gap-indicator",children:[(0,lr.jsx)("div",{className:"gap-bar",style:{width:"".concat(Math.min(Math.abs(e.gap),100),"%"),backgroundColor:e.gap>0?"#107C10":"#D83B01"}}),(0,lr.jsxs)("span",{className:"gap-value",children:[e.gap>0?"+":"",Math.round(e.gap),"%"]})]})]})]},t)))}),(0,lr.jsx)("style",{children:"\n        .comparison-view {\n          padding: 20px;\n          background: white;\n          border-radius: 8px;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        }\n\n        .comparison-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n          gap: 20px;\n          margin-top: 20px;\n        }\n\n        .comparison-item {\n          background: #f8f8f8;\n          border-radius: 6px;\n          padding: 16px;\n        }\n\n        .category-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 12px;\n        }\n\n        .category-header h4 {\n          margin: 0;\n          color: #333;\n        }\n\n        .impact-badge {\n          padding: 4px 8px;\n          border-radius: 4px;\n          font-size: 12px;\n          font-weight: bold;\n        }\n\n        .impact-high {\n          background: #fed9cc;\n          color: #d83b01;\n        }\n\n        .impact-medium {\n          background: #fff4ce;\n          color: #9d5d00;\n        }\n\n        .impact-low {\n          background: #dff6dd;\n          color: #107c10;\n        }\n\n        .metric-info {\n          margin-top: 12px;\n        }\n\n        .metric-name {\n          margin: 0 0 8px;\n          color: #666;\n        }\n\n        .metric-values {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 12px;\n        }\n\n        .current-value,\n        .target-value {\n          text-align: center;\n        }\n\n        .label {\n          display: block;\n          font-size: 12px;\n          color: #666;\n        }\n\n        .value {\n          font-size: 18px;\n          font-weight: bold;\n          color: #333;\n        }\n\n        .gap-indicator {\n          position: relative;\n          height: 24px;\n          background: #f0f0f0;\n          border-radius: 12px;\n          overflow: hidden;\n        }\n\n        .gap-bar {\n          height: 100%;\n          transition: width 0.3s ease;\n        }\n\n        .gap-value {\n          position: absolute;\n          right: 8px;\n          top: 50%;\n          transform: translateY(-50%);\n          font-size: 12px;\n          font-weight: bold;\n          color: #333;\n        }\n\n        .error-message {\n          color: #d83b01;\n          padding: 10px;\n          background: #fed9cc;\n          border-radius: 4px;\n        }\n      "})]}):(0,lr.jsx)("div",{children:"No comparison data available"})},wr=()=>{const e=re(),{isAuthenticated:t}=Oe(),[n,r]=(0,i.useState)([]),[o,a]=(0,i.useState)(!0),[s,c]=(0,i.useState)(null),[l,u]=(0,i.useState)([]),d=ar.getInstance();(0,i.useEffect)((()=>{t&&(async()=>{try{const e=await d.getAssessments();r(e)}catch(s){c(s.message||"Failed to load assessment history")}finally{a(!1)}})()}),[t]);return t?o?(0,lr.jsx)("div",{children:"Loading assessment history..."}):s?(0,lr.jsx)("div",{className:"error-message",children:s}):(0,lr.jsxs)("div",{className:"history-page",children:[(0,lr.jsxs)("div",{className:"history-header",children:[(0,lr.jsx)("h1",{children:"Assessment History"}),(0,lr.jsx)("button",{onClick:()=>e("/settings"),children:"New Assessment"})]}),(0,lr.jsxs)("div",{className:"history-grid",children:[(0,lr.jsxs)("div",{className:"assessments-list",children:[(0,lr.jsx)("h2",{children:"Past Assessments"}),n.map((e=>(0,lr.jsxs)("div",{className:"assessment-card ".concat(l.includes(e.id)?"selected":""),onClick:()=>{return t=e.id,void u((e=>e.includes(t)?e.filter((e=>e!==t)):e.length<2?[...e,t]:[e[1],t]));var t},children:[(0,lr.jsxs)("div",{className:"assessment-header",children:[(0,lr.jsxs)("h3",{children:["Assessment ",e.id.slice(0,8)]}),(0,lr.jsx)("span",{className:"status-badge status-".concat(e.status),children:e.status})]}),(0,lr.jsxs)("div",{className:"assessment-info",children:[(0,lr.jsxs)("div",{className:"info-row",children:[(0,lr.jsx)("span",{className:"label",children:"Tenant:"}),(0,lr.jsx)("span",{className:"value",children:e.tenantId})]}),(0,lr.jsxs)("div",{className:"info-row",children:[(0,lr.jsx)("span",{className:"label",children:"Date:"}),(0,lr.jsx)("span",{className:"value",children:e.assessmentDate.toLocaleDateString()})]}),(0,lr.jsxs)("div",{className:"info-row",children:[(0,lr.jsx)("span",{className:"label",children:"Score:"}),(0,lr.jsx)("span",{className:"value",children:e.metrics.score.overall})]})]})]},e.id)))]}),2===l.length&&(0,lr.jsxs)("div",{className:"comparison-view",children:[(0,lr.jsx)("h2",{children:"Assessment Comparison"}),(0,lr.jsx)(yr,{assessment:n.find((e=>e.id===l[0])),previousAssessmentId:l[1]})]})]}),(0,lr.jsx)("style",{children:"\n        .history-page {\n          padding: 24px;\n          max-width: 1400px;\n          margin: 0 auto;\n        }\n\n        .history-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 24px;\n        }\n\n        .history-grid {\n          display: grid;\n          gap: 24px;\n          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n        }\n\n        .assessments-list {\n          background: white;\n          border-radius: 8px;\n          padding: 20px;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        }\n\n        .assessment-card {\n          background: #f8f8f8;\n          border-radius: 6px;\n          padding: 16px;\n          margin-bottom: 16px;\n          cursor: pointer;\n          transition: transform 0.2s ease;\n        }\n\n        .assessment-card:hover {\n          transform: translateY(-2px);\n        }\n\n        .assessment-card.selected {\n          border: 2px solid #0078d4;\n          background: #f0f7ff;\n        }\n\n        .assessment-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 12px;\n        }\n\n        .status-badge {\n          padding: 4px 8px;\n          border-radius: 4px;\n          font-size: 12px;\n          font-weight: 500;\n        }\n\n        .status-draft {\n          background: #fff4ce;\n          color: #9d5d00;\n        }\n\n        .status-completed {\n          background: #dff6dd;\n          color: #107c10;\n        }\n\n        .status-archived {\n          background: #f3f2f1;\n          color: #666666;\n        }\n\n        .assessment-info {\n          font-size: 14px;\n        }\n\n        .info-row {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 4px;\n        }\n\n        .label {\n          color: #666;\n        }\n\n        .value {\n          font-weight: 500;\n          color: #333;\n        }\n\n        .comparison-view {\n          background: white;\n          border-radius: 8px;\n          padding: 20px;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        }\n\n        button {\n          background: #0078d4;\n          color: white;\n          padding: 10px 20px;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 16px;\n        }\n\n        .error-message {\n          color: #d83b01;\n          padding: 16px;\n          background: #fed9cc;\n          border-radius: 8px;\n          margin-bottom: 16px;\n        }\n\n        .authentication-prompt {\n          text-align: center;\n          padding: 48px;\n          background: white;\n          border-radius: 8px;\n          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        }\n      "})]}):(0,lr.jsxs)("div",{className:"authentication-prompt",children:[(0,lr.jsx)("h2",{children:"Authentication Required"}),(0,lr.jsx)("p",{children:"Please log in to view assessment history."})]})};var br,Cr=n(827);!function(e){e.GET="GET",e.PATCH="PATCH",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(br||(br={}));class kr{static validateDependencies(e){if(0===e.size){const e=new Error("Empty requests map, Please provide at least one request.");throw e.name="Empty Requests Error",e}return(e=>{const t=e.entries();let n=t.next();for(;!n.done;){const e=n.value[1];if(void 0!==e.dependsOn&&e.dependsOn.length>0)return!1;n=t.next()}return!0})(e)||(e=>{const t=e.entries();let n=t.next();const r=n.value[1];if(void 0!==r.dependsOn&&r.dependsOn.length>0)return!1;let o=n;for(n=t.next();!n.done;){const e=n.value[1];if(void 0===e.dependsOn||1!==e.dependsOn.length||e.dependsOn[0]!==o.value[1].id)return!1;o=n,n=t.next()}return!0})(e)||(e=>{const t=e.entries();let n=t.next();const r=n.value[1];let o;if(void 0===r.dependsOn||0===r.dependsOn.length)o=r.id;else{if(1!==r.dependsOn.length)return!1;{const t=r.dependsOn[0];if(t===r.id||!e.has(t))return!1;o=t}}for(n=t.next();!n.done;){const e=n.value[1];if((void 0===e.dependsOn||0===e.dependsOn.length)&&o!==e.id)return!1;if(void 0!==e.dependsOn&&0!==e.dependsOn.length){if(1===e.dependsOn.length&&(e.id===o||e.dependsOn[0]!==o))return!1;if(e.dependsOn.length>1)return!1}n=t.next()}return!0})(e)}static getRequestData(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const t={url:""},n=new RegExp("^https?://");t.url=n.test(e.url)?"/"+e.url.split(/.*?\/\/.*?\//)[1]:e.url,t.method=e.method;const r={};return e.headers.forEach(((e,t)=>{r[t]=e})),Object.keys(r).length&&(t.headers=r),e.method!==br.PATCH&&e.method!==br.POST&&e.method!==br.PUT||(t.body=yield kr.getRequestBody(e)),t}))}static getRequestBody(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){let t,n=!1;try{const r=e.clone();t=yield r.json(),n=!0}catch(Yg){}if(!n)try{if("undefined"!==typeof Blob){const n=yield e.blob(),r=new FileReader;t=yield new Promise((e=>{r.addEventListener("load",(()=>{const t=r.result,n=new RegExp("^s*data:(.+?/.+?(;.+?=.+?)*)?(;base64)?,(.*)s*$").exec(t);e(n[4])}),!1),r.readAsDataURL(n)}))}else if("undefined"!==typeof Buffer){t=(yield e.buffer()).toString("base64")}n=!0}catch(Yg){}return t}))}constructor(e){if(this.requests=new Map,"undefined"!==typeof e){const t=kr.requestLimit;if(e.length>t){const e=new Error("Maximum requests limit exceeded, Max allowed number of requests are ".concat(t));throw e.name="Limit Exceeded Error",e}for(const n of e)this.addRequest(n)}}addRequest(e){const t=kr.requestLimit;if(""===e.id){const e=new Error("Id for a request is empty, Please provide an unique id");throw e.name="Empty Id For Request",e}if(this.requests.size===t){const e=new Error("Maximum requests limit exceeded, Max allowed number of requests are ".concat(t));throw e.name="Limit Exceeded Error",e}if(this.requests.has(e.id)){const t=new Error("Adding request with duplicate id ".concat(e.id,", Make the id of the requests unique"));throw t.name="Duplicate RequestId Error",t}return this.requests.set(e.id,e),e.id}removeRequest(e){const t=this.requests.delete(e),n=this.requests.entries();let r=n.next();for(;!r.done;){const t=r.value[1].dependsOn;if("undefined"!==typeof t){const n=t.indexOf(e);-1!==n&&t.splice(n,1),0===t.length&&delete r.value[1].dependsOn}r=n.next()}return t}getContent(){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const e=[],t={requests:e},n=this.requests.entries();let r=n.next();if(r.done){const e=new Error("No requests added yet, Please add at least one request.");throw e.name="Empty Payload",e}if(!kr.validateDependencies(this.requests)){const e=new Error("Invalid dependency found, Dependency should be:\n1. Parallel - no individual request states a dependency in the dependsOn property.\n2. Serial - all individual requests depend on the previous individual request.\n3. Same - all individual requests that state a dependency in the dependsOn property, state the same dependency.");throw e.name="Invalid Dependency",e}for(;!r.done;){const t=r.value[1],o=yield kr.getRequestData(t.request);if(void 0!==o.body&&(void 0===o.headers||void 0===o.headers["content-type"])){const e=new Error("Content-type header is not mentioned for request #".concat(t.id,", For request having body, Content-type header should be mentioned"));throw e.name="Invalid Content-type header",e}o.id=t.id,void 0!==t.dependsOn&&t.dependsOn.length>0&&(o.dependsOn=t.dependsOn),e.push(o),r=n.next()}return t.requests=e,t}))}addDependency(e,t){if(!this.requests.has(e)){const t=new Error("Dependent ".concat(e," does not exists, Please check the id"));throw t.name="Invalid Dependent",t}if("undefined"!==typeof t&&!this.requests.has(t)){const e=new Error("Dependency ".concat(t," does not exists, Please check the id"));throw e.name="Invalid Dependency",e}if("undefined"!==typeof t){const n=this.requests.get(e);if(void 0===n.dependsOn&&(n.dependsOn=[]),-1!==n.dependsOn.indexOf(t)){const n=new Error("Dependency ".concat(t," is already added for the request ").concat(e));throw n.name="Duplicate Dependency",n}n.dependsOn.push(t)}else{const n=this.requests.entries();let r,o=n.next();for(;!o.done&&o.value[1].id!==e;)r=o,o=n.next();if("undefined"===typeof r){const e=new Error("Can't add dependency ".concat(t,", There is only a dependent request in the batch"));throw e.name="Invalid Dependency Addition",e}{const t=r.value[0];if(void 0===o.value[1].dependsOn&&(o.value[1].dependsOn=[]),-1!==o.value[1].dependsOn.indexOf(t)){const n=new Error("Dependency ".concat(t," is already added for the request ").concat(e));throw n.name="Duplicate Dependency",n}o.value[1].dependsOn.push(t)}}}removeDependency(e,t){const n=this.requests.get(e);if("undefined"===typeof n||void 0===n.dependsOn||0===n.dependsOn.length)return!1;if("undefined"!==typeof t){const e=n.dependsOn.indexOf(t);return-1!==e&&(n.dependsOn.splice(e,1),!0)}return delete n.dependsOn,!0}}kr.requestLimit=20;const Sr=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"]);class Ar extends Error{static setGraphClientError(e){let t;return e instanceof Error?t=e:(t=new Ar,t.customError=e),t}constructor(e){super(e),Object.setPrototypeOf(this,Ar.prototype)}}const Tr=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],Er=e=>{const t=e&&e.constructor&&e.constructor.name;if("Buffer"===t||"Blob"===t||"File"===t||"FormData"===t||"string"===typeof e)return e;if("ArrayBuffer"===t)e=Buffer.from(e);else if("Int8Array"===t||"Int16Array"===t||"Int32Array"===t||"Uint8Array"===t||"Uint16Array"===t||"Uint32Array"===t||"Uint8ClampedArray"===t||"Float32Array"===t||"Float64Array"===t||"DataView"===t)e=Buffer.from(e.buffer);else try{e=JSON.stringify(e)}catch(n){throw new Error("Unable to stringify the content")}return e},Ir=e=>xr(e),_r=(e,t)=>(t.forEach((e=>Rr(e))),xr(e,t)),xr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sr;if(-1!==(e=e.toLowerCase()).indexOf("https://")){const n=(e=e.replace("https://","")).indexOf(":"),r=e.indexOf("/");let o="";if(-1!==r)return-1!==n&&n<r?(o=e.substring(0,n),t.has(o)):(o=e.substring(0,r),t.has(o))}return!1},Rr=e=>{if(-1!==e.indexOf("/"))throw new Ar("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")};class Pr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.middlewareOptions=new Map;for(const t of e){const e=t.constructor;this.middlewareOptions.set(e,t)}}getMiddlewareOptions(e){return this.middlewareOptions.get(e)}setMiddlewareOptions(e,t){this.middlewareOptions.set(e,t)}}const Nr=(e,t,n)=>{let r=null;if("undefined"!==typeof Request&&e instanceof Request)r=e.headers.get(n);else if("undefined"!==typeof t&&void 0!==t.headers)if("undefined"!==typeof Headers&&t.headers instanceof Headers)r=t.headers.get(n);else if(t.headers instanceof Array){const e=t.headers;for(let t=0,o=e.length;t<o;t++)if(e[t][0]===n){r=e[t][1];break}}else void 0!==t.headers[n]&&(r=t.headers[n]);return r},Or=(e,t,n,r)=>{if("undefined"!==typeof Request&&e instanceof Request)e.headers.set(n,r);else if("undefined"!==typeof t)if(void 0===t.headers)t.headers=new Headers({[n]:r});else if("undefined"!==typeof Headers&&t.headers instanceof Headers)t.headers.set(n,r);else if(t.headers instanceof Array){let e=0;const o=t.headers.length;for(;e<o;e++){const o=t.headers[e];if(o[0]===n){o[1]=r;break}}e===o&&t.headers.push([n,r])}else Object.assign(t.headers,{[n]:r})},Mr=(e,t,n,r)=>{"undefined"!==typeof Request&&e instanceof Request?e.headers.append(n,r):"undefined"!==typeof t&&(void 0===t.headers?t.headers=new Headers({[n]:r}):"undefined"!==typeof Headers&&t.headers instanceof Headers?t.headers.append(n,r):t.headers instanceof Array?t.headers.push([n,r]):void 0===t.headers?t.headers={[n]:r}:void 0===t.headers[n]?t.headers[n]=r:t.headers[n]+=", ".concat(r))};class Lr{constructor(e,t){this.authenticationProvider=e,this.authenticationProviderOptions=t}}var jr;!function(e){e[e.NONE=0]="NONE",e[e.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",e[e.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",e[e.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"}(jr||(jr={}));class Ur{constructor(){this.featureUsage=jr.NONE}static updateFeatureUsageFlag(e,t){let n;e.middlewareControl instanceof Pr?n=e.middlewareControl.getMiddlewareOptions(Ur):e.middlewareControl=new Pr,"undefined"===typeof n&&(n=new Ur,e.middlewareControl.setMiddlewareOptions(Ur,n)),n.setFeatureUsage(t)}setFeatureUsage(e){this.featureUsage=this.featureUsage|e}getFeatureUsage(){return this.featureUsage.toString(16)}}class Dr{constructor(e){this.authenticationProvider=e}execute(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const t="string"===typeof e.request?e.request:e.request.url;if(Ir(t)||e.customHosts&&_r(t,e.customHosts)){let t,n,r;e.middlewareControl instanceof Pr&&(t=e.middlewareControl.getMiddlewareOptions(Lr)),t&&(n=t.authenticationProvider,r=t.authenticationProviderOptions),n||(n=this.authenticationProvider);const o=yield n.getAccessToken(r),i="Bearer ".concat(o);Mr(e.request,e.options,Dr.AUTHORIZATION_HEADER,i),Ur.updateFeatureUsageFlag(e,jr.AUTHENTICATION_HANDLER_ENABLED)}else e.options.headers&&delete e.options.headers[Dr.AUTHORIZATION_HEADER];return yield this.nextMiddleware.execute(e)}))}setNext(e){this.nextMiddleware=e}}Dr.AUTHORIZATION_HEADER="Authorization";class qr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qr.DEFAULT_DELAY,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qr.DEFAULT_MAX_RETRIES,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qr.defaultShouldRetry;if(e>qr.MAX_DELAY&&t>qr.MAX_MAX_RETRIES){const e=new Error("Delay and MaxRetries should not be more than ".concat(qr.MAX_DELAY," and ").concat(qr.MAX_MAX_RETRIES));throw e.name="MaxLimitExceeded",e}if(e>qr.MAX_DELAY){const e=new Error("Delay should not be more than ".concat(qr.MAX_DELAY));throw e.name="MaxLimitExceeded",e}if(t>qr.MAX_MAX_RETRIES){const e=new Error("MaxRetries should not be more than ".concat(qr.MAX_MAX_RETRIES));throw e.name="MaxLimitExceeded",e}if(e<0&&t<0){const e=new Error("Delay and MaxRetries should not be negative");throw e.name="MinExpectationNotMet",e}if(e<0){const e=new Error("Delay should not be negative");throw e.name="MinExpectationNotMet",e}if(t<0){const e=new Error("MaxRetries should not be negative");throw e.name="MinExpectationNotMet",e}this.delay=Math.min(e,qr.MAX_DELAY),this.maxRetries=Math.min(t,qr.MAX_MAX_RETRIES),this.shouldRetry=n}getMaxDelay(){return qr.MAX_DELAY}}qr.DEFAULT_DELAY=3,qr.DEFAULT_MAX_RETRIES=3,qr.MAX_DELAY=180,qr.MAX_MAX_RETRIES=10,qr.defaultShouldRetry=()=>!0;class Fr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qr;this.options=e}isRetry(e){return-1!==Fr.RETRY_STATUS_CODES.indexOf(e.status)}isBuffered(e,t){const n="string"===typeof e?t.method:e.method;if(n===br.PUT||n===br.PATCH||n===br.POST){if("application/octet-stream"===Nr(e,t,"Content-Type"))return!1}return!0}getDelay(e,t,n){const r=()=>Number(Math.random().toFixed(3)),o=void 0!==e.headers?e.headers.get(Fr.RETRY_AFTER_HEADER):null;let i;return i=null!==o?Number.isNaN(Number(o))?Math.round((new Date(o).getTime()-Date.now())/1e3):Number(o):t>=2?this.getExponentialBackOffTime(t)+n+r():n+r(),Math.min(i,this.options.getMaxDelay()+r())}getExponentialBackOffTime(e){return Math.round(.5*(Math.pow(2,e)-1))}sleep(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const t=1e3*e;return new Promise((e=>setTimeout(e,t)))}))}getOptions(e){let t;return e.middlewareControl instanceof Pr&&(t=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),"undefined"===typeof t&&(t=Object.assign(new qr,this.options)),t}executeWithRetry(e,t,n){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){if(yield this.nextMiddleware.execute(e),t<n.maxRetries&&this.isRetry(e.response)&&this.isBuffered(e.request,e.options)&&n.shouldRetry(n.delay,t,e.request,e.options,e.response)){++t,Or(e.request,e.options,Fr.RETRY_ATTEMPT_HEADER,t.toString());const r=this.getDelay(e.response,t,n.delay);return yield this.sleep(r),yield this.executeWithRetry(e,t,n)}}))}execute(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const t=this.getOptions(e);return Ur.updateFeatureUsageFlag(e,jr.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(e,0,t)}))}setNext(e){this.nextMiddleware=e}}Fr.RETRY_STATUS_CODES=[429,503,504],Fr.RETRY_ATTEMPT_HEADER="Retry-Attempt",Fr.RETRY_AFTER_HEADER="Retry-After";class Hr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hr.DEFAULT_MAX_REDIRECTS,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hr.defaultShouldRedirect;if(e>Hr.MAX_MAX_REDIRECTS){const e=new Error("MaxRedirects should not be more than ".concat(Hr.MAX_MAX_REDIRECTS));throw e.name="MaxLimitExceeded",e}if(e<0){const e=new Error("MaxRedirects should not be negative");throw e.name="MinExpectationNotMet",e}this.maxRedirects=e,this.shouldRedirect=t}}Hr.DEFAULT_MAX_REDIRECTS=5,Hr.MAX_MAX_REDIRECTS=20,Hr.defaultShouldRedirect=()=>!0;class Br{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Hr;this.options=e}isRedirect(e){return-1!==Br.REDIRECT_STATUS_CODES.indexOf(e.status)}hasLocationHeader(e){return e.headers.has(Br.LOCATION_HEADER)}getLocationHeader(e){return e.headers.get(Br.LOCATION_HEADER)}isRelativeURL(e){return-1===e.indexOf("://")}shouldDropAuthorizationHeader(e,t){const n=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,r=n.exec(e);let o,i;null!==r&&(o=r[0]);const a=n.exec(t);return null!==a&&(i=a[0]),"undefined"!==typeof o&&"undefined"!==typeof i&&o!==i}updateRequestUrl(e,t){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){var n,r;t.request="string"===typeof t.request?e:yield(n=e,r=t.request,(0,Cr.__awaiter)(void 0,void 0,void 0,(function*(){const e=r.headers.get("Content-Type")?yield r.blob():yield Promise.resolve(void 0),{method:t,headers:o,referrer:i,referrerPolicy:a,mode:s,credentials:c,cache:l,redirect:u,integrity:d,keepalive:h,signal:p}=r;return new Request(n,{method:t,headers:o,body:e,referrer:i,referrerPolicy:a,mode:s,credentials:c,cache:l,redirect:u,integrity:d,keepalive:h,signal:p})})))}))}getOptions(e){let t;return e.middlewareControl instanceof Pr&&(t=e.middlewareControl.getMiddlewareOptions(Hr)),"undefined"===typeof t&&(t=Object.assign(new Hr,this.options)),t}executeWithRedirect(e,t,n){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){yield this.nextMiddleware.execute(e);const r=e.response;if(t<n.maxRedirects&&this.isRedirect(r)&&this.hasLocationHeader(r)&&n.shouldRedirect(r)){if(++t,r.status===Br.STATUS_CODE_SEE_OTHER)e.options.method=br.GET,delete e.options.body;else{const t=this.getLocationHeader(r);!this.isRelativeURL(t)&&this.shouldDropAuthorizationHeader(r.url,t)&&delete e.options.headers[Br.AUTHORIZATION_HEADER],yield this.updateRequestUrl(t,e)}yield this.executeWithRedirect(e,t,n)}}))}execute(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const t=this.getOptions(e);return e.options.redirect=Br.MANUAL_REDIRECT,Ur.updateFeatureUsageFlag(e,jr.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(e,0,t)}))}setNext(e){this.nextMiddleware=e}}Br.REDIRECT_STATUS_CODES=[301,302,303,307,308],Br.STATUS_CODE_SEE_OTHER=303,Br.LOCATION_HEADER="Location",Br.AUTHORIZATION_HEADER="Authorization",Br.MANUAL_REDIRECT="manual";class zr{execute(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const t="string"===typeof e.request?e.request:e.request.url;if(Ir(t)||e.customHosts&&_r(t,e.customHosts)){let t=Nr(e.request,e.options,zr.CLIENT_REQUEST_ID_HEADER);t||(t=(()=>{let e="";for(let t=0;t<32;t++)8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=Math.floor(16*Math.random()).toString(16);return e})(),Or(e.request,e.options,zr.CLIENT_REQUEST_ID_HEADER,t));let n,r="".concat(zr.PRODUCT_NAME,"/").concat("3.0.7");if(e.middlewareControl instanceof Pr&&(n=e.middlewareControl.getMiddlewareOptions(Ur)),n){const e=n.getFeatureUsage();r+=" (".concat(zr.FEATURE_USAGE_STRING,"=").concat(e,")")}Mr(e.request,e.options,zr.SDK_VERSION_HEADER,r)}else delete e.options.headers[zr.CLIENT_REQUEST_ID_HEADER],delete e.options.headers[zr.SDK_VERSION_HEADER];return yield this.nextMiddleware.execute(e)}))}setNext(e){this.nextMiddleware=e}}zr.CLIENT_REQUEST_ID_HEADER="client-request-id",zr.SDK_VERSION_HEADER="SdkVersion",zr.PRODUCT_NAME="graph-js",zr.FEATURE_USAGE_STRING="featureUsage";var Kr;!function(e){e[e.MANUAL=0]="MANUAL",e[e.RANDOM=1]="RANDOM"}(Kr||(Kr={}));var Wr,Vr,Qr,Gr;!function(e){e.ARRAYBUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.RAW="raw",e.STREAM="stream",e.TEXT="text"}(Wr||(Wr={})),function(e){e.TEXT_HTML="text/html",e.TEXT_XML="text/xml",e.APPLICATION_XML="application/xml",e.APPLICATION_XHTML="application/xhtml+xml"}(Vr||(Vr={})),function(e){e.TEXT_PLAIN="text/plain",e.APPLICATION_JSON="application/json"}(Qr||(Qr={})),function(e){e.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",e.IMAGE="^image\\/.+"}(Gr||(Gr={}));class Yr{static parseDocumentResponse(e,t){return"undefined"!==typeof DOMParser?new Promise(((n,r)=>{e.text().then((e=>{try{const r=(new DOMParser).parseFromString(e,t);n(r)}catch(o){r(o)}}))})):Promise.resolve(e.body)}static convertResponse(e,t){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){if(204===e.status)return Promise.resolve();let n;const r=e.headers.get("Content-type");switch(t){case Wr.ARRAYBUFFER:n=yield e.arrayBuffer();break;case Wr.BLOB:n=yield e.blob();break;case Wr.DOCUMENT:n=yield Yr.parseDocumentResponse(e,Vr.TEXT_XML);break;case Wr.JSON:n=yield e.json();break;case Wr.STREAM:n=yield Promise.resolve(e.body);break;case Wr.TEXT:n=yield e.text();break;default:if(null!==r){const t=r.split(";")[0];n=new RegExp(Gr.DOCUMENT).test(t)?yield Yr.parseDocumentResponse(e,t):new RegExp(Gr.IMAGE).test(t)?e.blob():t===Qr.TEXT_PLAIN?yield e.text():t===Qr.APPLICATION_JSON?yield e.json():Promise.resolve(e.body)}else n=Promise.resolve(e.body)}return n}))}static getResponse(e,t,n){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){if(t===Wr.RAW)return Promise.resolve(e);{const r=yield Yr.convertResponse(e,t);if(!e.ok)throw r;if("function"!==typeof n)return r;n(null,r)}}))}}class Jr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.minValue=e,this.maxValue=t}}class $r{get location(){return this._location}set location(e){this._location=e}get responseBody(){return this._responseBody}set responseBody(e){this._responseBody=e}constructor(e,t){this._location=t,this._responseBody=e}static CreateUploadResult(e,t){return new $r(e,t.get("location"))}}class Xr{static createUploadSession(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const o=yield e.api(t).headers(r).post(n);return{url:o.uploadUrl,expiry:new Date(o.expirationDateTime),isCancelled:!1}}))}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.DEFAULT_FILE_SIZE=5242880,this.client=e,!t.sliceFile)throw new Ar("Please pass the FileUpload object, StreamUpload object or any custom implementation of the FileObject interface");this.file=t,this.file=t,r.rangeSize||(r.rangeSize=this.DEFAULT_FILE_SIZE),this.options=r,this.uploadSession=n,this.nextRange=new Jr(0,this.options.rangeSize-1)}parseRange(e){const t=e[0];if("undefined"===typeof t||""===t)return new Jr;const n=t.split("-"),r=parseInt(n[0],10);let o=parseInt(n[1],10);return Number.isNaN(o)&&(o=this.file.size-1),new Jr(r,o)}updateTaskStatus(e){this.uploadSession.expiry=new Date(e.expirationDateTime),this.nextRange=this.parseRange(e.nextExpectedRanges)}getNextRange(){if(-1===this.nextRange.minValue)return this.nextRange;const e=this.nextRange.minValue;let t=e+this.options.rangeSize-1;return t>=this.file.size&&(t=this.file.size-1),new Jr(e,t)}sliceFile(e){if(console.warn("The LargeFileUploadTask.sliceFile() function has been deprecated and moved into the FileObject interface."),this.file.content instanceof ArrayBuffer||this.file.content instanceof Blob||this.file.content instanceof Uint8Array)return this.file.content.slice(e.minValue,e.maxValue+1);throw new Ar("The LargeFileUploadTask.sliceFile() function expects only Blob, ArrayBuffer or Uint8Array file content. Please note that the sliceFile() function is deprecated.")}upload(){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const e=this.options&&this.options.uploadEventHandlers;for(;!this.uploadSession.isCancelled;){const t=this.getNextRange();if(-1===t.maxValue){const e=new Error("Task with which you are trying to upload is already completed, Please check for your uploaded file");throw e.name="Invalid Session",e}const n=yield this.file.sliceFile(t),r=yield this.uploadSliceGetRawResponse(n,t,this.file.size);if(!r)throw new Ar("Something went wrong! Large file upload slice response is null.");const o=yield Yr.getResponse(r);if(201===r.status||200===r.status&&o.id)return this.reportProgress(e,t),$r.CreateUploadResult(o,r.headers);const i={expirationDateTime:o.expirationDateTime||o.ExpirationDateTime,nextExpectedRanges:o.NextExpectedRanges||o.nextExpectedRanges};this.updateTaskStatus(i),this.reportProgress(e,t)}}))}reportProgress(e,t){e&&e.progress&&e.progress(t,e.extraCallbackParam)}uploadSlice(e,t,n){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){return yield this.client.api(this.uploadSession.url).headers({"Content-Length":"".concat(t.maxValue-t.minValue+1),"Content-Range":"bytes ".concat(t.minValue,"-").concat(t.maxValue,"/").concat(n),"Content-Type":"application/octet-stream"}).put(e)}))}uploadSliceGetRawResponse(e,t,n){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){return yield this.client.api(this.uploadSession.url).headers({"Content-Length":"".concat(t.maxValue-t.minValue+1),"Content-Range":"bytes ".concat(t.minValue,"-").concat(t.maxValue,"/").concat(n),"Content-Type":"application/octet-stream"}).responseType(Wr.RAW).put(e)}))}cancel(){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const e=yield this.client.api(this.uploadSession.url).responseType(Wr.RAW).delete();return 204===e.status&&(this.uploadSession.isCancelled=!0),e}))}getStatus(){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const e=yield this.client.api(this.uploadSession.url).get();return this.updateTaskStatus(e),e}))}resume(){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){return yield this.getStatus(),yield this.upload()}))}getUploadSession(){return this.uploadSession}}class Zr{constructor(e,t,n){if(this.content=e,this.name=t,this.size=n,!e||!t||!n)throw new Ar("Please provide the upload content, name of the file and size of the file")}sliceFile(e){return this.content.slice(e.minValue,e.maxValue+1)}}const eo=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5242880;const t=62914560;return e>t&&(e=t),(n=e)>327680&&(n=320*Math.floor(n/327680)*1024),n;var n};class to extends Xr{static constructCreateSessionUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:to.DEFAULT_UPLOAD_PATH;return e=e.trim(),t=t.trim(),""===t&&(t="/"),"/"!==t[0]&&(t="/".concat(t)),"/"!==t[t.length-1]&&(t="".concat(t,"/")),"/me/drive/root:".concat(t.split("/").map((e=>encodeURIComponent(e))).join("/")).concat(encodeURIComponent(e),":/createUploadSession")}static getFileInfo(e,t){let n,r;if("undefined"!==typeof Blob&&e instanceof Blob)n=new File([e],t),r=n.size;else if("undefined"!==typeof File&&e instanceof File)n=e,r=n.size;else if("undefined"!==typeof Uint8Array&&e instanceof Uint8Array){const t=e;r=t.byteLength,n=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}return{content:n,size:r}}static create(e,t,n){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){if(!e||!t||!n)throw new Ar("Please provide the Graph client instance, file object and OneDriveLargeFileUploadOptions value");const r=n.fileName,o=to.getFileInfo(t,r),i=new Zr(o.content,r,o.size);return this.createTaskWithFileObject(e,i,n)}))}static createTaskWithFileObject(e,t,n){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){if(!e||!t||!n)throw new Ar("Please provide the Graph client instance, FileObject interface implementation and OneDriveLargeFileUploadOptions value");const r=n.uploadSessionURL?n.uploadSessionURL:to.constructCreateSessionUrl(n.fileName,n.path),o={fileName:n.fileName,fileDescription:n.fileDescription,conflictBehavior:n.conflictBehavior},i=yield to.createUploadSession(e,r,o),a=eo(n.rangeSize);return new to(e,t,i,{rangeSize:a,uploadEventHandlers:n.uploadEventHandlers})}))}static createUploadSession(e,t,n){const r=Object.create(null,{createUploadSession:{get:()=>super.createUploadSession}});return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const o={item:{"@microsoft.graph.conflictBehavior":(null===n||void 0===n?void 0:n.conflictBehavior)||"rename",name:null===n||void 0===n?void 0:n.fileName,description:null===n||void 0===n?void 0:n.fileDescription}};return r.createUploadSession.call(this,e,t,o)}))}constructor(e,t,n,r){super(e,t,n,r)}commit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rename";return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const n={name:this.file.name,"@microsoft.graph.conflictBehavior":t,"@microsoft.graph.sourceUrl":this.uploadSession.url};return yield this.client.api(e).put(n)}))}}to.DEFAULT_UPLOAD_PATH="/";class no{constructor(e){this.provider=e}getAccessToken(){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{this.provider(((n,r)=>(0,Cr.__awaiter)(this,void 0,void 0,(function*(){if(r)e(r);else{if(!n){n=new Ar("Access token is undefined or empty.\t\t\t\t\t\tPlease provide a valid token.\t\t\t\t\t\tFor more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md")}const e=yield Ar.setGraphClientError(n);t(e)}}))))}))}))}}class ro extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>2?arguments[2]:void 0;super((arguments.length>1?arguments[1]:void 0)||t&&t.message),Object.setPrototypeOf(this,ro.prototype),this.statusCode=e,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=t?t.stack:this.stack}}class oo{static constructError(e,t,n){const r=new ro(t,"",e);return void 0!==e.name&&(r.code=e.name),r.body=e.toString(),r.date=new Date,r.headers=null===n||void 0===n?void 0:n.headers,r}static constructErrorFromResponse(e,t,n){const r=e.error,o=new ro(t,r.message);return o.code=r.code,void 0!==r.innerError&&(o.requestId=r.innerError["request-id"],o.date=new Date(r.innerError.date)),o.body=JSON.stringify(r),o.headers=null===n||void 0===n?void 0:n.headers,o}static getError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){let o;if(e&&e.error?o=oo.constructErrorFromResponse(e,t,r):e instanceof Error?o=oo.constructError(e,t,r):(o=new ro(t),o.body=e),"function"!==typeof n)return o;n(o,null)}))}}class io{constructor(e,t,n){this.parsePath=e=>{if(-1!==e.indexOf("https://")){const t=(e=e.replace("https://","")).indexOf("/");-1!==t&&(this.urlComponents.host="https://"+e.substring(0,t),e=e.substring(t+1,e.length));const n=e.indexOf("/");-1!==n&&(this.urlComponents.version=e.substring(0,n),e=e.substring(n+1,e.length))}"/"===e.charAt(0)&&(e=e.substr(1));const t=e.indexOf("?");if(-1===t)this.urlComponents.path=e;else{this.urlComponents.path=e.substr(0,t);const n=e.substring(t+1,e.length).split("&");for(const e of n)this.parseQueryParameter(e)}},this.httpClient=e,this.config=t,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(n)}addCsvQueryParameter(e,t,n){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";let r=[];n.length>1&&"string"===typeof t?r=Array.prototype.slice.call(n):"string"===typeof t?r.push(t):r=r.concat(t),this.urlComponents.oDataQueryParams[e]+=r.join(",")}buildFullUrl(){const e=(e=>{const t=e=>e.replace(/^\/+/,"");return Array.prototype.slice.call(e).reduce(((e,n)=>{return[(r=e,r.replace(/\/+$/,"")),t(n)].join("/");var r}))})([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(e),e}createQueryString(){const e=this.urlComponents,t=[];if(0!==Object.keys(e.oDataQueryParams).length)for(const n in e.oDataQueryParams)Object.prototype.hasOwnProperty.call(e.oDataQueryParams,n)&&t.push(n+"="+e.oDataQueryParams[n]);if(0!==Object.keys(e.otherURLQueryParams).length)for(const n in e.otherURLQueryParams)Object.prototype.hasOwnProperty.call(e.otherURLQueryParams,n)&&t.push(n+"="+e.otherURLQueryParams[n]);if(0!==e.otherURLQueryOptions.length)for(const n of e.otherURLQueryOptions)t.push(n);return t.length>0?"?"+t.join("&"):""}parseQueryParameter(e){if("string"===typeof e)if("?"===e.charAt(0)&&(e=e.substring(1)),-1!==e.indexOf("&")){const t=e.split("&");for(const e of t)this.parseQueryParamenterString(e)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.setURLComponentsQueryParamater(t,e[t]);return this}parseQueryParamenterString(e){if(this.isValidQueryKeyValuePair(e)){const t=e.indexOf("="),n=e.substring(0,t),r=e.substring(t+1);this.setURLComponentsQueryParamater(n,r)}else this.urlComponents.otherURLQueryOptions.push(e)}setURLComponentsQueryParamater(e,t){if(-1!==Tr.indexOf(e)){const n=this.urlComponents.oDataQueryParams[e],r=n&&("$expand"===e||"$select"===e||"$orderby"===e);this.urlComponents.oDataQueryParams[e]=r?n+","+t:t}else this.urlComponents.otherURLQueryParams[e]=t}isValidQueryKeyValuePair(e){const t=e.indexOf("=");if(-1===t)return!1;return!(-1!==e.indexOf("(")&&e.indexOf("(")<t)}updateRequestOptions(e){const t=Object.assign({},e.headers);if(void 0!==this.config.fetchOptions){const t=Object.assign({},this.config.fetchOptions);Object.assign(e,t),void 0!==typeof this.config.fetchOptions.headers&&(e.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),void 0!==e.headers&&Object.assign(t,e.headers),Object.assign(t,this._headers),e.headers=t}send(e,t,n){var r;return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){let o;const i=new Pr(this._middlewareOptions);this.updateRequestOptions(t);const a=null===(r=this.config)||void 0===r?void 0:r.customHosts;try{o=(yield this.httpClient.sendRequest({request:e,options:t,middlewareControl:i,customHosts:a})).response;return yield Yr.getResponse(o,this._responseType,n)}catch(s){if(s instanceof Ar)throw s;let e;o&&(e=o.status);throw yield oo.getError(s,e,n,o)}}))}setHeaderContentType(){if(!this._headers)return void this.header("Content-Type","application/json");const e=Object.keys(this._headers);for(const t of e)if("content-type"===t.toLowerCase())return;this.header("Content-Type","application/json")}header(e,t){return this._headers[e]=t,this}headers(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this._headers[t]=e[t]);return this}option(e,t){return this._options[e]=t,this}options(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this._options[t]=e[t]);return this}middlewareOptions(e){return this._middlewareOptions=e,this}version(e){return this.urlComponents.version=e,this}responseType(e){return this._responseType=e,this}select(e){return this.addCsvQueryParameter("$select",e,arguments),this}expand(e){return this.addCsvQueryParameter("$expand",e,arguments),this}orderby(e){return this.addCsvQueryParameter("$orderby",e,arguments),this}filter(e){return this.urlComponents.oDataQueryParams.$filter=e,this}search(e){return this.urlComponents.oDataQueryParams.$search=e,this}top(e){return this.urlComponents.oDataQueryParams.$top=e,this}skip(e){return this.urlComponents.oDataQueryParams.$skip=e,this}skipToken(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this}count(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.urlComponents.oDataQueryParams.$count=e.toString(),this}query(e){return this.parseQueryParameter(e)}get(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const t=this.buildFullUrl(),n={method:br.GET};return yield this.send(t,n,e)}))}post(e,t){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const n=this.buildFullUrl(),r={method:br.POST,body:Er(e)};return"FormData"===(e&&e.constructor&&e.constructor.name)?r.headers={}:(this.setHeaderContentType(),r.headers=this._headers),yield this.send(n,r,t)}))}create(e,t){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){return yield this.post(e,t)}))}put(e,t){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const n=this.buildFullUrl();this.setHeaderContentType();const r={method:br.PUT,body:Er(e)};return yield this.send(n,r,t)}))}patch(e,t){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const n=this.buildFullUrl();this.setHeaderContentType();const r={method:br.PATCH,body:Er(e)};return yield this.send(n,r,t)}))}update(e,t){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){return yield this.patch(e,t)}))}delete(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const t=this.buildFullUrl(),n={method:br.DELETE};return yield this.send(t,n,e)}))}del(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){return yield this.delete(e)}))}getStream(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const t=this.buildFullUrl(),n={method:br.GET};return this.responseType(Wr.STREAM),yield this.send(t,n,e)}))}putStream(e,t){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){const n=this.buildFullUrl(),r={method:br.PUT,headers:{"Content-Type":"application/octet-stream"},body:e};return yield this.send(n,r,t)}))}}class ao{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t||!t.length){const e=new Error;throw e.name="InvalidMiddlewareChain",e.message="Please provide a default middleware chain or custom middleware chain",e}this.setMiddleware(...t)}setMiddleware(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.length>1?this.parseMiddleWareArray(t):this.middleware=t[0]}parseMiddleWareArray(e){e.forEach(((t,n)=>{n<e.length-1&&t.setNext(e[n+1])})),this.middleware=e[0]}sendRequest(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){if("string"===typeof e.request&&void 0===e.options){const e=new Error;throw e.name="InvalidRequestOptions",e.message="Unable to execute the middleware, Please provide valid options for a request",e}return yield this.middleware.execute(e),e}))}}class so{execute(e){return(0,Cr.__awaiter)(this,void 0,void 0,(function*(){e.response=yield fetch(e.request,e.options)}))}}class co{static createWithAuthenticationProvider(e){const t=new Dr(e),n=new Fr(new qr),r=new zr,o=new so;if(t.setNext(n),"object"===typeof process){const e=new Br(new Hr);n.setNext(e),e.setNext(r)}else n.setNext(r);return r.setNext(o),co.createWithMiddleware(t)}static createWithMiddleware(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ao(...t)}}class lo{static init(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="authProvider"===n?new no(e[n]):e[n]);return lo.initWithMiddleware(t)}static initWithMiddleware(e){return new lo(e)}constructor(e){this.config={baseUrl:"https://graph.microsoft.com/",debugLogging:!1,defaultVersion:"v1.0"},(()=>{if("undefined"===typeof Promise&&"undefined"===typeof fetch){const e=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw e.name="PolyFillNotAvailable",e}if("undefined"===typeof Promise){const e=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}if("undefined"===typeof fetch){const e=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}})();for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.config[n]=e[n]);let t;if(void 0!==e.authProvider&&void 0!==e.middleware){const e=new Error;throw e.name="AmbiguityInInitialization",e.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",e}if(void 0!==e.authProvider)t=co.createWithAuthenticationProvider(e.authProvider);else{if(void 0===e.middleware){const e=new Error;throw e.name="InvalidMiddlewareChain",e.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",e}t=new ao(...[].concat(e.middleware))}this.httpClient=t}api(e){return new io(this.httpClient,this.config,e)}}var uo=n(13);const ho="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_ID:"d1cc9e16-9194-4892-92c5-473c9f65dcb3"}&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_ID:"d1cc9e16-9194-4892-92c5-473c9f65dcb3"}.DEBUG||void 0;let po,fo=[],go=[];const mo=[];ho&&yo(ho);const vo=Object.assign((e=>bo(e)),{enable:yo,enabled:wo,disable:function(){const e=po||"";return yo(""),e},log:function(){if(arguments.length>0){const e=String(arguments.length<=0?void 0:arguments[0]);e.includes(":error")?console.error(...arguments):e.includes(":warning")?console.warn(...arguments):e.includes(":info")?console.info(...arguments):(e.includes(":verbose"),console.debug(...arguments))}}});function yo(e){po=e,fo=[],go=[];const t=/\*/g,n=e.split(",").map((e=>e.trim().replace(t,".*?")));for(const r of n)r.startsWith("-")?go.push(new RegExp("^".concat(r.substr(1),"$"))):fo.push(new RegExp("^".concat(r,"$")));for(const r of mo)r.enabled=wo(r.namespace)}function wo(e){if(e.endsWith("*"))return!0;for(const t of go)if(t.test(e))return!1;for(const t of fo)if(t.test(e))return!0;return!1}function bo(e){const t=Object.assign((function(){if(!t.enabled)return;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];r.length>0&&(r[0]="".concat(e," ").concat(r[0]));t.log(...r)}),{enabled:wo(e),destroy:Co,log:vo.log,namespace:e,extend:ko});return mo.push(t),t}function Co(){const e=mo.indexOf(this);return e>=0&&(mo.splice(e,1),!0)}function ko(e){const t=bo("".concat(this.namespace,":").concat(e));return t.log=this.log,t}const So=vo,Ao=["verbose","info","warning","error"],To={verbose:400,info:300,warning:200,error:100};function Eo(e,t){t.log=function(){e.log(...arguments)}}function Io(e){return Ao.includes(e)}function _o(e){const t=new Set,n="undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_ID:"d1cc9e16-9194-4892-92c5-473c9f65dcb3"}&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_ID:"d1cc9e16-9194-4892-92c5-473c9f65dcb3"}[e.logLevelEnvVarName]||void 0;let r;const o=So(e.namespace);function i(e){return Boolean(r&&To[e.level]<=To[r])}function a(e,n){const r=Object.assign(e.extend(n),{level:n});if(Eo(e,r),i(r)){const e=So.disable();So.enable(e+","+r.namespace)}return t.add(r),r}return o.log=function(){So.log(...arguments)},n&&(Io(n)?function(e){xo.setLogLevel(e)}(n):console.error("".concat(e.logLevelEnvVarName," set to unknown log level '").concat(n,"'; logging is not enabled. Acceptable values: ").concat(Ao.join(", "),"."))),{setLogLevel(e){if(e&&!Io(e))throw new Error("Unknown log level '".concat(e,"'. Acceptable values: ").concat(Ao.join(",")));r=e;const n=[];for(const r of t)i(r)&&n.push(r.namespace);So.enable(n.join(","))},getLogLevel:()=>r,createClientLogger(e){const t=o.extend(e);return Eo(o,t),{error:a(t,"error"),warning:a(t,"warning"),info:a(t,"info"),verbose:a(t,"verbose")}},logger:o}}const xo=_o({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});xo.logger;const Ro=_o({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});Ro.logger;const Po=(No="identity",Ro.createClientLogger(No));var No;function Oo(e,t){let n="ERROR.";return(null===e||void 0===e?void 0:e.length)&&(n+=" Scopes: ".concat(Array.isArray(e)?e.join(", "):e,".")),"".concat(n," Error message: ").concat("string"===typeof t?t:t.message,".")}function Mo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Po;const r=t?"".concat(t.fullTitle," ").concat(e):e;return{title:e,fullTitle:r,info:function(e){n.info("".concat(r," =>"),e)},warning:function(e){n.warning("".concat(r," =>"),e)},verbose:function(e){n.verbose("".concat(r," =>"),e)}}}const Lo="04b07795-8ddb-461a-bbee-02f9e1bf7b46",jo="common";var Uo;!function(e){e.AzureChina="https://login.chinacloudapi.cn",e.AzureGermany="https://login.microsoftonline.de",e.AzureGovernment="https://login.microsoftonline.us",e.AzurePublicCloud="https://login.microsoftonline.com"}(Uo||(Uo={}));const Do=Uo.AzurePublicCloud,qo=["*"];function Fo(e,t,n){return t?(function(e,t){if(!t.match(/^[0-9a-zA-Z-.]+$/)){const t=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://learn.microsoft.com/partner-center/find-ids-and-domain-names.");throw e.info(Oo("",t)),t}}(e,t),t):(n||(n=Lo),n!==Lo?"common":"organizations")}function Ho(e){return e&&0!==e.length?e.includes("*")?qo:e:[]}function Bo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];var r;let o;if(o="adfs"===e?e:null!==(r=null===t||void 0===t?void 0:t.tenantId)&&void 0!==r?r:e,e&&o!==e&&!n.includes("*")&&!n.some((e=>0===e.localeCompare(o))))throw new Error(function(e){return"The current credential is not configured to acquire tokens for tenant ".concat(e,'. To enable acquiring tokens for this tenant add it to the AdditionallyAllowedTenants on the credential options, or add "*" to AdditionallyAllowedTenants to allow acquiring tokens for any tenant.')}(e));return o}const zo={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ko=400,Wo=499,Vo=500,Qo=599,Go=[zo.OPENID_SCOPE,zo.PROFILE_SCOPE,zo.OFFLINE_ACCESS_SCOPE],Yo=[...Go,zo.EMAIL_SCOPE],Jo="Content-Type",$o="Content-Length",Xo="Retry-After",Zo="X-AnchorMailbox",ei="x-ms-request-id",ti="x-ms-httpver",ni="idtoken",ri="client.info",oi="adal.idtoken",ii="error",ai="error.description",si="active-account",ci="active-account-filters",li="common",ui="organizations",di="consumers",hi="access_token",pi="xms_cc",fi={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},gi={PLAIN:"plain",S256:"S256"},mi={QUERY:"query",FRAGMENT:"fragment"},vi=(0,Ee.A)((0,Ee.A)({},mi),{},{FORM_POST:"form_post"}),yi="authorization_code",wi="refresh_token",bi="MSSTS",Ci="ADFS",ki="Generic",Si="-",Ai=".",Ti={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Ei="appmetadata",Ii="1",_i="authority-metadata",xi=86400,Ri="config",Pi="cache",Ni="network",Oi="hardcoded_values",Mi={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Li={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},ji=60,Ui=3600,Di="throttling",qi="retry-after, h429",Fi="invalid_grant",Hi="client_mismatch",Bi="username",zi="password",Ki=200,Wi=400,Vi="1",Qi="3",Gi="4",Yi="2",Ji="4",$i="5",Xi="0",Zi="1",ea="2",ta="3",na="4",ra="pop";var oa;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(oa||(oa={}));class ia{constructor(e,t,n){this.level=oa.Info;const r=e||ia.createDefaultLoggerOptions();this.localCallback=r.loggerCallback||(()=>{}),this.piiLoggingEnabled=r.piiLoggingEnabled||!1,this.level="number"===typeof r.logLevel?r.logLevel:oa.Info,this.correlationId=r.correlationId||zo.EMPTY_STRING,this.packageName=t||zo.EMPTY_STRING,this.packageVersion=n||zo.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:oa.Info}}clone(e,t,n){return new ia({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const n=(new Date).toUTCString(),r="[".concat(n,"] : [").concat(t.correlationId||this.correlationId||"","]"),o="".concat(r," : ").concat(this.packageName,"@").concat(this.packageVersion," : ").concat(oa[t.logLevel]," - ").concat(e);this.executeCallback(t.logLevel,o,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:oa.Error,containsPii:!1,correlationId:t||zo.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:oa.Error,containsPii:!0,correlationId:t||zo.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:oa.Warning,containsPii:!1,correlationId:t||zo.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:oa.Warning,containsPii:!0,correlationId:t||zo.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:oa.Info,containsPii:!1,correlationId:t||zo.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:oa.Info,containsPii:!0,correlationId:t||zo.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:oa.Verbose,containsPii:!1,correlationId:t||zo.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:oa.Verbose,containsPii:!0,correlationId:t||zo.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:oa.Trace,containsPii:!1,correlationId:t||zo.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:oa.Trace,containsPii:!0,correlationId:t||zo.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const aa="AAD",sa="OIDC",ca="none",la="unexpected_error",ua="post_request_failed",da={[la]:"Unexpected error in authentication.",[ua]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class ha extends Error{constructor(e,t,n){super(t?"".concat(e,": ").concat(t):e),Object.setPrototypeOf(this,ha.prototype),this.errorCode=e||zo.EMPTY_STRING,this.errorMessage=t||zo.EMPTY_STRING,this.subError=n||zo.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function pa(e,t){return new ha(e,t?"".concat(da[e]," ").concat(t):da[e])}const fa="client_info_decoding_error",ga="client_info_empty_error",ma="token_parsing_error",va="null_or_empty_token",ya="endpoints_resolution_error",wa="network_error",ba="openid_config_error",Ca="hash_not_deserialized",ka="invalid_state",Sa="state_mismatch",Aa="state_not_found",Ta="nonce_mismatch",Ea="auth_time_not_found",Ia="max_age_transpired",_a="multiple_matching_tokens",xa="multiple_matching_accounts",Ra="multiple_matching_appMetadata",Pa="request_cannot_be_made",Na="cannot_remove_empty_scope",Oa="cannot_append_scopeset",Ma="empty_input_scopeset",La="device_code_polling_cancelled",ja="device_code_expired",Ua="device_code_unknown_error",Da="no_account_in_silent_request",qa="invalid_cache_record",Fa="invalid_cache_environment",Ha="no_account_found",Ba="no_crypto_object",za="unexpected_credential_type",Ka="invalid_assertion",Wa="invalid_client_credential",Va="token_refresh_required",Qa="user_timeout_reached",Ga="token_claims_cnf_required_for_signedjwt",Ya="authorization_code_missing_from_server_response",Ja="binding_key_not_removed",$a="end_session_endpoint_not_supported",Xa="key_id_missing",Za="no_network_connectivity",es="user_canceled",ts="missing_tenant_id_error",ns="method_not_implemented",rs="nested_app_auth_bridge_disabled",os={[fa]:"The client info could not be parsed/decoded correctly",[ga]:"The client info was empty",[ma]:"Token cannot be parsed",[va]:"The token is null or empty",[ya]:"Endpoints cannot be resolved",[wa]:"Network request failed",[ba]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Ca]:"The hash parameters could not be deserialized",[ka]:"State was not the expected format",[Sa]:"State mismatch error",[Aa]:"State not found",[Ta]:"Nonce mismatch error",[Ea]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Ia]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[_a]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[xa]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Ra]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Pa]:"Token request cannot be made without authorization code or refresh token.",[Na]:"Cannot remove null or empty scope from ScopeSet",[Oa]:"Cannot append ScopeSet",[Ma]:"Empty input ScopeSet cannot be processed",[La]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[ja]:"Device code is expired.",[Ua]:"Device code stopped polling for unknown reasons.",[Da]:"Please pass an account object, silent flow is not supported without account information",[qa]:"Cache record object was null or undefined.",[Fa]:"Invalid environment when attempting to create cache entry",[Ha]:"No account found in cache for given key.",[Ba]:"No crypto object detected.",[za]:"Unexpected credential type.",[Ka]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Wa]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Va]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Qa]:"User defined timeout for device code polling reached",[Ga]:"Cannot generate a POP jwt if the token_claims are not populated",[Ya]:"Server response does not contain an authorization code to proceed",[Ja]:"Could not remove the credential's binding key from storage.",[$a]:"The provided authority does not support logout",[Xa]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Za]:"No network connectivity. Check your internet connection.",[es]:"User cancelled the flow.",[ts]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[ns]:"This method has not been implemented",[rs]:"The nested app auth bridge is disabled"};class is extends ha{constructor(e,t){super(e,t?"".concat(os[e],": ").concat(t):os[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,is.prototype)}}function as(e,t){return new is(e,t)}const ss={createNewGuid:()=>{throw as(ns)},base64Decode:()=>{throw as(ns)},base64Encode:()=>{throw as(ns)},base64UrlEncode:()=>{throw as(ns)},encodeKid:()=>{throw as(ns)},async getPublicKeyThumbprint(){throw as(ns)},async removeTokenBindingKey(){throw as(ns)},async clearKeystore(){throw as(ns)},async signJwt(){throw as(ns)},async hashString(){throw as(ns)}},cs="@azure/msal-common",ls="14.16.0";function us(e,t){const n=function(e){if(!e)throw as(va);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw as(ma);return t[2]}(e);try{const e=t(n);return JSON.parse(e)}catch(r){throw as(ma)}}function ds(e,t){if(0===t||Date.now()-3e5>e+t)throw as(Ia)}function hs(){return Math.round((new Date).getTime()/1e3)}function ps(e,t){const n=Number(e)||0;return hs()+t>n}function fs(e){return[ks(e),Ss(e),As(e),Ts(e),Es(e)].join(Si).toLowerCase()}function gs(e,t,n,r,o){return{credentialType:Ti.ID_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n,realm:o}}function ms(e,t,n,r,o,i,a,s,c,l,u,d,h,p,f){var g,m;const v={homeAccountId:e,credentialType:Ti.ACCESS_TOKEN,secret:n,cachedAt:hs().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:r,realm:o,target:i,tokenType:u||Li.BEARER};if(d&&(v.userAssertionHash=d),l&&(v.refreshOn=l.toString()),p&&(v.requestedClaims=p,v.requestedClaimsHash=f),(null===(g=v.tokenType)||void 0===g?void 0:g.toLowerCase())!==Li.BEARER.toLowerCase())switch(v.credentialType=Ti.ACCESS_TOKEN_WITH_AUTH_SCHEME,v.tokenType){case Li.POP:const e=us(n,c);if(null===e||void 0===e||null===(m=e.cnf)||void 0===m||!m.kid)throw as(Ga);v.keyId=e.cnf.kid;break;case Li.SSH:v.keyId=h}return v}function vs(e,t,n,r,o,i,a){const s={credentialType:Ti.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n};return i&&(s.userAssertionHash=i),o&&(s.familyId=o),a&&(s.expiresOn=a.toString()),s}function ys(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function ws(e){return!!e&&(ys(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===Ti.ACCESS_TOKEN||e.credentialType===Ti.ACCESS_TOKEN_WITH_AUTH_SCHEME))}function bs(e){return!!e&&(ys(e)&&e.hasOwnProperty("realm")&&e.credentialType===Ti.ID_TOKEN)}function Cs(e){return!!e&&(ys(e)&&e.credentialType===Ti.REFRESH_TOKEN)}function ks(e){return[e.homeAccountId,e.environment].join(Si).toLowerCase()}function Ss(e){const t=e.credentialType===Ti.REFRESH_TOKEN&&e.familyId||e.clientId;return[e.credentialType,t,e.realm||""].join(Si).toLowerCase()}function As(e){return(e.target||"").toLowerCase()}function Ts(e){return(e.requestedClaimsHash||"").toLowerCase()}function Es(e){return e.tokenType&&e.tokenType.toLowerCase()!==Li.BEARER.toLowerCase()?e.tokenType.toLowerCase():""}function Is(){return hs()+xi}function _s(e,t,n){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=n,e.jwks_uri=t.jwks_uri}function xs(e,t,n){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=n}function Rs(e){return e.expiresAt<=hs()}const Ps="redirect_uri_empty",Ns="claims_request_parsing_error",Os="authority_uri_insecure",Ms="url_parse_error",Ls="empty_url_error",js="empty_input_scopes_error",Us="invalid_prompt_value",Ds="invalid_claims",qs="token_request_empty",Fs="logout_request_empty",Hs="invalid_code_challenge_method",Bs="pkce_params_missing",zs="invalid_cloud_discovery_metadata",Ks="invalid_authority_metadata",Ws="untrusted_authority",Vs="missing_ssh_jwk",Qs="missing_ssh_kid",Gs="missing_nonce_authentication_header",Ys="invalid_authentication_header",Js="cannot_set_OIDCOptions",$s="cannot_allow_native_broker",Xs="authority_mismatch",Zs={[Ps]:"A redirect URI is required for all calls, and none has been set.",[Ns]:"Could not parse the given claims request object.",[Os]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Ms]:"URL could not be parsed into appropriate segments.",[Ls]:"URL was empty or null.",[js]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Us]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[Ds]:"Given claims parameter must be a stringified JSON object.",[qs]:"Token request was empty and not found in cache.",[Fs]:"The logout request was null or undefined.",[Hs]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Bs]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[zs]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Ks]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Ws]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Vs]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Qs]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Gs]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Ys]:"Invalid authentication header provided",[Js]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[$s]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Xs]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class ec extends ha{constructor(e){super(e,Zs[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,ec.prototype)}}function tc(e){return new ec(e)}class nc{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(Yg){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},n=e.split("&"),r=e=>decodeURIComponent(e.replace(/\+/g," "));return n.forEach((e=>{if(e.trim()){const[n,o]=e.split(/=(.+)/g,2);n&&o&&(t[r(n)]=r(o))}})),t}static trimArrayEntries(e){return e.map((e=>e.trim()))}static removeEmptyStringsFromArray(e){return e.filter((e=>!!e))}static jsonParseHelper(e){try{return JSON.parse(e)}catch(Yg){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class rc{constructor(e){const t=e?nc.trimArrayEntries([...e]):[],n=t?nc.removeEmptyStringsFromArray(t):[];this.validateInputScopes(n),this.scopes=new Set,n.forEach((e=>this.scopes.add(e)))}static fromString(e){const t=(e||zo.EMPTY_STRING).split(" ");return new rc(t)}static createSearchScopes(e){const t=new rc(e);return t.containsOnlyOIDCScopes()?t.removeScope(zo.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw tc(js)}containsScope(e){const t=this.printScopesLowerCase().split(" "),n=new rc(t);return!!e&&n.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&(this.scopes.size>=e.scopes.size&&e.asArray().every((e=>this.containsScope(e))))}containsOnlyOIDCScopes(){let e=0;return Yo.forEach((t=>{this.containsScope(t)&&(e+=1)})),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach((e=>this.appendScope(e)))}catch(Yg){throw as(Oa)}}removeScope(e){if(!e)throw as(Na);this.scopes.delete(e.trim())}removeOIDCScopes(){Yo.forEach((e=>{this.scopes.delete(e)}))}unionScopeSets(e){if(!e)throw as(Ma);const t=new Set;return e.scopes.forEach((e=>t.add(e.toLowerCase()))),this.scopes.forEach((e=>t.add(e.toLowerCase()))),t}intersectingScopeSets(e){if(!e)throw as(Ma);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach((t=>e.push(t))),e}printScopes(){if(this.scopes){return this.asArray().join(" ")}return zo.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function oc(e,t){if(!e)throw as(ga);try{const n=t(e);return JSON.parse(n)}catch(Yg){throw as(fa)}}function ic(e){if(!e)throw as(fa);const t=e.split(Ai,2);return{uid:t[0],utid:t.length<2?zo.EMPTY_STRING:t[1]}}function ac(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const sc=["isHomeTenant"],cc=["isHomeTenant"];function lc(e,t){return!!e&&!!t&&e===t.split(".")[1]}function uc(e,t,n,r){if(r){const{oid:t,sub:n,tid:o,name:i,tfp:a,acr:s}=r,c=o||a||s||"";return{tenantId:c,localAccountId:t||n||"",name:i,isHomeTenant:lc(c,e)}}return{tenantId:n,localAccountId:t,isHomeTenant:lc(n,e)}}function dc(e,t,n,r){let o=e;if(t){const{isHomeTenant:n}=t,r=ac(t,sc);o=(0,Ee.A)((0,Ee.A)({},e),r)}if(n){const t=uc(e.homeAccountId,e.localAccountId,e.tenantId,n),{isHomeTenant:i}=t,a=ac(t,cc);return o=(0,Ee.A)((0,Ee.A)((0,Ee.A)({},o),a),{},{idTokenClaims:n,idToken:r}),o}return o}const hc=0,pc=1,fc=2,gc=3;function mc(e){if(e){return e.tid||e.tfp||e.acr||null}return null}class vc{generateAccountId(){return[this.homeAccountId,this.environment].join(Si).toLowerCase()}generateAccountKey(){return vc.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map((e=>[e.tenantId,e])))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(Si).toLowerCase()}static createAccount(e,t,n){var r,o,i,a,s,c,l,u;const d=new vc;let h;t.authorityType===pc?d.authorityType=Ci:t.protocolMode===aa?d.authorityType=bi:d.authorityType=ki,e.clientInfo&&n&&(h=oc(e.clientInfo,n)),d.clientInfo=e.clientInfo,d.homeAccountId=e.homeAccountId,d.nativeAccountId=e.nativeAccountId;const p=e.environment||t&&t.getPreferredCache();if(!p)throw as(Fa);d.environment=p,d.realm=(null===(r=h)||void 0===r?void 0:r.utid)||mc(e.idTokenClaims)||"",d.localAccountId=(null===(o=h)||void 0===o?void 0:o.uid)||(null===(i=e.idTokenClaims)||void 0===i?void 0:i.oid)||(null===(a=e.idTokenClaims)||void 0===a?void 0:a.sub)||"";const f=(null===(s=e.idTokenClaims)||void 0===s?void 0:s.preferred_username)||(null===(c=e.idTokenClaims)||void 0===c?void 0:c.upn),g=null!==(l=e.idTokenClaims)&&void 0!==l&&l.emails?e.idTokenClaims.emails[0]:null;if(d.username=f||g||"",d.name=(null===(u=e.idTokenClaims)||void 0===u?void 0:u.name)||"",d.cloudGraphHostName=e.cloudGraphHostName,d.msGraphHost=e.msGraphHost,e.tenantProfiles)d.tenantProfiles=e.tenantProfiles;else{const t=uc(e.homeAccountId,d.localAccountId,d.realm,e.idTokenClaims);d.tenantProfiles=[t]}return d}static createFromAccountInfo(e,t,n){var r;const o=new vc;return o.authorityType=e.authorityType||ki,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=n,o.tenantProfiles=Array.from((null===(r=e.tenantProfiles)||void 0===r?void 0:r.values())||[]),o}static generateHomeAccountId(e,t,n,r,o){if(t!==pc&&t!==fc){if(e)try{const t=oc(e,r.base64Decode);if(t.uid&&t.utid)return"".concat(t.uid,".").concat(t.utid)}catch(Yg){}n.warning("No client info in response")}return(null===o||void 0===o?void 0:o.sub)||""}static isAccountEntity(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"))}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let r=!0;if(n){const n=e.idTokenClaims||{},o=t.idTokenClaims||{};r=n.iat===o.iat&&n.nonce===o.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}}function yc(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function wc(e){if(!e||e.indexOf("=")<0)return null;try{const t=yc(e),n=Object.fromEntries(new URLSearchParams(t));if(n.code||n.error||n.error_description||n.state)return n}catch(Yg){throw as(Ca)}return null}class bc{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw tc(Ls);e.includes("#")||(this._urlString=bc.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return nc.endsWith(t,"?")?t=t.slice(0,-1):nc.endsWith(t,"?/")&&(t=t.slice(0,-2)),nc.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(Yg){throw tc(Ms)}if(!e.HostNameAndPort||!e.PathSegments)throw tc(Ms);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw tc(Os)}static appendQueryString(e,t){return t?e.indexOf("?")<0?"".concat(e,"?").concat(t):"".concat(e,"&").concat(t):e}static removeHashFromUrl(e){return bc.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),n=t.PathSegments;return!e||0===n.length||n[0]!==li&&n[0]!==ui||(n[0]=e),bc.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw tc(Ms);const n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let r=n.AbsolutePath.split("/");return r=r.filter((e=>e&&e.length>0)),n.PathSegments=r,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw tc(Ms);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===zo.FORWARD_SLASH){const n=new bc(t).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new bc(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!wc(e)}}const Cc={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},kc={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},Sc=new Set;function Ac(e,t,n,r){if(null===r||void 0===r||r.trace("getAliasesFromMetadata called with source: ".concat(n)),e&&t){const o=Tc(t,e);if(o)return null===r||void 0===r||r.trace("getAliasesFromMetadata: found cloud discovery metadata in ".concat(n,", returning aliases")),o.aliases;null===r||void 0===r||r.trace("getAliasesFromMetadata: did not find cloud discovery metadata in ".concat(n))}return null}function Tc(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.aliases.includes(t))return r}return null}kc.metadata.forEach((e=>{e.aliases.forEach((e=>{Sc.add(e)}))}));const Ec="cache_quota_exceeded",Ic="cache_error_unknown",_c={[Ec]:"Exceeded cache storage capacity.",[Ic]:"Unexpected error occurred when using cache storage."};class xc extends Error{constructor(e,t){const n=t||(_c[e]?_c[e]:_c[Ic]);super("".concat(e,": ").concat(n)),Object.setPrototypeOf(this,xc.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}class Rc{constructor(e,t,n,r){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(cs,ls),this.staticAuthorityOptions=r}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);if(t.length>1){return t.sort((e=>e.idTokenClaims?-1:1))[0]}return 1===t.length?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap((e=>this.getTenantProfilesFromAccountEntity(e,null===t||void 0===t?void 0:t.tenantId,t)))}getTenantedAccountInfoByFilter(e,t,n,r){let o,i=null;if(r&&!this.tenantProfileMatchesFilter(n,r))return null;const a=this.getIdToken(e,t,n.tenantId);return a&&(o=us(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,r))?null:(i=dc(e,n,o,null===a||void 0===a?void 0:a.secret),i)}getTenantProfilesFromAccountEntity(e,t,n){const r=e.getAccountInfo();let o=r.tenantProfiles||new Map;const i=this.getTokenKeys();if(t){const e=o.get(t);if(!e)return[];o=new Map([[t,e]])}const a=[];return o.forEach((e=>{const t=this.getTenantedAccountInfoByFilter(r,i,e,n);t&&a.push(t)})),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&((!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant))}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,n){if(!e)throw as(qa);try{e.account&&this.setAccount(e.account),e.idToken&&!1!==(null===t||void 0===t?void 0:t.idToken)&&this.setIdTokenCredential(e.idToken),e.accessToken&&!1!==(null===t||void 0===t?void 0:t.accessToken)&&await this.saveAccessToken(e.accessToken),e.refreshToken&&!1!==(null===t||void 0===t?void 0:t.refreshToken)&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(Yg){var r,o;if(null===(r=this.commonLogger)||void 0===r||r.error("CacheManager.saveCacheRecord: failed"),Yg instanceof Error){var i,a;if(null===(i=this.commonLogger)||void 0===i||i.errorPii("CacheManager.saveCacheRecord: ".concat(Yg.message),n),"QuotaExceededError"===Yg.name||"NS_ERROR_DOM_QUOTA_REACHED"===Yg.name||Yg.message.includes("exceeded the quota"))throw null===(a=this.commonLogger)||void 0===a||a.error("CacheManager.saveCacheRecord: exceeded storage quota",n),new xc(Ec);throw new xc(Yg.name,Yg.message)}throw null===(o=this.commonLogger)||void 0===o||o.errorPii("CacheManager.saveCacheRecord: ".concat(Yg),n),new xc(Ic)}}async saveAccessToken(e){const t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},n=this.getTokenKeys(),r=rc.fromString(e.target),o=[];n.accessToken.forEach((e=>{if(!this.accessTokenKeyMatchesFilter(e,t,!1))return;const n=this.getAccessTokenCredential(e);if(n&&this.credentialMatchesFilter(n,t)){rc.fromString(n.target).intersectingScopeSets(r)&&o.push(this.removeAccessToken(e))}})),await Promise.all(o),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),n=[];return t.forEach((t=>{var r;if(!this.isAccountKey(t,e.homeAccountId))return;const o=this.getAccount(t,this.commonLogger);if(!o)return;if(e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId))return;if(e.username&&!this.matchUsername(o.username,e.username))return;if(e.environment&&!this.matchEnvironment(o,e.environment))return;if(e.realm&&!this.matchRealm(o,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;const i={localAccountId:null===e||void 0===e?void 0:e.localAccountId,name:null===e||void 0===e?void 0:e.name},a=null===(r=o.tenantProfiles)||void 0===r?void 0:r.filter((e=>this.tenantProfileMatchesFilter(e,i)));a&&0===a.length||n.push(o)})),n}isAccountKey(e,t,n){return!(e.split(Si).length<3)&&(!(t&&!e.toLowerCase().includes(t.toLowerCase()))&&!(n&&!e.toLowerCase().includes(n.toLowerCase())))}isCredentialKey(e){if(e.split(Si).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(Ti.ID_TOKEN.toLowerCase())&&-1===t.indexOf(Ti.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(Ti.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(Ti.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(Ti.REFRESH_TOKEN.toLowerCase())>-1){const e="".concat(Ti.REFRESH_TOKEN).concat(Si).concat(this.clientId).concat(Si),n="".concat(Ti.REFRESH_TOKEN).concat(Si).concat(Ii).concat(Si);if(-1===t.indexOf(e.toLowerCase())&&-1===t.indexOf(n.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"===typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===Ti.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===Li.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),n={};return t.forEach((t=>{if(!this.isAppMetadata(t))return;const r=this.getAppMetadata(t);r&&(e.environment&&!this.matchEnvironment(r,e.environment)||e.clientId&&!this.matchClientId(r,e.clientId)||(n[t]=r))})),n}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let n=null;return t.forEach((t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const r=this.getAuthorityMetadata(t);r&&-1!==r.aliases.indexOf(e)&&(n=r)})),n}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach((e=>{t.push(this.removeAccount(e))})),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),n=e.generateAccountId(),r=[];t.idToken.forEach((e=>{0===e.indexOf(n)&&this.removeIdToken(e)})),t.accessToken.forEach((e=>{0===e.indexOf(n)&&r.push(this.removeAccessToken(e))})),t.refreshToken.forEach((e=>{0===e.indexOf(n)&&this.removeRefreshToken(e)})),await Promise.all(r)}updateOutdatedCachedAccount(e,t,n){if(t&&t.isSingleTenant()){var r;null===(r=this.commonLogger)||void 0===r||r.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const o=this.getAccountKeys().filter((e=>e.startsWith(t.homeAccountId))),i=[];o.forEach((e=>{const t=this.getCachedAccountEntity(e);t&&i.push(t)}));const a=i.find((e=>lc(e.realm,e.homeAccountId)))||i[0];a.tenantProfiles=i.map((e=>({tenantId:e.realm,localAccountId:e.localAccountId,name:e.name,isHomeTenant:lc(e.realm,e.homeAccountId)})));const s=Rc.toObject(new vc,(0,Ee.A)({},a)),c=s.generateAccountKey();return o.forEach((t=>{t!==c&&this.removeOutdatedAccount(e)})),this.setAccount(s),null===n||void 0===n||n.verbose("Updated an outdated account entity in the cache"),s}return t}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===Ti.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===Li.POP){const e=t.keyId;if(e)try{await this.cryptoImpl.removeTokenBindingKey(e)}catch(n){throw as(Ja)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach((e=>{this.isAppMetadata(e)&&this.removeItem(e)})),!0}readAccountFromCache(e){const t=vc.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getIdToken called");const i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ti.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(i,t),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let t=a;if(!n){const n=new Map;a.forEach(((t,r)=>{t.realm===e.tenantId&&n.set(r,t)}));const r=n.size;if(r<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===r)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),n.values().next().value;t=n}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),t.forEach(((e,t)=>{this.removeIdToken(t)})),r&&o&&r.addFields({multiMatchedID:a.size},o),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){const n=t&&t.idToken||this.getTokenKeys().idToken,r=new Map;return n.forEach((t=>{if(!this.idTokenKeyMatchesFilter(t,(0,Ee.A)({clientId:this.clientId},e)))return;const n=this.getIdTokenCredential(t);n&&this.credentialMatchesFilter(n,e)&&r.set(t,n)})),r}idTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.clientId||-1!==n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,n,r,o,i){this.commonLogger.trace("CacheManager - getAccessToken called");const a=rc.createSearchScopes(t.scopes),s=t.authenticationScheme||Li.BEARER,c=s&&s.toLowerCase()!==Li.BEARER.toLowerCase()?Ti.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ti.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:r||e.tenantId,target:a,tokenType:s,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=n&&n.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach((e=>{if(this.accessTokenKeyMatchesFilter(e,l,!0)){const t=this.getAccessTokenCredential(e);t&&this.credentialMatchesFilter(t,l)&&d.push(t)}}));const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach((e=>{this.removeAccessToken(fs(e))})),o&&i&&o.addFields({multiMatchedAT:d.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,t,n){const r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===r.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(n&&!r.includes(e[t].toLowerCase()))return!1;if(!n&&r.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),n=[];return t.accessToken.forEach((t=>{if(!this.accessTokenKeyMatchesFilter(t,e,!0))return;const r=this.getAccessTokenCredential(t);r&&this.credentialMatchesFilter(r,e)&&n.push(r)})),n}getRefreshToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getRefreshToken called");const i=t?Ii:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ti.REFRESH_TOKEN,clientId:this.clientId,familyId:i},s=n&&n.refreshToken||this.getTokenKeys().refreshToken,c=[];s.forEach((e=>{if(this.refreshTokenKeyMatchesFilter(e,a)){const t=this.getRefreshTokenCredential(e);t&&this.credentialMatchesFilter(t,a)&&c.push(t)}}));const l=c.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&r&&o&&r.addFields({multiMatchedRT:l},o),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.familyId||-1!==n.indexOf(t.familyId.toLowerCase()))&&(!(!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase())))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map((e=>n[e])),o=r.length;if(o<1)return null;if(o>1)throw as(Ra);return r[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==Ii)}matchHomeAccountId(e,t){return!("string"!==typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var n;return!(t.toLowerCase()!==(null===(n=e.name)||void 0===n?void 0:n.toLowerCase()))}matchUsername(e,t){return!(!e||"string"!==typeof e||(null===t||void 0===t?void 0:t.toLowerCase())!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const n=function(e,t){let n;const r=e.canonicalAuthority;if(r){var o;const i=new bc(r).getUrlComponents().HostNameAndPort;n=Ac(i,null===(o=e.cloudDiscoveryMetadata)||void 0===o?void 0:o.metadata,Ri,t)||Ac(i,kc.metadata,Oi,t)||e.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(n.includes(t)&&n.includes(e.environment))return!0}const n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){var n;return!((null===(n=e.realm)||void 0===n?void 0:n.toLowerCase())!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||(e.preferred_username===t||e.upn===t)}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){if(e.credentialType!==Ti.ACCESS_TOKEN&&e.credentialType!==Ti.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)return!1;return rc.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(Ei)}isAuthorityMetadata(e){return-1!==e.indexOf(_i)}generateAuthorityMetadataCacheKey(e){return"".concat(_i,"-").concat(this.clientId,"-").concat(e)}static toObject(e,t){for(const n in t)e[n]=t[n];return e}}class Pc extends Rc{setAccount(){throw as(ns)}getAccount(){throw as(ns)}getCachedAccountEntity(){throw as(ns)}setIdTokenCredential(){throw as(ns)}getIdTokenCredential(){throw as(ns)}setAccessTokenCredential(){throw as(ns)}getAccessTokenCredential(){throw as(ns)}setRefreshTokenCredential(){throw as(ns)}getRefreshTokenCredential(){throw as(ns)}setAppMetadata(){throw as(ns)}getAppMetadata(){throw as(ns)}setServerTelemetry(){throw as(ns)}getServerTelemetry(){throw as(ns)}setAuthorityMetadata(){throw as(ns)}getAuthorityMetadata(){throw as(ns)}getAuthorityMetadataKeys(){throw as(ns)}setThrottlingCache(){throw as(ns)}getThrottlingCache(){throw as(ns)}removeItem(){throw as(ns)}getKeys(){throw as(ns)}getAccountKeys(){throw as(ns)}getTokenKeys(){throw as(ns)}updateCredentialCacheKey(){throw as(ns)}removeOutdatedAccount(){throw as(ns)}}const Nc={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},Oc={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:oa.Info,correlationId:zo.EMPTY_STRING},Mc={claimsBasedCachingEnabled:!1},Lc={async sendGetRequestAsync(){throw as(ns)},async sendPostRequestAsync(){throw as(ns)}},jc={sku:zo.SKU,version:ls,cpu:zo.EMPTY_STRING,os:zo.EMPTY_STRING},Uc={clientSecret:zo.EMPTY_STRING,clientAssertion:void 0},Dc={azureCloudInstance:ca,tenant:"".concat(zo.DEFAULT_COMMON_TENANT)},qc={application:{appName:"",appVersion:""}};function Fc(e){return e.authOptions.authority.options.protocolMode===sa}const Hc={sendGetRequestAsync:()=>Promise.reject(as(ns)),sendPostRequestAsync:()=>Promise.reject(as(ns))},Bc="acquireTokenByCode",zc="acquireTokenByRefreshToken",Kc="acquireTokenSilent",Wc="acquireTokenSilentAsync",Vc="acquireTokenPopup",Qc="acquireTokenPreRedirect",Gc="acquireTokenRedirect",Yc="cryptoOptsGetPublicKeyThumbprint",Jc="cryptoOptsSignJwt",$c="silentCacheClientAcquireToken",Xc="silentIframeClientAcquireToken",Zc="awaitConcurrentIframe",el="silentRefreshClientAcquireToken",tl="ssoSilent",nl="standardInteractionClientGetDiscoveredAuthority",rl="fetchAccountIdWithNativeBroker",ol="nativeInteractionClientAcquireToken",il="networkClientSendPostRequestAsync",al="refreshTokenClientExecutePostToTokenEndpoint",sl="authorizationCodeClientExecutePostToTokenEndpoint",cl="refreshTokenClientExecuteTokenRequest",ll="refreshTokenClientAcquireToken",ul="refreshTokenClientAcquireTokenWithCachedRefreshToken",dl="refreshTokenClientAcquireTokenByRefreshToken",hl="refreshTokenClientCreateTokenRequestBody",pl="acquireTokenFromCache",fl="silentFlowClientAcquireCachedToken",gl="silentFlowClientGenerateResultFromCacheRecord",ml="acquireTokenBySilentIframe",vl="initializeBaseRequest",yl="initializeSilentRequest",wl="initializeClientApplication",bl="silentIframeClientTokenHelper",Cl="silentHandlerInitiateAuthRequest",kl="silentHandlerMonitorIframeForHash",Sl="silentHandlerLoadFrame",Al="silentHandlerLoadFrameSync",Tl="standardInteractionClientCreateAuthCodeClient",El="standardInteractionClientGetClientConfiguration",Il="standardInteractionClientInitializeAuthorizationRequest",_l="standardInteractionClientInitializeAuthorizationCodeRequest",xl="getAuthCodeUrl",Rl="handleCodeResponseFromServer",Pl="handleCodeResponse",Nl="updateTokenEndpointAuthority",Ol="authClientAcquireToken",Ml="authClientExecuteTokenRequest",Ll="authClientCreateTokenRequestBody",jl="authClientCreateQueryString",Ul="popTokenGenerateCnf",Dl="popTokenGenerateKid",ql="handleServerTokenResponse",Fl="deserializeResponse",Hl="authorityFactoryCreateDiscoveredInstance",Bl="authorityResolveEndpointsAsync",zl="authorityGetCloudDiscoveryMetadataFromNetwork",Kl="authorityUpdateCloudDiscoveryMetadata",Wl="authorityGetEndpointMetadataFromNetwork",Vl="authorityUpdateEndpointMetadata",Ql="authorityUpdateMetadataWithRegionalInformation",Gl="regionDiscoveryDetectRegion",Yl="regionDiscoveryGetRegionFromIMDS",Jl="regionDiscoveryGetCurrentVersion",$l="acquireTokenByCodeAsync",Xl="handleRedirectPromise",Zl="handleNativeRedirectPromise",eu="nativeMessageHandlerHandshake",tu="removeHiddenIframe",nu="clearTokensAndKeysWithClaims",ru="cacheManagerGetRefreshToken",ou="generatePkceCodes",iu="generateCodeVerifier",au="generateCodeChallengeFromVerifier",su="sha256Digest",cu="getRandomValues",lu=(new Map([[Bc,"ATByCode"],[zc,"ATByRT"],[Kc,"ATS"],[Wc,"ATSAsync"],[Vc,"ATPopup"],[Gc,"ATRedirect"],[Yc,"CryptoGetPKThumb"],[Jc,"CryptoSignJwt"],[$c,"SltCacheClientAT"],[Xc,"SltIframeClientAT"],[el,"SltRClientAT"],[tl,"SsoSlt"],[nl,"StdIntClientGetDiscAuth"],[rl,"FetchAccIdWithNtvBroker"],[ol,"NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[il,"NetClientSendPost"],[al,"RTClientExecPost"],[sl,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[cl,"RTClientExecTReq"],[ll,"RTClientAT"],[ul,"RTClientATWithCachedRT"],[dl,"RTClientATByRT"],[hl,"RTClientCreateTReqBody"],[pl,"ATFromCache"],[fl,"SltFlowClientATCached"],[gl,"SltFlowClientGenResFromCache"],[ml,"ATBySltIframe"],[vl,"InitBaseReq"],[yl,"InitSltReq"],[wl,"InitClientApplication"],[bl,"SIClientTHelper"],[Cl,"SHandlerInitAuthReq"],[kl,"SltHandlerMonitorIframeForHash"],[Sl,"SHandlerLoadFrame"],[Al,"SHandlerLoadFrameSync"],[Tl,"StdIntClientCreateAuthCodeClient"],[El,"StdIntClientGetClientConf"],[Il,"StdIntClientInitAuthReq"],[_l,"StdIntClientInitAuthCodeReq"],[xl,"GetAuthCodeUrl"],[Rl,"HandleCodeResFromServer"],[Pl,"HandleCodeResp"],[Nl,"UpdTEndpointAuth"],[Ol,"AuthClientAT"],[Ml,"AuthClientExecTReq"],[Ll,"AuthClientCreateTReqBody"],[jl,"AuthClientCreateQueryStr"],[Ul,"PopTGenCnf"],[Dl,"PopTGenKid"],[ql,"HandleServerTRes"],[Fl,"DeserializeRes"],[Hl,"AuthFactCreateDiscInst"],[Bl,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[zl,"AuthGetCDMetaFromNet"],[Kl,"AuthUpdCDMeta"],[Wl,"AuthUpdCDMetaFromNet"],[Vl,"AuthUpdEndpointMeta"],[Ql,"AuthUpdMetaWithRegInfo"],[Gl,"RegDiscDetectReg"],[Yl,"RegDiscGetRegFromIMDS"],[Jl,"RegDiscGetCurrentVer"],[$l,"ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],[Xl,"HandleRedirectPromise"],[Zl,"HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],[eu,"NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],[tu,"RemoveHiddenIframe"],[nu,"ClearTAndKeysWithClaims"],[ru,"CacheManagerGetRT"],[ou,"GenPkceCodes"],[iu,"GenCodeVerifier"],[au,"GenCodeChallengeFromVerifier"],[su,"Sha256Digest"],[cu,"GetRandomValues"]]),1);new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT"]);class uu{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class du{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:lu,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new uu}}startPerformanceMeasurement(){return new uu}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const hu="invalid_grant",pu=483,fu=600,gu="msal",mu=30,vu="msal.js.browser",yu="53ee284d-920a-4b59-9d30-a60315b26836",wu="ppnbnpeolgkicgegkbkbjmhlideopiji",bu="MATS",Cu="Handshake",ku="HandshakeResponse",Su="GetToken",Au="Response",Tu="localStorage",Eu="sessionStorage",Iu="memoryStorage",_u="GET",xu="POST",Ru="authority",Pu="request.state",Nu="nonce.id_token",Ou="request.origin",Mu="urlHash",Lu="request.params",ju="interaction.status",Uu="ccs.credential",Du="request.correlationId",qu="request.native",Fu="msal.account.keys",Hu="msal.token.keys",Bu="wrapper.sku",zu="wrapper.version",Ku=861,Wu=862,Vu=863,Qu=865,Gu=866,Yu=61,Ju=961,$u=962;var Xu;!function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(Xu||(Xu={}));const Zu={scopes:Go},ed="msal.db",td="".concat(ed,".keys"),nd=0,rd=1,od=2,id=3,ad=4,sd=5,cd=[nd,sd,ad];class ld{navigateInternal(e,t){return ld.defaultNavigateWindow(e,t)}navigateExternal(e,t){return ld.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((e=>{setTimeout((()=>{e(!0)}),t.timeout)}))}}class ud extends ha{constructor(e,t,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,ud.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=n}}function dd(e,t,n){return new ud(e,t,n)}const hd="pkce_not_created",pd="crypto_nonexistent",fd="empty_navigate_uri",gd="hash_empty_error",md="no_state_in_hash",vd="hash_does_not_contain_known_properties",yd="unable_to_parse_state",wd="state_interaction_type_mismatch",bd="interaction_in_progress",Cd="popup_window_error",kd="empty_window_error",Sd="user_cancelled",Ad="monitor_popup_timeout",Td="monitor_window_timeout",Ed="redirect_in_iframe",Id="block_iframe_reload",_d="block_nested_popups",xd="iframe_closed_prematurely",Rd="silent_logout_unsupported",Pd="no_account_error",Nd="silent_prompt_value_error",Od="no_token_request_cache_error",Md="unable_to_parse_token_request_cache_error",Ld="no_cached_authority_error",jd="auth_request_not_set_error",Ud="invalid_cache_type",Dd="non_browser_environment",qd="database_not_open",Fd="no_network_connectivity",Hd="post_request_failed",Bd="get_request_failed",zd="failed_to_parse_response",Kd="unable_to_load_token",Wd="crypto_key_not_found",Vd="auth_code_required",Qd="auth_code_or_nativeAccountId_required",Gd="spa_code_and_nativeAccountId_present",Yd="database_unavailable",Jd="unable_to_acquire_token_from_native_platform",$d="native_handshake_timeout",Xd="native_extension_not_installed",Zd="native_connection_not_established",eh="uninitialized_public_client_application",th="native_prompt_not_supported",nh="invalid_base64_string",rh="invalid_pop_token_request",oh="failed_to_build_headers",ih="failed_to_parse_headers",ah="For more visit: aka.ms/msaljs/browser-errors",sh={[hd]:"The PKCE code challenge and verifier could not be generated.",[pd]:"The crypto object or function is not available.",[fd]:"Navigation URI is empty. Please check stack trace for more info.",[gd]:"Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ".concat(ah),[md]:"Hash does not contain state. Please verify that the request originated from msal.",[vd]:"Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ".concat(ah),[yd]:"Unable to parse state. Please verify that the request originated from msal.",[wd]:"Hash contains state but the interaction type does not match the caller.",[bd]:"Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ".concat(ah),[Cd]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[kd]:"window.open returned null or undefined window object.",[Sd]:"User cancelled the flow.",[Ad]:"Token acquisition in popup failed due to timeout.  ".concat(ah),[Td]:"Token acquisition in iframe failed due to timeout.  ".concat(ah),[Ed]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Id]:"Request was blocked inside an iframe because MSAL detected an authentication response.  ".concat(ah),[_d]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[xd]:"The iframe being monitored was closed prematurely.",[Rd]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Pd]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Nd]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[Od]:"No token request found in cache.",[Md]:"The cached token request could not be parsed.",[Ld]:"No cached authority found.",[jd]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Ud]:"Invalid cache type",[Dd]:"Login and token requests are not supported in non-browser environments.",[qd]:"Database is not open!",[Fd]:"No network connectivity. Check your internet connection.",[Hd]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Bd]:"Network request failed. Please check the network trace to determine root cause.",[zd]:"Failed to parse network response. Check network trace.",[Kd]:"Error loading token to cache.",[Wd]:"Cryptographic Key or Keypair not found in browser storage.",[Vd]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Qd]:"An authorization code or nativeAccountId must be provided to this flow.",[Gd]:"Request cannot contain both spa code and native account id.",[Yd]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Jd]:"Unable to acquire token from native platform.  ".concat(ah),[$d]:"Timed out while attempting to establish connection to browser extension",[Xd]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Zd]:"Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ".concat(ah),[eh]:"You must call and await the initialize function before attempting to call any other MSAL API.  ".concat(ah),[th]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[nh]:"Invalid base64 encoded string.",[rh]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[oh]:"Failed to build request headers object.",[ih]:"Failed to parse response headers"};class ch extends ha{constructor(e,t){super(e,sh[e],t),Object.setPrototypeOf(this,ch.prototype),this.name="BrowserAuthError"}}function lh(e,t){return new ch(e,t)}class uh{async sendGetRequestAsync(e,t){let n,r={},o=0;const i=dh(t);try{n=await fetch(e,{method:_u,headers:i})}catch(Yg){throw lh(window.navigator.onLine?Bd:Fd)}r=hh(n.headers);try{return o=n.status,{headers:r,body:await n.json(),status:o}}catch(Yg){throw dd(lh(zd),o,r)}}async sendPostRequestAsync(e,t){const n=t&&t.body||"",r=dh(t);let o,i=0,a={};try{o=await fetch(e,{method:xu,headers:r,body:n})}catch(Yg){throw lh(window.navigator.onLine?Hd:Fd)}a=hh(o.headers);try{return i=o.status,{headers:a,body:await o.json(),status:i}}catch(Yg){throw dd(lh(zd),i,a)}}}function dh(e){try{const t=new Headers;if(!e||!e.headers)return t;const n=e.headers;return Object.entries(n).forEach((e=>{let[n,r]=e;t.append(n,r)})),t}catch(Yg){throw lh(oh)}}function hh(e){try{const t={};return e.forEach(((e,n)=>{t[n]=e})),t}catch(Yg){throw lh(ih)}}function ph(e){return encodeURIComponent(gh(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function fh(e){return mh(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gh(e){return mh((new TextEncoder).encode(e))}function mh(e){const t=Array.from(e,(e=>String.fromCodePoint(e))).join("");return btoa(t)}const vh="SHA-256",yh=new Uint8Array([1,0,1]),wh="0123456789abcdef",bh=new Uint32Array(1),Ch={name:"RSASSA-PKCS1-v1_5",hash:vh,modulusLength:2048,publicExponent:yh};async function kh(e,t,n){null===t||void 0===t||t.addQueueMeasurement(su,n);const r=(new TextEncoder).encode(e);return window.crypto.subtle.digest(vh,r)}function Sh(e){return window.crypto.getRandomValues(e)}function Ah(){return window.crypto.getRandomValues(bh),bh[0]}function Th(){const e=Date.now(),t=1024*Ah()+(1023&Ah()),n=new Uint8Array(16),r=Math.trunc(t/2**30),o=t&2**30-1,i=Ah();n[0]=e/2**40,n[1]=e/2**32,n[2]=e/2**24,n[3]=e/65536,n[4]=e/256,n[5]=e,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let a="";for(let s=0;s<n.length;s++)a+=wh.charAt(n[s]>>>4),a+=wh.charAt(15&n[s]),3!==s&&5!==s&&7!==s&&9!==s||(a+="-");return a}async function Eh(e){return window.crypto.subtle.exportKey("jwk",e)}async function Ih(e){const t=await kh(e);return fh(new Uint8Array(t))}const _h="storage_not_supported",xh="stubbed_public_client_application_called",Rh="in_mem_redirect_unavailable",Ph={[_h]:"Given storage configuration option was not supported.",[xh]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Rh]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class Nh extends ha{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Nh.prototype)}}function Oh(e){return new Nh(e,Ph[e])}function Mh(){return window.parent!==window}function Lh(){return"undefined"!==typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function jh(){if("undefined"!==typeof window&&window.opener&&window.opener!==window&&"string"===typeof window.name&&0===window.name.indexOf("".concat(gu,".")))throw lh(_d)}function Uh(){if("undefined"===typeof window)throw lh(Dd)}function Dh(e){if(!e)throw lh(eh)}function qh(e){Uh(),function(){if(bc.hashContainsKnownProperties(window.location.hash)&&Mh())throw lh(Id)}(),jh(),Dh(e)}function Fh(e,t){if(qh(e),function(e){if(Mh()&&!e)throw lh(Ed)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===Iu&&!t.cache.storeAuthStateInCookie)throw Oh(Rh)}function Hh(e){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout((()=>{try{document.head.removeChild(t)}catch(e){}}),1e4)}const Bh=1e4;const zh="3.28.1";class Kh{static loggerCallback(e,t){switch(e){case oa.Error:return void console.error(t);case oa.Info:return void console.info(t);case oa.Verbose:return void console.debug(t);case oa.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){var t,n;let r;this.browserEnvironment="undefined"!==typeof window,this.config=function(e,t){let{auth:n,cache:r,system:o,telemetry:i}=e;const a={clientId:zo.EMPTY_STRING,authority:"".concat(zo.DEFAULT_AUTHORITY),knownAuthorities:[],cloudDiscoveryMetadata:zo.EMPTY_STRING,authorityMetadata:zo.EMPTY_STRING,redirectUri:"undefined"!==typeof window?Lh():"",postLogoutRedirectUri:zo.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:aa,OIDCOptions:{serverResponseType:mi.FRAGMENT,defaultScopes:[zo.OPENID_SCOPE,zo.PROFILE_SCOPE,zo.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:ca,tenant:zo.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:Eu,temporaryCacheLocation:Eu,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!r||r.cacheLocation!==Tu),claimsBasedCachingEnabled:!1},c={loggerCallback:()=>{},logLevel:oa.Info,piiLoggingEnabled:!1},l=(0,Ee.A)((0,Ee.A)({},Nc),{},{loggerOptions:c,networkClient:t?new uh:Hc,navigationClient:new ld,loadFrameTimeout:0,windowHashTimeout:(null===o||void 0===o?void 0:o.loadFrameTimeout)||6e4,iframeHashTimeout:(null===o||void 0===o?void 0:o.loadFrameTimeout)||Bh,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(null===o||void 0===o?void 0:o.nativeBrokerHandshakeTimeout)||2e3,pollIntervalMilliseconds:mu}),u=(0,Ee.A)((0,Ee.A)((0,Ee.A)({},l),o),{},{loggerOptions:(null===o||void 0===o?void 0:o.loggerOptions)||c}),d={application:{appName:zo.EMPTY_STRING,appVersion:zo.EMPTY_STRING},client:new du};(null===n||void 0===n?void 0:n.protocolMode)!==sa&&null!==n&&void 0!==n&&n.OIDCOptions&&new ia(u.loggerOptions).warning(JSON.stringify(tc(Js)));if(null!==n&&void 0!==n&&n.protocolMode&&n.protocolMode!==aa&&null!==u&&void 0!==u&&u.allowNativeBroker)throw tc($s);return{auth:(0,Ee.A)((0,Ee.A)((0,Ee.A)({},a),n),{},{OIDCOptions:(0,Ee.A)((0,Ee.A)({},a.OIDCOptions),null===n||void 0===n?void 0:n.OIDCOptions)}),cache:(0,Ee.A)((0,Ee.A)({},s),r),system:u,telemetry:(0,Ee.A)((0,Ee.A)({},d),i)}}(e,this.browserEnvironment);try{r=window[Eu]}catch(Yg){}const o=null===(t=r)||void 0===t?void 0:t.getItem("msal.browser.log.level"),i=null===(n=r)||void 0===n||null===(n=n.getItem("msal.browser.log.pii"))||void 0===n?void 0:n.toLowerCase(),a="true"===i||"false"!==i&&void 0,s=(0,Ee.A)({},this.config.system.loggerOptions),c=o&&Object.keys(oa).includes(o)?oa[o]:void 0;c&&(s.loggerCallback=Kh.loggerCallback,s.logLevel=c),void 0!==a&&(s.piiLoggingEnabled=a),this.logger=new ia(s,"@azure/msal-browser",zh),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class Wh extends Kh{getModuleName(){return Wh.MODULE_NAME}getId(){return Wh.ID}async initialize(){return this.available="undefined"!==typeof window,this.available}}Wh.MODULE_NAME="",Wh.ID="StandardOperatingContext";const Vh="missing_kid_error",Qh="missing_alg_error",Gh={[Vh]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Qh]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Yh extends ha{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,Yh.prototype)}}function Jh(e){return new Yh(e,Gh[e])}class $h{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw Jh(Vh);if(!e.alg)throw Jh(Qh);const t=new $h({typ:e.typ||ra,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}function Xh(e){return(new TextDecoder).decode(function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw lh(nh)}const n=atob(t);return Uint8Array.from(n,(e=>e.codePointAt(0)||0))}(e))}class Zh{constructor(){this.dbName=ed,this.version=1,this.tableName=td,this.dbOpen=!1}async open(){return new Promise(((e,t)=>{const n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",(e=>{e.target.result.createObjectStore(this.tableName)})),n.addEventListener("success",(t=>{const n=t;this.db=n.target.result,this.dbOpen=!0,e()})),n.addEventListener("error",(()=>t(lh(Yd))))}))}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(lh(qd));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);r.addEventListener("success",(e=>{const n=e;this.closeConnection(),t(n.target.result)})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async setItem(e,t){return await this.validateDbIsOpen(),new Promise(((n,r)=>{if(!this.db)return r(lh(qd));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);o.addEventListener("success",(()=>{this.closeConnection(),n()})),o.addEventListener("error",(e=>{this.closeConnection(),r(e)}))}))}async removeItem(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(lh(qd));const r=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);r.addEventListener("success",(()=>{this.closeConnection(),t()})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async getKeys(){return await this.validateDbIsOpen(),new Promise(((e,t)=>{if(!this.db)return t(lh(qd));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();n.addEventListener("success",(t=>{const n=t;this.closeConnection(),e(n.target.result)})),n.addEventListener("error",(e=>{this.closeConnection(),t(e)}))}))}async containsKey(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(lh(qd));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);r.addEventListener("success",(e=>{const n=e;this.closeConnection(),t(1===n.target.result)})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise(((e,t)=>{const n=window.indexedDB.deleteDatabase(ed),r=setTimeout((()=>t(!1)),200);n.addEventListener("success",(()=>(clearTimeout(r),e(!0)))),n.addEventListener("blocked",(()=>(clearTimeout(r),e(!0)))),n.addEventListener("error",(()=>(clearTimeout(r),t(!1))))}))}}class ep{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,t){this.cache.set(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach(((t,n)=>{e.push(n)})),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class tp{constructor(e){this.inMemoryCache=new ep,this.indexedDBCache=new Zh,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof ch&&e.errorCode===Yd))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(Yg){this.handleDatabaseAccessError(Yg)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(Yg){this.handleDatabaseAccessError(Yg)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(Yg){this.handleDatabaseAccessError(Yg)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(Yg){this.handleDatabaseAccessError(Yg)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(Yg){this.handleDatabaseAccessError(Yg)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(Yg){return this.handleDatabaseAccessError(Yg),!1}}}class np{constructor(e,t,n){this.logger=e,function(e){if(!window)throw lh(Dd);if(!window.crypto)throw lh(pd);if(!e&&!window.crypto.subtle)throw lh(pd,"crypto_subtle_undefined")}(null!==n&&void 0!==n&&n),this.cache=new tp(this.logger),this.performanceClient=t}createNewGuid(){return Th()}base64Encode(e){return gh(e)}base64Decode(e){return Xh(e)}base64UrlEncode(e){return ph(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var t;const n=null===(t=this.performanceClient)||void 0===t?void 0:t.startMeasurement(Yc,e.correlationId),r=await async function(e,t){return window.crypto.subtle.generateKey(Ch,e,t)}(np.EXTRACTABLE,np.POP_KEY_USAGES),o=await Eh(r.publicKey),i=rp({e:o.e,kty:o.kty,n:o.n}),a=await this.hashString(i),s=await Eh(r.privateKey),c=await async function(e,t,n){return window.crypto.subtle.importKey("jwk",e,Ch,t,n)}(s,!1,["sign"]);return await this.cache.setItem(a,{privateKey:c,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){await this.cache.removeItem(e);return!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(Yg){return Yg instanceof Error?this.logger.error("Clearing keystore failed with error: ".concat(Yg.message)):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,n,r){var o;const i=null===(o=this.performanceClient)||void 0===o?void 0:o.startMeasurement(Jc,r),a=await this.cache.getItem(t);if(!a)throw lh(Wd);const s=await Eh(a.publicKey),c=rp(s),l=ph(JSON.stringify({kid:t})),u=ph($h.getShrHeaderString((0,Ee.A)((0,Ee.A)({},null===n||void 0===n?void 0:n.header),{},{alg:s.alg,kid:l})));e.cnf={jwk:JSON.parse(c)};const d=ph(JSON.stringify(e)),h="".concat(u,".").concat(d),p=(new TextEncoder).encode(h),f=await async function(e,t){return window.crypto.subtle.sign(Ch,e,t)}(a.privateKey,p),g=fh(new Uint8Array(f)),m="".concat(h,".").concat(g);return i&&i.end({success:!0}),m}async hashString(e){return Ih(e)}}function rp(e){return JSON.stringify(e,Object.keys(e).sort())}np.POP_KEY_USAGES=["sign","verify"],np.EXTRACTABLE=!0;const op=(e,t,n,r,o)=>function(){n.trace("Executing function ".concat(t));const i=null===r||void 0===r?void 0:r.startMeasurement(t,o);if(o){const e=t+"CallCount";null===r||void 0===r||r.incrementFields({[e]:1},o)}try{const r=e(...arguments);return null===i||void 0===i||i.end({success:!0}),n.trace("Returning result from ".concat(t)),r}catch(Yg){n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(Yg))}catch(Yg){n.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},Yg),Yg}},ip=(e,t,n,r,o)=>function(){n.trace("Executing function ".concat(t));const i=null===r||void 0===r?void 0:r.startMeasurement(t,o);if(o){const e=t+"CallCount";null===r||void 0===r||r.incrementFields({[e]:1},o)}return null===r||void 0===r||r.setPreQueueTime(t,o),e(...arguments).then((e=>(n.trace("Returning result from ".concat(t)),null===i||void 0===i||i.end({success:!0}),e))).catch((e=>{n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},e),e}))};class ap{constructor(e,t,n,r){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=r}async detectRegion(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Gl,this.correlationId);let r=e;if(r)t.region_source=Qi;else{const e=ap.IMDS_OPTIONS;try{const n=await ip(this.getRegionFromIMDS.bind(this),Yl,this.logger,this.performanceClient,this.correlationId)(zo.IMDS_VERSION,e);if(n.status===Ki&&(r=n.body,t.region_source=Gi),n.status===Wi){const n=await ip(this.getCurrentVersion.bind(this),Jl,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source=Vi,null;const o=await ip(this.getRegionFromIMDS.bind(this),Yl,this.logger,this.performanceClient,this.correlationId)(n,e);o.status===Ki&&(r=o.body,t.region_source=Gi)}}catch(Yg){return t.region_source=Vi,null}}return r||(t.region_source=Vi),r||null}async getRegionFromIMDS(e,t){var n;return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Yl,this.correlationId),this.networkInterface.sendGetRequestAsync("".concat(zo.IMDS_ENDPOINT,"?api-version=").concat(e,"&format=text"),t,zo.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Jl,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync("".concat(zo.IMDS_ENDPOINT,"?format=json"),e);return t.status===Wi&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(Yg){return null}}}ap.IMDS_OPTIONS={headers:{Metadata:"true"}};class sp{constructor(e,t,n,r,o,i,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=a,this.correlationId=i,this.managedIdentity=s||!1,this.regionDiscovery=new ap(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(zo.CIAM_AUTH_URL))return gc;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case zo.ADFS:return pc;case zo.DSTS:return fc}return hc}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new bc(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw as(ya)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw as(ya)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw as(ya)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw as($a);return this.replacePath(this.metadata.end_session_endpoint)}throw as(ya)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw as(ya)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw as(ya)}canReplaceTenant(e){return 1===e.PathSegments.length&&!sp.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===hc&&this.protocolMode===aa}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const n=new bc(this.metadata.canonical_authority).getUrlComponents(),r=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach(((e,o)=>{let i=r[o];if(0===o&&this.canReplaceTenant(n)){const e=new bc(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];i!==e&&(this.logger.verbose("Replacing tenant domain name ".concat(i," with id ").concat(e)),i=e)}e!==i&&(t=t.replace("/".concat(i,"/"),"/".concat(e,"/")))})),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===pc||this.protocolMode!==aa&&!this.isAliasOfKnownMicrosoftAuthority(e)?"".concat(this.canonicalAuthority,".well-known/openid-configuration"):"".concat(this.canonicalAuthority,"v2.0/.well-known/openid-configuration")}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var e,t;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(Bl,this.correlationId);const n=this.getCurrentMetadataEntity(),r=await ip(this.updateCloudDiscoveryMetadata.bind(this),Kl,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const o=await ip(this.updateEndpointMetadata.bind(this),Vl,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,r,{source:o}),null===(t=this.performanceClient)||void 0===t||t.addFields({cloudDiscoverySource:r,authorityEndpointSource:o},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Is(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==Pi&&(null===n||void 0===n?void 0:n.source)!==Pi&&(e.expiresAt=Is(),e.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}async updateEndpointMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Vl,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){var r;if(n.source===Oi)if(null!==(r=this.authorityOptions.azureRegionConfiguration)&&void 0!==r&&r.azureRegion&&n.metadata){_s(e,await ip(this.updateMetadataWithRegionalInformation.bind(this),Ql,this.logger,this.performanceClient,this.correlationId)(n.metadata),!1),e.canonical_authority=this.canonicalAuthority}return n.source}let o=await ip(this.getEndpointMetadataFromNetwork.bind(this),Wl,this.logger,this.performanceClient,this.correlationId)();var i;if(o)return null!==(i=this.authorityOptions.azureRegionConfiguration)&&void 0!==i&&i.azureRegion&&(o=await ip(this.updateMetadataWithRegionalInformation.bind(this),Ql,this.logger,this.performanceClient,this.correlationId)(o)),_s(e,o,!0),Ni;throw as(ba,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),_s(e,t,!1),{source:Ri};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return _s(e,t,!1),{source:Oi,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=Rs(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Pi}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new bc(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(Yg){throw tc(Ks)}return null}async getEndpointMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(Wl,this.correlationId);const t={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ".concat(n));try{const e=await this.networkInterface.sendGetRequestAsync(n,t),r=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(e.body);return r?e.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(Yg){return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: ".concat(Yg)),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Cc?Cc[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Ql,this.correlationId);const r=null===(n=this.authorityOptions.azureRegionConfiguration)||void 0===n?void 0:n.azureRegion;if(r){var o;if(r!==zo.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Yi,this.regionDiscoveryMetadata.region_used=r,sp.replaceWithRegionalInformation(e,r);const t=await ip(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),Gl,this.logger,this.performanceClient,this.correlationId)(null===(o=this.authorityOptions.azureRegionConfiguration)||void 0===o?void 0:o.environmentRegion,this.regionDiscoveryMetadata);if(t)return this.regionDiscoveryMetadata.region_outcome=Ji,this.regionDiscoveryMetadata.region_used=t,sp.replaceWithRegionalInformation(e,t);this.regionDiscoveryMetadata.region_outcome=$i}return e}async updateCloudDiscoveryMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Kl,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await ip(this.getCloudDiscoveryMetadataFromNetwork.bind(this),zl,this.logger,this.performanceClient,this.correlationId)();if(r)return xs(e,r,!0),Ni;throw tc(Ws)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii("Known Authorities: ".concat(this.authorityOptions.knownAuthorities||zo.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: ".concat(this.authorityOptions.authorityMetadata||zo.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: ".concat(e.canonical_authority||zo.NOT_APPLICABLE));const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),xs(e,t,!1),Ri;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(n=this.hostnameAndPort,Tc(kc.metadata,n));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),xs(e,t,!1),Oi;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var n;const r=Rs(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Pi):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===gc)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),sp.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=Tc(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(Yg){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),tc(zs)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),sp.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(zl,this.correlationId);const t="".concat(zo.AAD_INSTANCE_DISCOVERY_ENDPT).concat(this.canonicalAuthority,"oauth2/v2.0/authorize"),n={};let r=null;try{const e=await this.networkInterface.sendGetRequestAsync(t,n);let o,i;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(e.body))o=e.body,i=o.metadata,this.logger.verbosePii("tenant_discovery_endpoint is: ".concat(o.tenant_discovery_endpoint));else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(e.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ".concat(e.status)),o=e.body,o.error===zo.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is ".concat(o.error)),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is ".concat(o.error_description)),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),i=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Tc(i,this.hostnameAndPort)}catch(o){if(o instanceof ha)this.logger.error("There was a network error while attempting to get the cloud discovery instance metadata.\nError: ".concat(o.errorCode,"\nError Description: ").concat(o.errorMessage));else{const e=o;this.logger.error("A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ".concat(e.name,"\nError Description: ").concat(e.message))}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=sp.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter((e=>e&&bc.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort)).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==ca){const e=t.tenant?t.tenant:zo.DEFAULT_COMMON_TENANT;n="".concat(t.azureCloudInstance,"/").concat(e,"/")}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return zo.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw as(ya)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Sc.has(e)}static isPublicCloudAuthority(e){return zo.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){const r=new bc(e);r.validateAsUri();const o=r.getUrlComponents();let i="".concat(t,".").concat(o.HostNameAndPort);this.isPublicCloudAuthority(o.HostNameAndPort)&&(i="".concat(t,".").concat(zo.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX));const a=bc.constructAuthorityUriFromObject((0,Ee.A)((0,Ee.A)({},r.getUrlComponents()),{},{HostNameAndPort:i})).urlString;return n?"".concat(a,"?").concat(n):a}static replaceWithRegionalInformation(e,t){const n=(0,Ee.A)({},e);return n.authorization_endpoint=sp.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=sp.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=sp.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e;const n=new bc(e).getUrlComponents();if(0===n.PathSegments.length&&n.HostNameAndPort.endsWith(zo.CIAM_AUTH_URL)){const e=n.HostNameAndPort.split(".")[0];t="".concat(t).concat(e).concat(zo.AAD_TENANT_DOMAIN_SUFFIX)}return t}}function cp(e){return e.endsWith(zo.FORWARD_SLASH)?e:"".concat(e).concat(zo.FORWARD_SLASH)}sp.reservedTenantDomains=new Set(["{tenant}","{tenantid}",li,di,ui]);const lp="no_tokens_found",up="native_account_unavailable",dp="refresh_token_expired",hp="bad_token",pp=["interaction_required","consent_required","login_required",hp],fp=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],gp={[lp]:"No refresh token found in the cache. Please sign-in.",[up]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[dp]:"Refresh token has expired.",[hp]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class mp extends ha{constructor(e,t,n,r,o,i,a,s){super(e,t,n),Object.setPrototypeOf(this,mp.prototype),this.timestamp=r||zo.EMPTY_STRING,this.traceId=o||zo.EMPTY_STRING,this.correlationId=i||zo.EMPTY_STRING,this.claims=a||zo.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=s}}function vp(e,t,n){const r=!!e&&pp.indexOf(e)>-1,o=!!n&&fp.indexOf(n)>-1,i=!!t&&pp.some((e=>t.indexOf(e)>-1));return r||i||o}function yp(e){return new mp(e,gp[e])}class wp{static setRequestState(e,t,n){const r=wp.generateLibraryState(e,n);return t?"".concat(r).concat(zo.RESOURCE_DELIM).concat(t):r}static generateLibraryState(e,t){if(!e)throw as(Ba);const n={id:e.createNewGuid()};t&&(n.meta=t);const r=JSON.stringify(n);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw as(Ba);if(!t)throw as(ka);try{const n=t.split(zo.RESOURCE_DELIM),r=n[0],o=n.length>1?n.slice(1).join(zo.RESOURCE_DELIM):zo.EMPTY_STRING,i=e.base64Decode(r),a=JSON.parse(i);return{userRequestState:o||zo.EMPTY_STRING,libraryState:a}}catch(Yg){throw as(ka)}}}const bp="home_account_id",Cp="UPN";class kp{constructor(){if(!window.localStorage)throw Oh(_h)}getItem(e){return window.localStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}removeItem(e){window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}}class Sp{constructor(){if(!window.sessionStorage)throw Oh(_h)}getItem(e){return window.sessionStorage.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}function Ap(e,t){if(!t)return null;try{return wp.parseRequestState(e,t).libraryState.meta}catch(Yg){throw as(ka)}}const Tp=864e5;class Ep{getItem(e){const t="".concat(encodeURIComponent(e)),n=document.cookie.split(";");for(let r=0;r<n.length;r++){const e=n[r],[o,...i]=decodeURIComponent(e).trim().split("="),a=i.join("=");if(o===t)return a}return""}setItem(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t),";path=/;SameSite=Lax;");if(n){const e=function(e){const t=new Date,n=new Date(t.getTime()+e*Tp);return n.toUTCString()}(n);o+="expires=".concat(e,";")}r&&(o+="Secure;"),document.cookie=o}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach((e=>{const n=decodeURIComponent(e).trim().split("=");t.push(n[0])})),t}containsKey(e){return this.getKeys().includes(e)}}class Ip extends Rc{constructor(e,t,n,r,o,i){super(e,n,r,o),this.cacheConfig=t,this.logger=r,this.internalStorage=new ep,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupBrowserStorage(this.cacheConfig.temporaryCacheLocation),this.cookieStorage=new Ep,t.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=i}setupBrowserStorage(e){try{switch(e){case Tu:return new kp;case Eu:return new Sp}}catch(Yg){this.logger.error(Yg)}return this.cacheConfig.cacheLocation=Iu,new ep}migrateCacheEntries(){const e="".concat(zo.CACHE_PREFIX,".").concat(ni),t="".concat(zo.CACHE_PREFIX,".").concat(ri),n="".concat(zo.CACHE_PREFIX,".").concat(ii),r="".concat(zo.CACHE_PREFIX,".").concat(ai),o=[this.browserStorage.getItem(e),this.browserStorage.getItem(t),this.browserStorage.getItem(n),this.browserStorage.getItem(r)];[ni,ri,ii,ai].forEach(((e,t)=>{const n=o[t];n&&this.setTemporaryCache(e,n,!0)}))}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem(Fu),t=this.getItem("".concat(Hu,".").concat(this.clientId));if(e&&t)return void this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");this.browserStorage.getKeys().forEach((e=>{if(this.isCredentialKey(e)){const t=this.getItem(e);if(t){const n=this.validateAndParseJson(t);if(n&&n.hasOwnProperty("credentialType"))switch(n.credentialType){case Ti.ID_TOKEN:if(bs(n)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii("BrowserCacheManager:createKeyMaps - idToken with key: ".concat(e," found, saving key to token key map"));const t=n,r=this.updateCredentialCacheKey(e,t);return void this.addTokenKey(r,Ti.ID_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii("BrowserCacheManager:createKeyMaps - failed idToken validation on key: ".concat(e));break;case Ti.ACCESS_TOKEN:case Ti.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(ws(n)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii("BrowserCacheManager:createKeyMaps - accessToken with key: ".concat(e," found, saving key to token key map"));const t=n,r=this.updateCredentialCacheKey(e,t);return void this.addTokenKey(r,Ti.ACCESS_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii("BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ".concat(e));break;case Ti.REFRESH_TOKEN:if(Cs(n)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii("BrowserCacheManager:createKeyMaps - refreshToken with key: ".concat(e," found, saving key to token key map"));const t=n,r=this.updateCredentialCacheKey(e,t);return void this.addTokenKey(r,Ti.REFRESH_TOKEN)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii("BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ".concat(e))}}}if(this.isAccountKey(e)){const t=this.getItem(e);if(t){const n=this.validateAndParseJson(t);n&&vc.isAccountEntity(n)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii("BrowserCacheManager:createKeyMaps - account with key: ".concat(e," found, saving key to account key map")),this.addAccountKeyToMap(e))}}}))}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&"object"===typeof t?t:null}catch(t){return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,t){this.browserStorage.setItem(e,t)}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const n=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,n,t)}getCachedAccountEntity(e){const t=this.getItem(e);if(!t)return this.removeAccountKeyFromMap(e),null;const n=this.validateAndParseJson(t);return n&&vc.isAccountEntity(n)?Rc.toObject(new vc,n):(this.removeAccountKeyFromMap(e),null)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const t=e.generateAccountKey();this.setItem(t,JSON.stringify(e)),this.addAccountKeyToMap(t)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem(Fu);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii("BrowserCacheManager.addAccountKeyToMap called with key: ".concat(e));const t=this.getAccountKeys();-1===t.indexOf(e)?(t.push(e),this.setItem(Fu,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii("BrowserCacheManager.removeAccountKeyFromMap called with key: ".concat(e));const t=this.getAccountKeys(),n=t.indexOf(e);n>-1?(t.splice(n,1),this.setItem(Fu,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,Ti.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,Ti.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,Ti.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem("".concat(Hu,".").concat(this.clientId));if(e){const t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const n=this.getTokenKeys();switch(t){case Ti.ID_TOKEN:-1===n.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),n.idToken.push(e));break;case Ti.ACCESS_TOKEN:-1===n.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),n.accessToken.push(e));break;case Ti.REFRESH_TOKEN:-1===n.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),n.refreshToken.push(e));break;default:throw this.logger.error("BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ".concat(t)),as(za)}this.setItem("".concat(Hu,".").concat(this.clientId),JSON.stringify(n))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const n=this.getTokenKeys();switch(t){case Ti.ID_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ".concat(e," from map"));const r=n.idToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),n.idToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case Ti.ACCESS_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ".concat(e," from map"));const o=n.accessToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),n.accessToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case Ti.REFRESH_TOKEN:this.logger.infoPii("BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ".concat(e," from map"));const i=n.refreshToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),n.refreshToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error("BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ".concat(t)),as(za)}this.setItem("".concat(Hu,".").concat(this.clientId),JSON.stringify(n))}getIdTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,Ti.ID_TOKEN),null;const n=this.validateAndParseJson(t);return n&&bs(n)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,Ti.ID_TOKEN),null)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const t=fs(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,Ti.ID_TOKEN)}getAccessTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,Ti.ACCESS_TOKEN),null;const n=this.validateAndParseJson(t);return n&&ws(n)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,Ti.ACCESS_TOKEN),null)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const t=fs(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,Ti.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,Ti.REFRESH_TOKEN),null;const n=this.validateAndParseJson(t);return n&&Cs(n)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,Ti.REFRESH_TOKEN),null)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const t=fs(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,Ti.REFRESH_TOKEN)}getAppMetadata(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&(r=e,(o=n)&&0===r.indexOf(Ei)&&o.hasOwnProperty("clientId")&&o.hasOwnProperty("environment"))?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null);var r,o}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=function(e){let{environment:t,clientId:n}=e;return[Ei,t,n].join(Si).toLowerCase()}(e);this.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){const n=0===e.indexOf(Mi.CACHE_KEY);let r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),n):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){return!!t&&0===e.indexOf(_i)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),n):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter((e=>this.isAuthorityMetadata(e)))}setWrapperMetadata(e,t){this.internalStorage.setItem(Bu,e),this.internalStorage.setItem(zu,t)}getWrapperMetadata(){return[this.internalStorage.getItem(Bu)||zo.EMPTY_STRING,this.internalStorage.getItem(zu)||zo.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(ci),t=this.getItem(e);if(!t){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const e=this.generateCacheKey(si),t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const n=this.getAccountInfoFilteredBy({localAccountId:t});return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(n),n):null}const n=this.validateAndParseJson(t);return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(ci),n=this.generateCacheKey(si);if(e){this.logger.verbose("setActiveAccount: Active account set");const r={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(r)),this.browserStorage.setItem(n,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t),this.browserStorage.removeItem(n)}getThrottlingCache(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){let n=!1;e&&(n=0===e.indexOf(Di));let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),n):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const n=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const e=this.cookieStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}const r=this.temporaryCacheStorage.getItem(n);if(!r){if(this.cacheConfig.cacheLocation===Tu){const e=this.browserStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),r}setTemporaryCache(e,t,n){const r=n?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(r,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach((e=>{-1===e.indexOf(zo.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.removeTemporaryItem(e)})),this.browserStorage.getKeys().forEach((e=>{-1===e.indexOf(zo.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.browserStorage.removeItem(e)})),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,t){e.addQueueMeasurement(nu,t);const n=this.getTokenKeys(),r=[];n.accessToken.forEach((e=>{const t=this.getAccessTokenCredential(e);null!==t&&void 0!==t&&t.requestedClaimsHash&&e.includes(t.requestedClaimsHash.toLowerCase())&&r.push(this.removeAccessToken(e))})),await Promise.all(r),r.length>0&&this.logger.warning("".concat(r.length," access tokens with claims in the cache keys have been removed from the cache."))}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):nc.startsWith(e,zo.CACHE_PREFIX)||nc.startsWith(e,oi)?e:"".concat(zo.CACHE_PREFIX,".").concat(this.clientId,".").concat(e)}generateAuthorityKey(e){const{libraryState:{id:t}}=wp.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey("".concat(Ru,".").concat(t))}generateNonceKey(e){const{libraryState:{id:t}}=wp.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey("".concat(Nu,".").concat(t))}generateStateKey(e){const{libraryState:{id:t}}=wp.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey("".concat(Pu,".").concat(t))}getCachedAuthority(e){const t=this.generateStateKey(e),n=this.getTemporaryCache(t);if(!n)return null;const r=this.generateAuthorityKey(n);return this.getTemporaryCache(r)}updateCacheEntries(e,t,n,r,o){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const i=this.generateStateKey(e);this.setTemporaryCache(i,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);const s=this.generateAuthorityKey(e);if(this.setTemporaryCache(s,n,!1),o){const e={credential:o.homeAccountId,type:bp};this.setTemporaryCache(Uu,JSON.stringify(e),!0)}else if(r){const e={credential:r,type:Cp};this.setTemporaryCache(Uu,JSON.stringify(e),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach((t=>{-1!==t.indexOf(e)&&this.removeTemporaryItem(t)})),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(Lu)),this.removeTemporaryItem(this.generateCacheKey(Ou)),this.removeTemporaryItem(this.generateCacheKey(Mu)),this.removeTemporaryItem(this.generateCacheKey(Du)),this.removeTemporaryItem(this.generateCacheKey(Uu)),this.removeTemporaryItem(this.generateCacheKey(qu)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const t=this.generateStateKey(e),n=this.temporaryCacheStorage.getItem(t);this.logger.infoPii("BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ".concat(n)),this.resetRequestCache(n||zo.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach((t=>{if(-1===t.indexOf(Pu))return;const n=this.temporaryCacheStorage.getItem(t);if(!n)return;const r=Ap(this.cryptoImpl,n);r&&r.interactionType===e&&(this.logger.infoPii("BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ".concat(n)),this.resetRequestCache(n))})),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const t=gh(JSON.stringify(e));this.setTemporaryCache(Lu,t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const t=this.getTemporaryCache(Lu,!0);if(!t)throw lh(Od);let n;try{n=JSON.parse(Xh(t))}catch(Yg){throw this.logger.errorPii("Attempted to parse: ".concat(t)),this.logger.error("Parsing cached token request threw with error: ".concat(Yg)),lh(Md)}if(this.removeTemporaryItem(this.generateCacheKey(Lu)),!n.authority){const t=this.generateAuthorityKey(e),r=this.getTemporaryCache(t);if(!r)throw lh(Ld);n.authority=r}return n}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(qu,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){const e="".concat(zo.CACHE_PREFIX,".").concat(ju);return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const t="".concat(zo.CACHE_PREFIX,".").concat(ju);if(e){if(this.getInteractionInProgress())throw lh(bd);this.setTemporaryCache(t,this.clientId,!1)}else e||this.getInteractionInProgress()!==this.clientId||this.removeTemporaryItem(t)}getLegacyLoginHint(){const e=this.getTemporaryCache(oi);e&&(this.browserStorage.removeItem(oi),this.logger.verbose("Cached ADAL id token retrieved."));const t=this.getTemporaryCache(ni,!0);t&&(this.browserStorage.removeItem(this.generateCacheKey(ni)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const n=t||e;if(n){const e=us(n,Xh);if(e.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),e.preferred_username;if(e.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),e.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,t){const n=fs(t);if(e!==n){const r=this.getItem(e);if(r)return this.browserStorage.removeItem(e),this.setItem(n,r),this.logger.verbose("Updated an outdated ".concat(t.credentialType," cache key")),n;this.logger.error("Attempted to update an outdated ".concat(t.credentialType," cache key but no item matching the outdated key was found in storage"))}return e}async hydrateCache(e,t){var n,r,o;const i=gs(null===(n=e.account)||void 0===n?void 0:n.homeAccountId,null===(r=e.account)||void 0===r?void 0:r.environment,e.idToken,this.clientId,e.tenantId);let a;t.claims&&(a=await this.cryptoImpl.hashString(t.claims));const s={idToken:i,accessToken:ms(null===(o=e.account)||void 0===o?void 0:o.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,Xh,void 0,e.tokenType,void 0,t.sshKid,t.claims,a)};return this.saveCacheRecord(s)}async saveCacheRecord(e,t,n){try{await super.saveCacheRecord(e,t,n)}catch(Yg){if(Yg instanceof xc&&this.performanceClient&&n)try{const e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},n)}catch(Yg){}throw Yg}}}const _p="msal:initializeStart",xp="msal:initializeEnd",Rp="msal:accountAdded",Pp="msal:accountRemoved",Np="msal:activeAccountChanged",Op="msal:loginStart",Mp="msal:loginSuccess",Lp="msal:loginFailure",jp="msal:acquireTokenStart",Up="msal:acquireTokenSuccess",Dp="msal:acquireTokenFailure",qp="msal:acquireTokenFromNetworkStart",Fp="msal:ssoSilentStart",Hp="msal:ssoSilentSuccess",Bp="msal:ssoSilentFailure",zp="msal:acquireTokenByCodeStart",Kp="msal:acquireTokenByCodeSuccess",Wp="msal:acquireTokenByCodeFailure",Vp="msal:handleRedirectStart",Qp="msal:handleRedirectEnd",Gp="msal:popupOpened",Yp="msal:logoutStart",Jp="msal:logoutSuccess",$p="msal:logoutFailure",Xp="msal:logoutEnd",Zp="msal:restoreFromBFCache";class ef{constructor(e){this.eventCallbacks=new Map,this.logger=e||new ia({})}addEventCallback(e,t,n){if("undefined"!==typeof window){const r=n||Th();return this.eventCallbacks.has(r)?(this.logger.error("Event callback with id: ".concat(r," is already registered. Please provide a unique id or remove the existing callback and try again.")),null):(this.eventCallbacks.set(r,[e,t||[]]),this.logger.verbose("Event callback registered with id: ".concat(r)),r)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose("Event callback ".concat(e," removed."))}emitEvent(e,t,n,r){if("undefined"!==typeof window){const o={eventType:e,interactionType:t||null,payload:n||null,error:r||null,timestamp:Date.now()};this.eventCallbacks.forEach(((t,n)=>{let[r,i]=t;(0===i.length||i.includes(e))&&(this.logger.verbose("Emitting event to callback ".concat(n,": ").concat(e)),r.apply(null,[o]))}))}}}class tf extends ha{constructor(e,t,n,r,o){super(e,t,n),this.name="ServerError",this.errorNo=r,this.status=o,Object.setPrototypeOf(this,tf.prototype)}}class nf{static generateThrottlingStorageKey(e){return"".concat(Di,".").concat(JSON.stringify(e))}static preProcess(e,t){const n=nf.generateThrottlingStorageKey(t),r=e.getThrottlingCache(n);if(r){var o;if(r.throttleTime<Date.now())return void e.removeItem(n);throw new tf((null===(o=r.errorCodes)||void 0===o?void 0:o.join(" "))||zo.EMPTY_STRING,r.errorMessage,r.subError)}}static postProcess(e,t,n){if(nf.checkResponseStatus(n)||nf.checkResponseForRetryAfter(n)){const r={throttleTime:nf.calculateThrottleTime(parseInt(n.headers[Xo])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(nf.generateThrottlingStorageKey(t),r)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&(e.headers.hasOwnProperty(Xo)&&(e.status<200||e.status>=300))}static calculateThrottleTime(e){const t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||ji),n+Ui))}static removeThrottle(e,t,n,r){const o={clientId:t,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:r,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},i=this.generateThrottlingStorageKey(o);e.removeItem(i)}}const rf="client_id",of="redirect_uri",af="response_type",sf="token_type",cf="req_cnf",lf="return_spa_code",uf="x-client-xtra-sku",df="brk_client_id",hf="brk_redirect_uri";class pf{static validateRedirectUri(e){if(!e)throw tc(Ps)}static validatePrompt(e){const t=[];for(const n in fi)t.push(fi[n]);if(t.indexOf(e)<0)throw tc(Us)}static validateClaims(e){try{JSON.parse(e)}catch(Yg){throw tc(Ds)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw tc(Bs);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([gi.PLAIN,gi.S256].indexOf(e)<0)throw tc(Hs)}}class ff{constructor(e,t){this.parameters=new Map,this.performanceClient=t,this.correlationId=e}addResponseTypeCode(){this.parameters.set(af,encodeURIComponent(zo.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(af,encodeURIComponent("".concat(zo.TOKEN_RESPONSE_TYPE," ").concat(zo.ID_TOKEN_RESPONSE_TYPE)))}addResponseMode(e){this.parameters.set("response_mode",encodeURIComponent(e||vi.QUERY))}addNativeBroker(){this.parameters.set("nativebroker",encodeURIComponent("1"))}addScopes(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Go;!t||n.includes("openid")||e.includes("openid")||n.push("openid");const r=t?[...e||[],...n]:e||[],o=new rc(r);this.parameters.set("scope",encodeURIComponent(o.printScopes()))}addClientId(e){this.parameters.set(rf,encodeURIComponent(e))}addRedirectUri(e){pf.validateRedirectUri(e),this.parameters.set(of,encodeURIComponent(e))}addPostLogoutRedirectUri(e){pf.validateRedirectUri(e),this.parameters.set("post_logout_redirect_uri",encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set("id_token_hint",encodeURIComponent(e))}addDomainHint(e){this.parameters.set("domain_hint",encodeURIComponent(e))}addLoginHint(e){this.parameters.set("login_hint",encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(Zo,encodeURIComponent("UPN:".concat(e)))}addCcsOid(e){this.parameters.set(Zo,encodeURIComponent("Oid:".concat(e.uid,"@").concat(e.utid)))}addSid(e){this.parameters.set("sid",encodeURIComponent(e))}addClaims(e,t){const n=this.addClientCapabilitiesToClaims(e,t);pf.validateClaims(n),this.parameters.set("claims",encodeURIComponent(n))}addCorrelationId(e){this.parameters.set("client-request-id",encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set("x-client-SKU",e.sku),this.parameters.set("x-client-VER",e.version),e.os&&this.parameters.set("x-client-OS",e.os),e.cpu&&this.parameters.set("x-client-CPU",e.cpu)}addApplicationTelemetry(e){null!==e&&void 0!==e&&e.appName&&this.parameters.set("x-app-name",e.appName),null!==e&&void 0!==e&&e.appVersion&&this.parameters.set("x-app-ver",e.appVersion)}addPrompt(e){pf.validatePrompt(e),this.parameters.set("".concat("prompt"),encodeURIComponent(e))}addState(e){e&&this.parameters.set("state",encodeURIComponent(e))}addNonce(e){this.parameters.set("nonce",encodeURIComponent(e))}addCodeChallengeParams(e,t){if(pf.validateCodeChallengeParams(e,t),!e||!t)throw tc(Bs);this.parameters.set("code_challenge",encodeURIComponent(e)),this.parameters.set("code_challenge_method",encodeURIComponent(t))}addAuthorizationCode(e){this.parameters.set("code",encodeURIComponent(e))}addDeviceCode(e){this.parameters.set("device_code",encodeURIComponent(e))}addRefreshToken(e){this.parameters.set("refresh_token",encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set("code_verifier",encodeURIComponent(e))}addClientSecret(e){this.parameters.set("client_secret",encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set("client_assertion",encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set("client_assertion_type",encodeURIComponent(e))}addOboAssertion(e){this.parameters.set("assertion",encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set("requested_token_use",encodeURIComponent(e))}addGrantType(e){this.parameters.set("grant_type",encodeURIComponent(e))}addClientInfo(){this.parameters.set("client_info","1")}addExtraQueryParameters(e){Object.entries(e).forEach((e=>{let[t,n]=e;!this.parameters.has(t)&&n&&this.parameters.set(t,n)}))}addClientCapabilitiesToClaims(e,t){let n;if(e)try{n=JSON.parse(e)}catch(Yg){throw tc(Ds)}else n={};return t&&t.length>0&&(n.hasOwnProperty(hi)||(n[hi]={}),n[hi][pi]={values:t}),JSON.stringify(n)}addUsername(e){this.parameters.set(Bi,encodeURIComponent(e))}addPassword(e){this.parameters.set(zi,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(sf,Li.POP),this.parameters.set(cf,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(sf,Li.SSH),this.parameters.set(cf,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),this.parameters.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set("x-ms-lib-capability",qi)}addLogoutHint(e){this.parameters.set("logout_hint",encodeURIComponent(e))}addBrokerParameters(e){const t={};t[df]=e.brokerClientId,t[hf]=e.brokerRedirectUri,this.addExtraQueryParameters(t)}createQueryString(){const e=new Array;return this.parameters.forEach(((t,n)=>{e.push("".concat(n,"=").concat(t))})),function(e,t,n){if(!t)return;const r=e.get(rf);r&&e.has(df)&&(null===n||void 0===n||n.addFields({embeddedClientId:r,embeddedRedirectUri:e.get(of)},t))}(this.parameters,this.correlationId,this.performanceClient),e.join("&")}}async function gf(e,t,n,r,o,i,a){null===a||void 0===a||a.addQueueMeasurement(Hl,i);const s=sp.transformCIAMAuthority(cp(e)),c=new sp(s,t,n,r,o,i,a);try{return await ip(c.resolveEndpointsAsync.bind(c),Bl,o,a,i)(),c}catch(Yg){throw as(ya)}}class mf{constructor(e,t){this.config=function(e){let{authOptions:t,systemOptions:n,loggerOptions:r,cacheOptions:o,storageInterface:i,networkInterface:a,cryptoInterface:s,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:d,persistencePlugin:h,serializableCache:p}=e;const f=(0,Ee.A)((0,Ee.A)({},Oc),r);return{authOptions:(g=t,(0,Ee.A)({clientCapabilities:[],azureCloudOptions:Dc,skipAuthorityMetadataCache:!1,instanceAware:!1},g)),systemOptions:(0,Ee.A)((0,Ee.A)({},Nc),n),loggerOptions:f,cacheOptions:(0,Ee.A)((0,Ee.A)({},Mc),o),storageInterface:i||new Pc(t.clientId,ss,new ia(f)),networkInterface:a||Lc,cryptoInterface:s||ss,clientCredentials:c||Uc,libraryInfo:(0,Ee.A)((0,Ee.A)({},jc),l),telemetry:(0,Ee.A)((0,Ee.A)({},qc),u),serverTelemetryManager:d||null,persistencePlugin:h||null,serializableCache:p||null};var g}(e),this.logger=new ia(this.config.loggerOptions,cs,ls),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[Jo]=zo.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case bp:try{const n=ic(e.credential);t[Zo]="Oid:".concat(n.uid,"@").concat(n.utid)}catch(Yg){this.logger.verbose("Could not parse home account ID for CCS Header: "+Yg)}break;case Cp:t[Zo]="UPN: ".concat(e.credential)}return t}async executePostToTokenEndpoint(e,t,n,r,o,i){var a;i&&(null===(a=this.performanceClient)||void 0===a||a.addQueueMeasurement(i,o));const s=await this.sendPostRequest(r,e,{body:t,headers:n},o);return this.config.serverTelemetryManager&&s.status<500&&429!==s.status&&this.config.serverTelemetryManager.clearTelemetryCache(),s}async sendPostRequest(e,t,n,r){let o;nf.preProcess(this.cacheManager,e);try{var i,a;o=await ip(this.networkClient.sendPostRequestAsync.bind(this.networkClient),il,this.logger,this.performanceClient,r)(t,n);const e=o.headers||{};null===(i=this.performanceClient)||void 0===i||i.addFields({refreshTokenSize:(null===(a=o.body.refresh_token)||void 0===a?void 0:a.length)||0,httpVerToken:e[ti]||"",requestId:e[ei]||""},r)}catch(Yg){if(Yg instanceof ud){const t=Yg.responseHeaders;var s;if(t)null===(s=this.performanceClient)||void 0===s||s.addFields({httpVerToken:t[ti]||"",requestId:t[ei]||"",contentTypeHeader:t[Jo]||void 0,contentLengthHeader:t[$o]||void 0,httpStatus:Yg.httpStatus},r);throw Yg.error}throw Yg instanceof ha?Yg:as(wa)}return nf.postProcess(this.cacheManager,e,o),o}async updateAuthority(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Nl,t);const r="https://".concat(e,"/").concat(this.authority.tenant,"/"),o=await gf(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o}createTokenQueryParameters(e){const t=new ff(e.correlationId,this.performanceClient);return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.addCorrelationId(e.correlationId),t.createQueryString()}}const vf="sw";class yf{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Ul,e.correlationId);const r=await ip(this.generateKid.bind(this),Ul,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Dl,e.correlationId);return{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:vf}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,r){const{resourceRequestMethod:o,resourceRequestUri:i,shrClaims:a,shrNonce:s,shrOptions:c}=n,l=i?new bc(i):void 0,u=null===l||void 0===l?void 0:l.getUrlComponents();return this.cryptoUtils.signJwt((0,Ee.A)({at:e,ts:hs(),m:null===o||void 0===o?void 0:o.toUpperCase(),u:null===u||void 0===u?void 0:u.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:null===u||void 0===u?void 0:u.AbsolutePath,q:null!==u&&void 0!==u&&u.QueryString?[[],u.QueryString]:void 0,client_claims:a||void 0},r),t,c,n.correlationId)}}class wf{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class bf{constructor(e,t,n,r,o,i,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=o,this.persistencePlugin=i,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?as(Aa,"Cached State"):as(Aa,"Server State");let n,r;try{n=decodeURIComponent(e.state)}catch(Yg){throw as(ka,e.state)}try{r=decodeURIComponent(t)}catch(Yg){throw as(ka,e.state)}if(n!==r)throw as(Sa);if(e.error||e.error_description||e.suberror){const t=function(e){var t,n;const r="code=",o=null===(t=e.error_uri)||void 0===t?void 0:t.lastIndexOf(r);return o&&o>=0?null===(n=e.error_uri)||void 0===n?void 0:n.substring(o+5):void 0}(e);if(vp(e.error,e.error_description,e.suberror))throw new mp(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new tf(e.error||"",e.error_description,e.suberror,t)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){var n;const r="Error(s): ".concat(e.error_codes||zo.NOT_AVAILABLE," - Timestamp: ").concat(e.timestamp||zo.NOT_AVAILABLE," - Description: ").concat(e.error_description||zo.NOT_AVAILABLE," - Correlation ID: ").concat(e.correlation_id||zo.NOT_AVAILABLE," - Trace ID: ").concat(e.trace_id||zo.NOT_AVAILABLE),o=null!==(n=e.error_codes)&&void 0!==n&&n.length?e.error_codes[0]:void 0,i=new tf(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=Vo&&e.status<=Qo)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n".concat(i));if(t&&e.status&&e.status>=Ko&&e.status<=Wo)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n".concat(i));if(vp(e.error,e.error_description,e.suberror))throw new mp(e.error,e.error_description,e.suberror,e.timestamp||zo.EMPTY_STRING,e.trace_id||zo.EMPTY_STRING,e.correlation_id||zo.EMPTY_STRING,e.claims||zo.EMPTY_STRING,o);throw i}}async handleServerTokenResponse(e,t,n,r,o,i,a,s,c){var l;let u,d;if(null===(l=this.performanceClient)||void 0===l||l.addQueueMeasurement(ql,e.correlation_id),e.id_token){if(u=us(e.id_token||zo.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&u.nonce!==o.nonce)throw as(Ta);if(r.maxAge||0===r.maxAge){const e=u.auth_time;if(!e)throw as(Ea);ds(e,r.maxAge)}}this.homeAccountIdentifier=vc.generateHomeAccountId(e.client_info||zo.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u),o&&o.state&&(d=wp.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||r.sshKid||void 0;const h=this.generateCacheRecord(e,t,n,r,u,i,o);let p;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new wf(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(p)),a&&!s&&h.account){const e=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(e,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await bf.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,u,d,void 0,c)}await this.cacheStorage.saveCacheRecord(h,r.storeInCache,r.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&p&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(p))}return bf.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,u,d,e,c)}generateCacheRecord(e,t,n,r,o,i,a){const s=t.getPreferredCache();if(!s)throw as(Fa);const c=mc(o);let l,u;e.id_token&&o&&(l=gs(this.homeAccountIdentifier,s,e.id_token,this.clientId,c||""),u=Cf(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o,e.client_info,s,c,a,void 0,this.logger));let d=null;if(e.access_token){const o=e.scope?rc.fromString(e.scope):new rc(r.scopes||[]),a=("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,l=("string"===typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,u=("string"===typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=n+a,p=h+l,f=u&&u>0?n+u:void 0;d=ms(this.homeAccountIdentifier,s,e.access_token,this.clientId,c||t.tenant||"",o.printScopes(),h,p,this.cryptoObj.base64Decode,f,e.token_type,i,e.key_id,r.claims,r.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;if(e.refresh_token_expires_in){t=n+("string"===typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)}h=vs(this.homeAccountIdentifier,s,e.refresh_token,this.clientId,e.foci,i,t)}let p=null;return e.foci&&(p={clientId:this.clientId,environment:s,familyId:e.foci}),{account:u,idToken:l,accessToken:d,refreshToken:h,appMetadata:p}}static async generateAuthenticationResult(e,t,n,r,o,i,a,s,c){var l,u,d,h,p;let f,g,m=zo.EMPTY_STRING,v=[],y=null,w=zo.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType!==Li.POP||o.popKid)m=n.accessToken.secret;else{const t=new yf(e),{secret:r,keyId:i}=n.accessToken;if(!i)throw as(Xa);m=await t.signPopToken(r,i,o)}v=rc.fromString(n.accessToken.target).asArray(),y=new Date(1e3*Number(n.accessToken.expiresOn)),f=new Date(1e3*Number(n.accessToken.extendedExpiresOn)),n.accessToken.refreshOn&&(g=new Date(1e3*Number(n.accessToken.refreshOn)))}n.appMetadata&&(w=n.appMetadata.familyId===Ii?Ii:"");const b=(null===i||void 0===i?void 0:i.oid)||(null===i||void 0===i?void 0:i.sub)||"",C=(null===i||void 0===i?void 0:i.tid)||"";null!==s&&void 0!==s&&s.spa_accountid&&n.account&&(n.account.nativeAccountId=null===s||void 0===s?void 0:s.spa_accountid);const k=n.account?dc(n.account.getAccountInfo(),void 0,i,null===(l=n.idToken)||void 0===l?void 0:l.secret):null;return{authority:t.canonicalAuthority,uniqueId:b,tenantId:C,scopes:v,account:k,idToken:(null===n||void 0===n||null===(u=n.idToken)||void 0===u?void 0:u.secret)||"",idTokenClaims:i||{},accessToken:m,fromCache:r,expiresOn:y,extExpiresOn:f,refreshOn:g,correlationId:o.correlationId,requestId:c||zo.EMPTY_STRING,familyId:w,tokenType:(null===(d=n.accessToken)||void 0===d?void 0:d.tokenType)||zo.EMPTY_STRING,state:a?a.userRequestState:zo.EMPTY_STRING,cloudGraphHostName:(null===(h=n.account)||void 0===h?void 0:h.cloudGraphHostName)||zo.EMPTY_STRING,msGraphHost:(null===(p=n.account)||void 0===p?void 0:p.msGraphHost)||zo.EMPTY_STRING,code:null===s||void 0===s?void 0:s.spa_code,fromNativeBroker:!1}}}function Cf(e,t,n,r,o,i,a,s,c,l,u){null===u||void 0===u||u.verbose("setCachedAccount called");const d=e.getAccountKeys().find((e=>e.startsWith(n)));let h=null;d&&(h=e.getAccount(d,u));const p=h||vc.createAccount({homeAccountId:n,idTokenClaims:o,clientInfo:i,environment:a,cloudGraphHostName:null===c||void 0===c?void 0:c.cloud_graph_host_name,msGraphHost:null===c||void 0===c?void 0:c.msgraph_host,nativeAccountId:l},t,r),f=p.tenantProfiles||[],g=s||p.realm;if(g&&!f.find((e=>e.tenantId===g))){const e=uc(n,p.localAccountId,g,o);f.push(e)}return p.tenantProfiles=f,p}async function kf(e,t,n){if("string"===typeof e)return e;return e({clientId:t,tokenEndpoint:n})}class Sf extends mf{constructor(e,t){var n;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=null===(n=this.config.authOptions.authority.options.OIDCOptions)||void 0===n?void 0:n.defaultScopes}async getAuthCodeUrl(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(xl,e.correlationId);const n=await ip(this.createAuthCodeUrlQueryString.bind(this),jl,this.logger,this.performanceClient,e.correlationId)(e);return bc.appendQueryString(this.authority.authorizationEndpoint,n)}async acquireToken(e,t){var n,r;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Ol,e.correlationId),!e.code)throw as(Pa);const o=hs(),i=await ip(this.executeTokenRequest.bind(this),Ml,this.logger,this.performanceClient,e.correlationId)(this.authority,e),a=null===(r=i.headers)||void 0===r?void 0:r[ei],s=new bf(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(i.body),ip(s.handleServerTokenResponse.bind(s),ql,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,o,e,t,void 0,void 0,void 0,a)}handleFragmentResponse(e,t){if(new bf(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw as(Ya);return e}getLogoutUri(e){if(!e)throw tc(Fs);const t=this.createLogoutUrlQueryString(e);return bc.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var n,r;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Ml,t.correlationId);const o=this.createTokenQueryParameters(t),i=bc.appendQueryString(e.tokenEndpoint,o),a=await ip(this.createTokenRequestBody.bind(this),Ll,this.logger,this.performanceClient,t.correlationId)(t);let s;if(t.clientInfo)try{const e=oc(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:"".concat(e.uid).concat(Ai).concat(e.utid),type:bp}}catch(Yg){this.logger.verbose("Could not parse client info for CCS Header: "+Yg)}const c=this.createTokenRequestHeaders(s||t.ccsCredential),l={clientId:(null===(r=t.tokenBodyParameters)||void 0===r?void 0:r.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return ip(this.executePostToTokenEndpoint.bind(this),sl,this.logger,this.performanceClient,t.correlationId)(i,a,c,l,t.correlationId,sl)}async createTokenRequestBody(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Ll,e.correlationId);const r=new ff(e.correlationId,this.performanceClient);if(r.addClientId(e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[rf])||this.config.authOptions.clientId),this.includeRedirectUri?r.addRedirectUri(e.redirectUri):pf.validateRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,this.oidcDefaultScopes),r.addAuthorizationCode(e.code),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!Fc(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&r.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;r.addClientAssertion(await kf(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(t.assertionType)}if(r.addGrantType(yi),r.addClientInfo(),e.authenticationScheme===Li.POP){const t=new yf(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await ip(t.generateCnf.bind(t),Ul,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}r.addPopToken(n)}else if(e.authenticationScheme===Li.SSH){if(!e.sshJwk)throw tc(Vs);r.addSshJwk(e.sshJwk)}let o;if((!nc.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=oc(e.clientInfo,this.cryptoUtils.base64Decode);o={credential:"".concat(t.uid).concat(Ai).concat(t.utid),type:bp}}catch(Yg){this.logger.verbose("Could not parse client info for CCS Header: "+Yg)}else o=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case bp:try{const e=ic(o.credential);r.addCcsOid(e)}catch(Yg){this.logger.verbose("Could not parse home account ID for CCS Header: "+Yg)}break;case Cp:r.addCcsUpn(o.credential)}return e.embeddedClientId&&r.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[lf]||r.addExtraQueryParameters({[lf]:"1"}),r.createQueryString()}async createAuthCodeUrlQueryString(e){var t,n;const r=e.correlationId||this.config.cryptoInterface.createNewGuid();null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(jl,r);const o=new ff(r,this.performanceClient);o.addClientId(e.embeddedClientId||(null===(n=e.extraQueryParameters)||void 0===n?void 0:n[rf])||this.config.authOptions.clientId);const i=[...e.scopes||[],...e.extraScopesToConsent||[]];if(o.addScopes(i,!0,this.oidcDefaultScopes),o.addRedirectUri(e.redirectUri),o.addCorrelationId(r),o.addResponseMode(e.responseMode),o.addResponseTypeCode(),o.addLibraryInfo(this.config.libraryInfo),Fc(this.config)||o.addApplicationTelemetry(this.config.telemetry.application),o.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&o.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&o.addPrompt(e.prompt),e.domainHint&&o.addDomainHint(e.domainHint),e.prompt!==fi.SELECT_ACCOUNT)if(e.sid&&e.prompt===fi.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),o.addSid(e.sid);else if(e.account){const t=this.extractAccountSid(e.account);let n=this.extractLoginHint(e.account);if(n&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),n=null),n){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),o.addLoginHint(n);try{const t=ic(e.account.homeAccountId);o.addCcsOid(t)}catch(Yg){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t&&e.prompt===fi.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),o.addSid(t);try{const t=ic(e.account.homeAccountId);o.addCcsOid(t)}catch(Yg){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),o.addLoginHint(e.account.username);try{const t=ic(e.account.homeAccountId);o.addCcsOid(t)}catch(Yg){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&o.addNonce(e.nonce),e.state&&o.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.embeddedClientId&&o.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),this.addExtraQueryParams(e,o),e.nativeBroker&&(o.addNativeBroker(),e.authenticationScheme===Li.POP)){const t=new yf(this.cryptoUtils);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await ip(t.generateCnf.bind(t),Ul,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}o.addPopToken(n)}return o.createQueryString()}createLogoutUrlQueryString(e){const t=new ff(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,t),t.createQueryString()}addExtraQueryParams(e,t){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.sid)||null}extractLoginHint(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.login_hint)||null}}function Af(e){const{skus:t,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=e,a=new Map([[0,[n,r]],[2,[o,i]]]);let s=[];if(null!==t&&void 0!==t&&t.length){if(s=t.split(","),s.length<4)return t}else s=Array.from({length:4},(()=>"|"));return a.forEach(((e,t)=>{var n,r;2===e.length&&null!==(n=e[0])&&void 0!==n&&n.length&&null!==(r=e[1])&&void 0!==r&&r.length&&function(e){const{skuArr:t,index:n,skuName:r,skuVersion:o}=e;if(n>=t.length)return;t[n]=[r,o].join("|")}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})})),s.join(",")}class Tf{constructor(e,t){this.cacheOutcome=Xi,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||zo.EMPTY_STRING,this.wrapperVer=e.wrapperVer||zo.EMPTY_STRING,this.telemetryCacheKey=Mi.CACHE_KEY+Si+e.clientId}generateCurrentRequestHeaderValue(){const e="".concat(this.apiId).concat(Mi.VALUE_SEPARATOR).concat(this.cacheOutcome),t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();null!==n&&void 0!==n&&n.length&&t.push("broker_error=".concat(n));const r=t.join(Mi.VALUE_SEPARATOR),o=[e,this.getRegionDiscoveryFields()].join(Mi.VALUE_SEPARATOR);return[Mi.SCHEMA_VERSION,o,r].join(Mi.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=Tf.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(Mi.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(Mi.VALUE_SEPARATOR),o=e.errors.length,i=[o,t<o?Mi.OVERFLOW_TRUE:Mi.OVERFLOW_FALSE].join(Mi.VALUE_SEPARATOR);return[Mi.SCHEMA_VERSION,e.cacheHits,n,r,i].join(Mi.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=Mi.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ha?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Mi.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=Tf.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}}static maxErrorsToSend(e){let t,n=0,r=0;const o=e.errors.length;for(t=0;t<o;t++){const o=e.failedRequests[2*t]||zo.EMPTY_STRING,i=e.failedRequests[2*t+1]||zo.EMPTY_STRING,a=e.errors[t]||zo.EMPTY_STRING;if(r+=o.toString().length+i.toString().length+a.length+3,!(r<Mi.MAX_LAST_HEADER_BYTES))break;n+=1}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||zo.EMPTY_STRING),e.push(this.regionSource||zo.EMPTY_STRING),e.push(this.regionOutcome||zo.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return Af(e)}}class Ef{constructor(e,t,n,r,o,i,a,s,c){this.config=e,this.browserStorage=t,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=i,this.nativeMessageHandler=s,this.correlationId=c||Th(),this.logger=r.clone(vu,zh,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){vc.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(vc.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(t){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch(Yg){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return bc.getAbsoluteUrl(t,Lh())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Tf(n,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,n=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(nl,this.correlationId);const r={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},o=e.requestAuthority||this.config.auth.authority,i=null!==n&&void 0!==n&&n.length?"true"===n:this.config.auth.instanceAware,a=t&&i?this.config.auth.authority.replace(bc.getDomainFromUrl(o),t.environment):o,s=sp.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),c=await ip(gf,Hl,this.logger,this.performanceClient,this.correlationId)(s,this.config.system.networkClient,this.browserStorage,r,this.logger,this.correlationId,this.performanceClient);if(t&&!c.isAlias(t.environment))throw tc(Xs);return c}}async function If(e,t,n){e.addQueueMeasurement(ou,n);const r=op(_f,iu,t,e,n)(e,t,n);return{verifier:r,challenge:await ip(xf,au,t,e,n)(r,e,t,n)}}function _f(e,t,n){try{const r=new Uint8Array(32);op(Sh,cu,t,e,n)(r);return fh(r)}catch(Yg){throw lh(hd)}}async function xf(e,t,n,r){t.addQueueMeasurement(au,r);try{const o=await ip(kh,su,n,t,r)(e,t,r);return fh(new Uint8Array(o))}catch(Yg){throw lh(hd)}}async function Rf(e,t,n,r){n.addQueueMeasurement(vl,e.correlationId);const o=e.authority||t.auth.authority,i=[...e&&e.scopes||[]],a=(0,Ee.A)((0,Ee.A)({},e),{},{correlationId:e.correlationId,authority:o,scopes:i});if(a.authenticationScheme){if(a.authenticationScheme===Li.SSH){if(!e.sshJwk)throw tc(Vs);if(!e.sshKid)throw tc(Qs)}r.verbose('Authentication Scheme set to "'.concat(a.authenticationScheme,'" as configured in Auth request'))}else a.authenticationScheme=Li.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!nc.isEmptyObj(e.claims)&&(a.requestedClaimsHash=await Ih(e.claims)),a}async function Pf(e,t,n,r,o){r.addQueueMeasurement(yl,e.correlationId);const i=await ip(Rf,vl,o,r,e.correlationId)(e,n,r,o);return(0,Ee.A)((0,Ee.A)((0,Ee.A)({},e),i),{},{account:t,forceRefresh:e.forceRefresh||!1})}class Nf extends Ef{async initializeAuthorizationCodeRequest(e){this.performanceClient.addQueueMeasurement(_l,this.correlationId);const t=await ip(If,ou,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),n=(0,Ee.A)((0,Ee.A)({},e),{},{redirectUri:e.redirectUri,code:zo.EMPTY_STRING,codeVerifier:t.verifier});return e.codeChallenge=t.challenge,e.codeChallengeMethod=zo.S256_CODE_CHALLENGE_METHOD,n}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",null===e||void 0===e?void 0:e.correlationId);const t=(0,Ee.A)({correlationId:this.correlationId||Th()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const n=this.getLogoutHintFromIdTokenClaims(e.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=bc.getAbsoluteUrl(e.postLogoutRedirectUri,Lh())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=bc.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Lh())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=bc.getAbsoluteUrl(Lh(),Lh())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(Tl,this.correlationId);const t=await ip(this.getClientConfiguration.bind(this),El,this.logger,this.performanceClient,this.correlationId)(e);return new Sf(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:i}=e;this.performanceClient.addQueueMeasurement(El,this.correlationId);const a=await ip(this.getDiscoveredAuthority.bind(this),nl,this.logger,this.performanceClient,this.correlationId)({requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:i}),s=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:s.loggerCallback,piiLoggingEnabled:s.piiLoggingEnabled,logLevel:s.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:vu,version:zh,cpu:zo.EMPTY_STRING,os:zo.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(Il,this.correlationId);const n=this.getRedirectUri(e.redirectUri),r={interactionType:t},o=wp.setRequestState(this.browserCrypto,e&&e.state||zo.EMPTY_STRING,r),i=await ip(Rf,vl,this.logger,this.performanceClient,this.correlationId)((0,Ee.A)((0,Ee.A)({},e),{},{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=(0,Ee.A)((0,Ee.A)({},i),{},{redirectUri:n,state:o,nonce:e.nonce||Th(),responseMode:this.config.auth.OIDCOptions.serverResponseType});if(e.loginHint||e.sid)return a;const s=e.account||this.browserStorage.getActiveAccount();if(s&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: ".concat(s.homeAccountId),this.correlationId),a.account=s),!a.loginHint&&!s){const e=this.browserStorage.getLegacyLoginHint();e&&(a.loginHint=e)}return a}}function Of(e){if(null==e)throw new TypeError("Cannot destructure "+e)}const Mf="user_switch",Lf={[Mf]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class jf extends ha{constructor(e,t,n){super(e,t),Object.setPrototypeOf(this,jf.prototype),this.name="NativeAuthError",this.ext=n}}function Uf(e){return!(!e.ext||!e.ext.status||"PERSISTENT_ERROR"!==e.ext.status&&"DISABLED"!==e.ext.status)||(!(!e.ext||!e.ext.error||-2147186943!==e.ext.error)||"ContentError"===e.errorCode)}function Df(e,t,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return yp(up);case"USER_INTERACTION_REQUIRED":return new mp(e,t);case"USER_CANCEL":return lh(Sd);case"NO_NETWORK":return lh(Fd)}return new jf(e,Lf[e]||t,n)}class qf extends mf{constructor(e,t){super(e,t)}async acquireToken(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(ll,e.correlationId);const r=hs(),o=await ip(this.executeTokenRequest.bind(this),cl,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=null===(n=o.headers)||void 0===n?void 0:n[ei],a=new bf(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(o.body),ip(a.handleServerTokenResponse.bind(a),ql,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){var t;if(!e)throw tc(qs);if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(dl,e.correlationId),!e.account)throw as(Da);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await ip(this.acquireTokenWithCachedRefreshToken.bind(this),ul,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(Yg){const n=Yg instanceof mp&&Yg.errorCode===lp,r=Yg instanceof tf&&Yg.errorCode===Fi&&Yg.subError===Hi;if(n||r)return ip(this.acquireTokenWithCachedRefreshToken.bind(this),ul,this.logger,this.performanceClient,e.correlationId)(e,!1);throw Yg}return ip(this.acquireTokenWithCachedRefreshToken.bind(this),ul,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(ul,e.correlationId);const r=op(this.cacheManager.getRefreshToken.bind(this.cacheManager),ru,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!r)throw yp(lp);if(r.expiresOn&&ps(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw yp(dp);const o=(0,Ee.A)((0,Ee.A)({},e),{},{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Li.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:bp}});try{return await ip(this.acquireToken.bind(this),ll,this.logger,this.performanceClient,e.correlationId)(o)}catch(Yg){if(Yg instanceof mp&&Yg.subError===hp){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const e=fs(r);this.cacheManager.removeRefreshToken(e)}throw Yg}}async executeTokenRequest(e,t){var n,r;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(cl,e.correlationId);const o=this.createTokenQueryParameters(e),i=bc.appendQueryString(t.tokenEndpoint,o),a=await ip(this.createTokenRequestBody.bind(this),hl,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),c={clientId:(null===(r=e.tokenBodyParameters)||void 0===r?void 0:r.clientId)||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return ip(this.executePostToTokenEndpoint.bind(this),al,this.logger,this.performanceClient,e.correlationId)(i,a,s,c,e.correlationId,al)}async createTokenRequestBody(e){var t,n,r;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(hl,e.correlationId);const o=e.correlationId,i=new ff(o,this.performanceClient);if(i.addClientId(e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[rf])||this.config.authOptions.clientId),e.redirectUri&&i.addRedirectUri(e.redirectUri),i.addScopes(e.scopes,!0,null===(r=this.config.authOptions.authority.options.OIDCOptions)||void 0===r?void 0:r.defaultScopes),i.addGrantType(wi),i.addClientInfo(),i.addLibraryInfo(this.config.libraryInfo),i.addApplicationTelemetry(this.config.telemetry.application),i.addThrottling(),this.serverTelemetryManager&&!Fc(this.config)&&i.addServerTelemetry(this.serverTelemetryManager),i.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&i.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;i.addClientAssertion(await kf(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),i.addClientAssertionType(t.assertionType)}if(e.authenticationScheme===Li.POP){const t=new yf(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await ip(t.generateCnf.bind(t),Ul,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}i.addPopToken(n)}else if(e.authenticationScheme===Li.SSH){if(!e.sshJwk)throw tc(Vs);i.addSshJwk(e.sshJwk)}if((!nc.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&i.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case bp:try{const t=ic(e.ccsCredential.credential);i.addCcsOid(t)}catch(Yg){this.logger.verbose("Could not parse home account ID for CCS Header: "+Yg)}break;case Cp:i.addCcsUpn(e.ccsCredential.credential)}return e.embeddedClientId&&i.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&i.addExtraQueryParameters(e.tokenBodyParameters),i.createQueryString()}}class Ff extends mf{constructor(e,t){super(e,t)}async acquireToken(e){try{var t;const[n,r]=await this.acquireCachedToken((0,Ee.A)((0,Ee.A)({},e),{},{scopes:null!==(t=e.scopes)&&void 0!==t&&t.length?e.scopes:[...Go]}));if(r===na){this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed.");new qf(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch((()=>{}))}return n}catch(Yg){if(Yg instanceof is&&Yg.errorCode===Va){return new qf(this.config,this.performanceClient).acquireTokenByRefreshToken(e)}throw Yg}}async acquireCachedToken(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(fl,e.correlationId);let n=Xi;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!nc.isEmptyObj(e.claims))throw this.setCacheOutcome(Zi,e.correlationId),as(Va);if(!e.account)throw as(Da);const r=e.account.tenantId||function(e){var t;const n=null===(t=new bc(e).getUrlComponents().PathSegments.slice(-1)[0])||void 0===t?void 0:t.toLowerCase();switch(n){case li:case ui:case di:return;default:return n}}(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient,e.correlationId);if(!i)throw this.setCacheOutcome(ea,e.correlationId),as(Va);if(a=i.cachedAt,Number(a)>hs()||ps(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(ta,e.correlationId),as(Va);var a;i.refreshOn&&ps(i.refreshOn,0)&&(n=na);const s=e.authority||this.authority.getPreferredCache(),c={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await ip(this.generateResultFromCacheRecord.bind(this),gl,this.logger,this.performanceClient,e.correlationId)(c,e),n]}setCacheOutcome(e,t){var n,r;null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(e),null===(r=this.performanceClient)||void 0===r||r.addFields({cacheOutcome:e},t),e!==Xi&&this.logger.info("Token refresh is required due to cache outcome: ".concat(e))}async generateResultFromCacheRecord(e,t){var n;let r;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(gl,t.correlationId),e.idToken&&(r=us(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){var o;const e=null===(o=r)||void 0===o?void 0:o.auth_time;if(!e)throw as(Ea);ds(e,t.maxAge)}return bf.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}class Hf extends Nf{async acquireToken(e){this.performanceClient.addQueueMeasurement($c,e.correlationId);const t=this.initializeServerTelemetryManager(Yu),n=await ip(this.getClientConfiguration.bind(this),El,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),r=new Ff(n,this.performanceClient);this.logger.verbose("Silent auth client created");try{const t=(await ip(r.acquireCachedToken.bind(r),fl,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(o){throw o instanceof ch&&o.errorCode===Wd&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),o}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(null===t||void 0===t?void 0:t.account)}}const Bf=["prompt"],zf=["scopes"];class Kf extends Ef{constructor(e,t,n,r,o,i,a,s,c,l,u,d){var h;super(e,t,n,r,o,i,s,c,d),this.apiId=a,this.accountId=l,this.nativeMessageHandler=c,this.nativeStorageManager=u,this.silentCacheClient=new Hf(e,this.nativeStorageManager,n,r,o,i,s,c,d),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const p=this.nativeMessageHandler.getExtensionId()===wu?"chrome":null!==(h=this.nativeMessageHandler.getExtensionId())&&void 0!==h&&h.length?"unknown":void 0;this.skus=Tf.makeExtraSkuString({libraryName:vu,libraryVersion:zh,extensionName:p,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=(0,Ee.A)((0,Ee.A)({},e.extraParameters),{},{[uf]:this.skus})}async acquireToken(e){this.performanceClient.addQueueMeasurement(ol,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const t=this.performanceClient.startMeasurement(ol,e.correlationId),n=hs();try{const r=await this.initializeNativeRequest(e);try{const e=await this.acquireTokensFromCache(this.accountId,r);return t.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(Yg){this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const o=Object.assign({},(Of(r),r)),i={method:Su,request:o},a=await this.nativeMessageHandler.sendMessage(i),s=this.validateNativeResponse(a);return await this.handleNativeResponse(s,r,n).then((e=>(t.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),e))).catch((e=>{throw t.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e}))}catch(Yg){throw Yg instanceof jf&&this.serverTelemetryManager.setNativeBrokerErrorCode(Yg.errorCode),Yg}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:rc.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),as(Ha);const n=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!n)throw as(Ha);try{const e=this.createSilentCacheRequest(t,n),r=await this.silentCacheClient.acquireToken(e),o=(0,Ee.A)((0,Ee.A)({},n),{},{idTokenClaims:null===r||void 0===r?void 0:r.idTokenClaims,idToken:null===r||void 0===r?void 0:r.idToken});return(0,Ee.A)((0,Ee.A)({},r),{},{account:o})}catch(Yg){throw Yg}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const n=Object.assign({},(Of(e),e));delete n.onRedirectNavigate;const r=await this.initializeNativeRequest(n),o={method:Su,request:r};try{const e=await this.nativeMessageHandler.sendMessage(o);this.validateNativeResponse(e)}catch(Yg){if(Yg instanceof jf&&(this.serverTelemetryManager.setNativeBrokerErrorCode(Yg.errorCode),Uf(Yg)))throw Yg}this.browserStorage.setTemporaryCache(qu,JSON.stringify(r),!0);const i={apiId:Ku,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(a,i)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const n=this.browserStorage.getCachedNativeRequest();if(!n)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(null===e||void 0===e||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:r}=n,o=ac(n,Bf);r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(qu));const i={method:Su,request:o},a=hs();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const e=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(e);const t=this.handleNativeResponse(e,o,a);this.browserStorage.setInteractionInProgress(!1);const n=await t;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),n}catch(Yg){throw this.browserStorage.setInteractionInProgress(!1),Yg}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,n){var r;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const o=us(e.id_token,Xh),i=this.createHomeAccountIdentifier(e,o);if(i!==(null===(r=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId}))||void 0===r?void 0:r.homeAccountId)&&e.account.id!==t.accountId)throw Df(Mf);const a=await this.getDiscoveredAuthority({requestAuthority:t.authority}),s=Cf(this.browserStorage,a,i,Xh,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger),c=await this.generateAuthenticationResult(e,t,o,s,a.canonicalAuthority,n);return this.cacheAccount(s),this.cacheNativeTokens(e,t,i,o,e.access_token,c.tenantId,n),c}createHomeAccountIdentifier(e,t){return vc.generateHomeAccountId(e.client_info||zo.EMPTY_STRING,hc,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?rc.fromString(e.scope):rc.fromString(t.scope)}async generatePopAccessToken(e,t){if(t.tokenType===Li.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const n=new yf(this.browserCrypto),r={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw as(Xa);return n.signPopToken(e.access_token,t.keyId,r)}return e.access_token}async generateAuthenticationResult(e,t,n,r,o,i){const a=this.addTelemetryFromNativeResponse(e),s=e.scope?rc.fromString(e.scope):rc.fromString(t.scope),c=e.account.properties||{},l=c.UID||n.oid||n.sub||zo.EMPTY_STRING,u=c.TenantId||n.tid||zo.EMPTY_STRING,d=dc(r.getAccountInfo(),void 0,n,e.id_token);d.nativeAccountId!==e.account.id&&(d.nativeAccountId=e.account.id);const h=await this.generatePopAccessToken(e,t),p=t.tokenType===Li.POP?Li.POP:Li.BEARER;return{authority:o,uniqueId:l,tenantId:u,scopes:s.asArray(),account:d,idToken:e.id_token,idTokenClaims:n,accessToken:h,fromCache:!!a&&this.isResponseFromCache(a),expiresOn:new Date(1e3*Number(i+e.expires_in)),tokenType:p,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch((e=>{this.logger.error("Error occurred while removing account context from browser storage. ".concat(e))}))}cacheNativeTokens(e,t,n,r,o,i,a){const s=gs(n,t.authority,e.id_token||"",t.clientId,r.tid||""),c=a+(t.tokenType===Li.POP?zo.SHR_NONCE_VALIDITY:("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),l=this.generateScopes(e,t),u={idToken:s,accessToken:ms(n,t.authority,o,t.clientId,r.tid||i,l.printScopes(),c,0,Xh,void 0,t.tokenType,void 0,t.keyId)};this.nativeStorageManager.saveCacheRecord(u,t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw pa(la,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch(Yg){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return"undefined"===typeof e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const n=new bc(t);n.validateAsUri();const{scopes:r}=e,o=ac(e,zf),i=new rc(r||[]);i.appendScopes(Go);const a=(0,Ee.A)((0,Ee.A)({},o),{},{accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:(()=>{switch(this.apiId){case Vu:case Yu:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),fi.NONE}if(e.prompt)switch(e.prompt){case fi.NONE:case fi.CONSENT:case fi.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace("initializeNativeRequest: prompt = ".concat(e.prompt," is not compatible with native flow")),lh(th)}else this.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:(0,Ee.A)((0,Ee.A)({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(a.signPopToken&&e.popKid)throw lh(rh);if(this.handleExtraBrokerParams(a),a.extraParameters=a.extraParameters||{},a.extraParameters.telemetry=bu,e.authenticationScheme===Li.POP){const t={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},n=new yf(this.browserCrypto);let r;if(a.keyId)r=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:a.keyId})),a.signPopToken=!1;else{const o=await ip(n.generateCnf.bind(n),Ul,this.logger,this.performanceClient,e.correlationId)(t,this.logger);r=o.reqCnfString,a.keyId=o.kid,a.signPopToken=!0}a.reqCnf=r}return this.addRequestSKUs(a),a}handleExtraBrokerParams(e){var t;const n=e.extraParameters&&e.extraParameters.hasOwnProperty(df)&&e.extraParameters.hasOwnProperty(hf)&&e.extraParameters.hasOwnProperty(rf);if(!e.embeddedClientId&&!n)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[hf],r=e.extraParameters[rf]),e.extraParameters={child_client_id:r,child_redirect_uri:o},null===(t=this.performanceClient)||void 0===t||t.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}}class Wf{constructor(e,t,n,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(eu)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const t={channel:yu,extensionId:this.extensionId,responseId:Th(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii("NativeMessageHandler - Sending request to browser extension: ".concat(JSON.stringify(t))),this.messageChannel.port1.postMessage(t),new Promise(((e,n)=>{this.resolvers.set(t.responseId,{resolve:e,reject:n})}))}static async createProvider(e,t,n){e.trace("NativeMessageHandler - createProvider called.");try{const r=new Wf(e,t,n,wu);return await r.sendHandshakeRequest(),r}catch(Yg){const o=new Wf(e,t,n);return await o.sendHandshakeRequest(),o}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:yu,extensionId:this.extensionId,responseId:Th(),body:{method:Cu}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise(((t,n)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:n}),this.timeoutId=window.setTimeout((()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(lh($d)),this.handshakeResolvers.delete(e.responseId)}),this.handshakeTimeoutMs)}))}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===yu&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===Cu){const e=this.handshakeResolvers.get(t.responseId);if(!e)return void this.logger.trace("NativeMessageHandler.onWindowMessage - resolver can't be found for request ".concat(t.responseId));this.logger.verbose(t.extensionId?"Extension with id: ".concat(t.extensionId," not installed"):"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(lh(Xd))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,n=this.resolvers.get(t.responseId),r=this.handshakeResolvers.get(t.responseId);try{const e=t.body.method;if(e===Au){if(!n)return;const e=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii("NativeMessageHandler - Received response from browser extension: ".concat(JSON.stringify(e))),"Success"!==e.status)n.reject(Df(e.code,e.description,e.ext));else{if(!e.result)throw pa(la,"Event does not contain result.");e.result.code&&e.result.description?n.reject(Df(e.result.code,e.result.description,e.result.ext)):n.resolve(e.result)}this.resolvers.delete(t.responseId)}else if(e===ku){if(!r)return void this.logger.trace("NativeMessageHandler.onChannelMessage - resolver can't be found for request ".concat(t.responseId));clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose("NativeMessageHandler - Received HandshakeResponse from extension: ".concat(this.extensionId)),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(o){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: ".concat(o)),this.logger.errorPii("Unable to parse ".concat(e)),n?n.reject(o):r&&r.reject(o)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,t,n,r){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!n)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(r)switch(r){case Li.BEARER:case Li.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class Vf{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async handleCodeResponse(e,t){let n;this.performanceClient.addQueueMeasurement(Pl,t.correlationId);try{n=this.authModule.handleFragmentResponse(e,t.state)}catch(Yg){throw Yg instanceof tf&&Yg.subError===Sd?lh(Sd):Yg}return ip(this.handleCodeResponseFromServer.bind(this),Rl,this.logger,this.performanceClient,t.correlationId)(n,t)}async handleCodeResponseFromServer(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.performanceClient.addQueueMeasurement(Rl,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await ip(this.authModule.updateAuthority.bind(this.authModule),Nl,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),n&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await ip(this.authModule.acquireToken.bind(this.authModule),Ol,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:bp}:e.loginHint?{credential:e.loginHint,type:Cp}:null}}function Qf(e,t,n){const r=wc(e);if(!r)throw yc(e)?(n.error("A ".concat(t," is present in the iframe but it does not contain known properties. It's likely that the ").concat(t," has been replaced by code running on the redirectUri page.")),n.errorPii("The ".concat(t," detected is: ").concat(e)),lh(vd)):(n.error("The request has returned to the redirectUri but a ".concat(t," is not present. It's likely that the ").concat(t," has been removed or the page has been redirected by code running on the redirectUri page.")),lh(gd));return r}class Gf extends Nf{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,a,c,l),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=s}acquireToken(e){try{var t;const n={popupName:this.generatePopupName(e.scopes||Go,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:null!==(t=e.popupWindowParent)&&void 0!==t?t:window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,n)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),n.popup=this.openSizedPopup("about:blank",n),this.acquireTokenPopupAsync(e,n))}catch(Yg){return Promise.reject(Yg)}}logout(e){try{var t;this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(null===e||void 0===e?void 0:e.popupWindowAttributes)||{},popupWindowParent:null!==(t=null===e||void 0===e?void 0:e.popupWindowParent)&&void 0!==t?t:window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,o,i))}catch(Yg){return Promise.reject(Yg)}}async acquireTokenPopupAsync(e,t){this.logger.verbose("acquireTokenPopupAsync called");const n=this.initializeServerTelemetryManager(Wu),r=await ip(this.initializeAuthorizationRequest.bind(this),Il,this.logger,this.performanceClient,this.correlationId)(e,Xu.Popup);Hh(r.authority);try{const o=await ip(this.initializeAuthorizationCodeRequest.bind(this),_l,this.logger,this.performanceClient,this.correlationId)(r),i=await ip(this.createAuthCodeClient.bind(this),Tl,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),a=Wf.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let s;a&&(s=this.performanceClient.startMeasurement(rl,e.correlationId));const c=await i.getAuthCodeUrl((0,Ee.A)((0,Ee.A)({},r),{},{nativeBroker:a})),l=new Vf(i,this.browserStorage,o,this.logger,this.performanceClient),u=this.initiateAuthRequest(c,t);this.eventHandler.emitEvent(Gp,Xu.Popup,{popupWindow:u},null);const d=await this.monitorPopupForHash(u,t.popupWindowParent),h=op(Qf,Fl,this.logger,this.performanceClient,this.correlationId)(d,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(nf.removeThrottle(this.browserStorage,this.config.auth.clientId,o),h.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),s&&s.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw lh(Zd);const e=new Kf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Wu,this.performanceClient,this.nativeMessageHandler,h.accountId,this.nativeStorage,r.correlationId),{userRequestState:t}=wp.parseRequestState(this.browserCrypto,r.state);return await e.acquireToken((0,Ee.A)((0,Ee.A)({},r),{},{state:t,prompt:void 0}))}return await l.handleCodeResponse(h,r)}catch(Yg){var o;throw null===(o=t.popup)||void 0===o||o.close(),Yg instanceof ha&&(Yg.setCorrelationId(this.correlationId),n.cacheFailedRequest(Yg)),Yg}}async logoutPopupAsync(e,t,n,r){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Yp,Xu.Popup,e);const o=this.initializeServerTelemetryManager($u);try{await this.clearCacheOnLogout(e.account);const c=await ip(this.createAuthCodeClient.bind(this),Tl,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n,account:e.account||void 0});try{c.authority.endSessionEndpoint}catch(l){var i;if(null!==(i=e.account)&&void 0!==i&&i.homeAccountId&&e.postLogoutRedirectUri&&c.authority.protocolMode===sa){var a,s;if(this.browserStorage.removeAccount(null===(a=e.account)||void 0===a?void 0:a.homeAccountId),this.eventHandler.emitEvent(Jp,Xu.Popup,e),r){const e={apiId:$u,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=bc.getAbsoluteUrl(r,Lh());await this.navigationClient.navigateInternal(t,e)}return void(null===(s=t.popup)||void 0===s||s.close())}}const u=c.getLogoutUri(e);this.eventHandler.emitEvent(Jp,Xu.Popup,e);const d=this.openPopup(u,t);if(this.eventHandler.emitEvent(Gp,Xu.Popup,{popupWindow:d},null),await this.monitorPopupForHash(d,t.popupWindowParent).catch((()=>{})),r){const e={apiId:$u,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=bc.getAbsoluteUrl(r,Lh());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: ".concat(t)),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(Yg){var c;throw null===(c=t.popup)||void 0===c||c.close(),Yg instanceof ha&&(Yg.setCorrelationId(this.correlationId),o.cacheFailedRequest(Yg)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent($p,Xu.Popup,null,Yg),this.eventHandler.emitEvent(Xp,Xu.Popup),Yg}this.eventHandler.emitEvent(Xp,Xu.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii("Navigate to: ".concat(e)),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),lh(fd)}monitorPopupForHash(e,t){return new Promise(((t,n)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const r=setInterval((()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(r),void n(lh(Sd));let o="";try{o=e.location.href}catch(Yg){}if(!o||"about:blank"===o)return;clearInterval(r);let i="";const a=this.config.auth.OIDCOptions.serverResponseType;e&&(i=a===mi.QUERY?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(i)}),this.config.system.pollIntervalMilliseconds)})).finally((()=>{this.cleanPopup(e,t)}))}openPopup(e,t){try{let n;if(t.popup?(n=t.popup,this.logger.verbosePii("Navigating popup window to: ".concat(e)),n.location.assign(e)):"undefined"===typeof t.popup&&(this.logger.verbosePii("Opening popup window to: ".concat(e)),n=this.openSizedPopup(e,t)),!n)throw lh(kd);return n.focus&&n.focus(),this.currentWindow=n,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),n}catch(Yg){throw this.logger.error("error opening popup "+Yg.message),this.browserStorage.setInteractionInProgress(!1),lh(Cd)}}openSizedPopup(e,t){var n,r,o,i;let{popupName:a,popupWindowAttributes:s,popupWindowParent:c}=t;const l=c.screenLeft?c.screenLeft:c.screenX,u=c.screenTop?c.screenTop:c.screenY,d=c.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=c.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let p=null===(n=s.popupSize)||void 0===n?void 0:n.width,f=null===(r=s.popupSize)||void 0===r?void 0:r.height,g=null===(o=s.popupPosition)||void 0===o?void 0:o.top,m=null===(i=s.popupPosition)||void 0===i?void 0:i.left;return(!p||p<0||p>d)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),p=pu),(!f||f<0||f>h)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),f=fu),(!g||g<0||g>h)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),g=Math.max(0,h/2-fu/2+u)),(!m||m<0||m>d)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),m=Math.max(0,d/2-pu/2+l)),c.open(e,a,"width=".concat(p,", height=").concat(f,", top=").concat(g,", left=").concat(m,", scrollbars=yes"))}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(Xu.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return"".concat(gu,".").concat(this.config.auth.clientId,".").concat(e.join("-"),".").concat(t,".").concat(this.correlationId)}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return"".concat(gu,".").concat(this.config.auth.clientId,".").concat(t,".").concat(this.correlationId)}}class Yf{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(Ou,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(Du,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: ".concat(e));const n={apiId:Ku,timeout:t.redirectTimeout,noHistory:!1};if("function"===typeof t.onRedirectNavigate){this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback");return!1!==t.onRedirectNavigate(e)?(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void await t.navigationClient.navigateExternal(e,n)):void this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")}return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void await t.navigationClient.navigateExternal(e,n)}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),lh(fd)}async handleCodeResponse(e,t){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const n=this.browserStorage.generateStateKey(t),r=this.browserStorage.getTemporaryCache(n);if(!r)throw as(Aa,"Cached State");let o;try{o=this.authModule.handleFragmentResponse(e,r)}catch(Yg){throw Yg instanceof tf&&Yg.subError===Sd?lh(Sd):Yg}const i=this.browserStorage.generateNonceKey(r),a=this.browserStorage.getTemporaryCache(i);if(this.authCodeRequest.code=o.code,o.cloud_instance_host_name&&await ip(this.authModule.updateAuthority.bind(this.authModule),Nl,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(o.cloud_instance_host_name,this.authCodeRequest.correlationId),o.nonce=a||void 0,o.state=r,o.client_info)this.authCodeRequest.clientInfo=o.client_info;else{const e=this.checkCcsCredentials();e&&(this.authCodeRequest.ccsCredential=e)}const s=await this.authModule.acquireToken(this.authCodeRequest,o);return this.browserStorage.cleanRequestByState(t),s}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(Uu,!0);if(e)try{return JSON.parse(e)}catch(Yg){this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii("Cache credential could not be parsed: ".concat(e))}return null}}class Jf extends Nf{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,a,c,l),this.nativeStorage=s}async acquireToken(e){const t=await ip(this.initializeAuthorizationRequest.bind(this),Il,this.logger,this.performanceClient,this.correlationId)(e,Xu.Redirect);this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);const n=this.initializeServerTelemetryManager(Ku),r=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(Zp,Xu.Redirect))};try{const o=await ip(this.initializeAuthorizationCodeRequest.bind(this),_l,this.logger,this.performanceClient,this.correlationId)(t),i=await ip(this.createAuthCodeClient.bind(this),Tl,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a=new Yf(i,this.browserStorage,o,this.logger,this.performanceClient),s=await i.getAuthCodeUrl((0,Ee.A)((0,Ee.A)({},t),{},{nativeBroker:Wf.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)})),c=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii("Redirect start page: ".concat(c)),window.addEventListener("pageshow",r),await a.initiateAuthRequest(s,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:c,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(Yg){throw Yg instanceof ha&&(Yg.setCorrelationId(this.correlationId),n.cacheFailedRequest(Yg)),window.removeEventListener("pageshow",r),this.browserStorage.cleanRequestByState(t.state),Yg}}async handleRedirectPromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const n=this.initializeServerTelemetryManager(Qu);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[r,o]=this.getRedirectResponse(e||"");if(!r)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(Xu.Redirect),"back_forward"!==function(){if("undefined"===typeof window||"undefined"===typeof window.performance||"function"!==typeof window.performance.getEntriesByType)return;const e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return null===t||void 0===t?void 0:t.type}()?t.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const i=this.browserStorage.getTemporaryCache(Ou,!0)||zo.EMPTY_STRING,a=bc.removeHashFromUrl(i);if(a===bc.removeHashFromUrl(window.location.href)&&this.config.auth.navigateToLoginRequestUrl){this.logger.verbose("Current page is loginRequestUrl, handling response"),i.indexOf("#")>-1&&function(e){const t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(i);return await this.handleResponse(r,n)}if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(r,n);if(!Mh()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Mu,o,!0);const e={apiId:Qu,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let t=!0;if(i&&"null"!==i)this.logger.verbose("Navigating to loginRequestUrl: ".concat(i)),t=await this.navigationClient.navigateInternal(i,e);else{const n=function(){const e=new bc(window.location.href).getUrlComponents();return"".concat(e.Protocol,"//").concat(e.HostNameAndPort,"/")}();this.browserStorage.setTemporaryCache(Ou,n,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),t=await this.navigationClient.navigateInternal(n,e)}if(!t)return await this.handleResponse(r,n)}return null}catch(Yg){throw Yg instanceof ha&&(Yg.setCorrelationId(this.correlationId),n.cacheFailedRequest(Yg)),this.browserStorage.cleanRequestByInteractionType(Xu.Redirect),Yg}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===mi.QUERY?window.location.search:window.location.hash);let n=wc(t);if(n){try{!function(e,t,n){if(!e.state)throw lh(md);const r=Ap(t,e.state);if(!r)throw lh(yd);if(r.interactionType!==n)throw lh(wd)}(n,this.browserCrypto,Xu.Redirect)}catch(Yg){return Yg instanceof ha&&this.logger.error("Interaction type validation failed due to ".concat(Yg.errorCode,": ").concat(Yg.errorMessage)),[null,""]}return(r=window).location.hash="","function"===typeof r.history.replaceState&&r.history.replaceState(null,"","".concat(r.location.origin).concat(r.location.pathname).concat(r.location.search)),this.logger.verbose("Hash contains known properties, returning response hash"),[n,t]}var r;const o=this.browserStorage.getTemporaryCache(Mu,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Mu)),o&&(n=wc(o),n)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[n,o]):[null,""]}async handleResponse(e,t){const n=e.state;if(!n)throw lh(md);const r=this.browserStorage.getCachedRequest(n);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw lh(Zd);const t=new Kf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Wu,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,r.correlationId),{userRequestState:o}=wp.parseRequestState(this.browserCrypto,n);return t.acquireToken((0,Ee.A)((0,Ee.A)({},r),{},{state:o,prompt:void 0})).finally((()=>{this.browserStorage.cleanRequestByState(n)}))}const o=this.browserStorage.getCachedAuthority(n);if(!o)throw lh(Ld);const i=await ip(this.createAuthCodeClient.bind(this),Tl,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:o});nf.removeThrottle(this.browserStorage,this.config.auth.clientId,r);return new Yf(i,this.browserStorage,r,this.logger,this.performanceClient).handleCodeResponse(e,n)}async logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),n=this.initializeServerTelemetryManager(Ju);try{this.eventHandler.emitEvent(Yp,Xu.Redirect,e),await this.clearCacheOnLogout(t.account);const a={apiId:Ju,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},s=await ip(this.createAuthCodeClient.bind(this),Tl,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e&&e.authority,requestExtraQueryParameters:null===e||void 0===e?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(s.authority.protocolMode===sa)try{s.authority.endSessionEndpoint}catch(i){var r,o;if(null!==(r=t.account)&&void 0!==r&&r.homeAccountId)return this.browserStorage.removeAccount(null===(o=t.account)||void 0===o?void 0:o.homeAccountId),void this.eventHandler.emitEvent(Jp,Xu.Redirect,t)}const c=s.getLogoutUri(t);if(this.eventHandler.emitEvent(Jp,Xu.Redirect,t),!e||"function"!==typeof e.onRedirectNavigate)return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),void await this.navigationClient.navigateExternal(c,a);if(!1!==e.onRedirectNavigate(c))return this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),void await this.navigationClient.navigateExternal(c,a);this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(Yg){throw Yg instanceof ha&&(Yg.setCorrelationId(this.correlationId),n.cacheFailedRequest(Yg)),this.eventHandler.emitEvent($p,Xu.Redirect,null,Yg),this.eventHandler.emitEvent(Xp,Xu.Redirect),Yg}this.eventHandler.emitEvent(Xp,Xu.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return bc.getAbsoluteUrl(t,Lh())}}async function $f(e,t,n,r,o){if(t.addQueueMeasurement(Cl,r),!e)throw n.info("Navigate url is empty"),lh(fd);return o?ip(Zf,Sl,n,t,r)(e,o,t,r):op(eg,Al,n,t,r)(e)}async function Xf(e,t,n,r,o,i,a){return r.addQueueMeasurement(kl,i),new Promise(((r,i)=>{t<Bh&&o.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower (".concat(t,"ms) than the default (").concat(Bh,"ms). This may result in timeouts."));const s=window.setTimeout((()=>{window.clearInterval(c),i(lh(Td))}),t),c=window.setInterval((()=>{let t="";const n=e.contentWindow;try{t=n?n.location.href:""}catch(Yg){}if(!t||"about:blank"===t)return;let o="";n&&(o=a===mi.QUERY?n.location.search:n.location.hash),window.clearTimeout(s),window.clearInterval(c),r(o)}),n)})).finally((()=>{op(ng,tu,o,r,i)(e)}))}function Zf(e,t,n,r){return n.addQueueMeasurement(Sl,r),new Promise(((n,r)=>{const o=tg();window.setTimeout((()=>{o?(o.src=e,n(o)):r("Unable to load iframe")}),t)}))}function eg(e){const t=tg();return t.src=e,t}function tg(){const e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),e}function ng(e){document.body===e.parentNode&&document.body.removeChild(e)}class rg extends Nf{constructor(e,t,n,r,o,i,a,s,c,l,u){super(e,t,n,r,o,i,s,l,u),this.apiId=a,this.nativeStorage=c}async acquireToken(e){this.performanceClient.addQueueMeasurement(Xc,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t=(0,Ee.A)({},e);t.prompt?t.prompt!==fi.NONE&&t.prompt!==fi.NO_SESSION&&(this.logger.warning("SilentIframeClient. Replacing invalid prompt ".concat(t.prompt," with ").concat(fi.NONE)),t.prompt=fi.NONE):t.prompt=fi.NONE;const n=await ip(this.initializeAuthorizationRequest.bind(this),Il,this.logger,this.performanceClient,e.correlationId)(t,Xu.Silent);Hh(n.authority);const r=this.initializeServerTelemetryManager(this.apiId);let o;try{return o=await ip(this.createAuthCodeClient.bind(this),Tl,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),await ip(this.silentTokenHelper.bind(this),bl,this.logger,this.performanceClient,e.correlationId)(o,n)}catch(Yg){if(Yg instanceof ha&&(Yg.setCorrelationId(this.correlationId),r.cacheFailedRequest(Yg)),!o||!(Yg instanceof ha)||Yg.errorCode!==hu)throw Yg;this.performanceClient.addFields({retryError:Yg.errorCode},this.correlationId);const i=await ip(this.initializeAuthorizationRequest.bind(this),Il,this.logger,this.performanceClient,e.correlationId)(t,Xu.Silent);return await ip(this.silentTokenHelper.bind(this),bl,this.logger,this.performanceClient,this.correlationId)(o,i)}}logout(){return Promise.reject(lh(Rd))}async silentTokenHelper(e,t){const n=t.correlationId;this.performanceClient.addQueueMeasurement(bl,n);const r=await ip(this.initializeAuthorizationCodeRequest.bind(this),_l,this.logger,this.performanceClient,n)(t),o=await ip(e.getAuthCodeUrl.bind(e),xl,this.logger,this.performanceClient,n)((0,Ee.A)((0,Ee.A)({},t),{},{nativeBroker:Wf.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)})),i=new Vf(e,this.browserStorage,r,this.logger,this.performanceClient),a=await ip($f,Cl,this.logger,this.performanceClient,n)(o,this.performanceClient,this.logger,n,this.config.system.navigateFrameWait),s=this.config.auth.OIDCOptions.serverResponseType,c=await ip(Xf,kl,this.logger,this.performanceClient,n)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,s),l=op(Qf,Fl,this.logger,this.performanceClient,this.correlationId)(c,s,this.logger);if(l.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw lh(Zd);const e=new Kf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,l.accountId,this.browserStorage,n),{userRequestState:r}=wp.parseRequestState(this.browserCrypto,t.state);return ip(e.acquireToken.bind(e),ol,this.logger,this.performanceClient,n)((0,Ee.A)((0,Ee.A)({},t),{},{state:r,prompt:t.prompt||fi.NONE}))}return ip(i.handleCodeResponse.bind(i),Pl,this.logger,this.performanceClient,n)(l,t)}}class og extends Nf{async acquireToken(e){this.performanceClient.addQueueMeasurement(el,e.correlationId);const t=await ip(Rf,vl,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),n=(0,Ee.A)((0,Ee.A)({},e),t);e.redirectUri&&(n.redirectUri=this.getRedirectUri(e.redirectUri));const r=this.initializeServerTelemetryManager(Yu),o=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:n.authority,azureCloudOptions:n.azureCloudOptions,account:n.account});return ip(o.acquireTokenByRefreshToken.bind(o),dl,this.logger,this.performanceClient,e.correlationId)(n).catch((e=>{throw e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e),e}))}logout(){return Promise.reject(lh(Rd))}async createRefreshTokenClient(e){const t=await ip(this.getClientConfiguration.bind(this),El,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new qf(t,this.performanceClient)}}class ig{constructor(e,t,n,r){this.isBrowserEnvironment="undefined"!==typeof window,this.config=e,this.storage=t,this.logger=n,this.cryptoObj=r}loadExternalTokens(e,t,n){if(!this.isBrowserEnvironment)throw lh(Dd);const r=t.id_token?us(t.id_token,Xh):void 0,o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.authority?new sp(sp.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,o,this.logger,e.correlationId||Th()):void 0,a=this.loadAccount(e,n.clientInfo||t.client_info||"",r,i),s=this.loadIdToken(t,a.homeAccountId,a.environment,a.realm),c=this.loadAccessToken(e,t,a.homeAccountId,a.environment,a.realm,n),l=this.loadRefreshToken(t,a.homeAccountId,a.environment);return this.generateAuthenticationResult(e,{account:a,idToken:s,accessToken:c,refreshToken:l},r,i)}loadAccount(e,t,n,r){if(this.logger.verbose("TokenCache - loading account"),e.account){const t=vc.createFromAccountInfo(e.account);return this.storage.setAccount(t),t}if(!r||!t&&!n)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),lh(Kd);const o=vc.generateHomeAccountId(t,r.authorityType,this.logger,this.cryptoObj,n),i=null===n||void 0===n?void 0:n.tid,a=Cf(this.storage,r,o,Xh,n,t,r.hostnameAndPort,i,void 0,void 0,this.logger);return this.storage.setAccount(a),a}loadIdToken(e,t,n,r){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const o=gs(t,n,e.id_token,this.config.auth.clientId,r);return this.storage.setIdTokenCredential(o),o}loadAccessToken(e,t,n,r,o,i){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const a=t.scope?rc.fromString(t.scope):new rc(e.scopes),s=i.expiresOn||t.expires_in+(new Date).getTime()/1e3,c=i.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+(new Date).getTime()/1e3,l=ms(n,r,t.access_token,this.config.auth.clientId,o,a.printScopes(),s,c,Xh);return this.storage.setAccessTokenCredential(l),l}loadRefreshToken(e,t,n){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const r=vs(t,n,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(r),r}generateAuthenticationResult(e,t,n,r){var o,i,a;let s,c="",l=[],u=null;null!==t&&void 0!==t&&t.accessToken&&(c=t.accessToken.secret,l=rc.fromString(t.accessToken.target).asArray(),u=new Date(1e3*Number(t.accessToken.expiresOn)),s=new Date(1e3*Number(t.accessToken.extendedExpiresOn)));const d=t.account;return{authority:r?r.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:l,account:d.getAccountInfo(),idToken:(null===(o=t.idToken)||void 0===o?void 0:o.secret)||"",idTokenClaims:n||{},accessToken:c,fromCache:!0,expiresOn:u,correlationId:e.correlationId||"",requestId:"",extExpiresOn:s,familyId:(null===(i=t.refreshToken)||void 0===i?void 0:i.familyId)||"",tokenType:(null===t||void 0===t||null===(a=t.accessToken)||void 0===a?void 0:a.tokenType)||"",state:e.state||"",cloudGraphHostName:d.cloudGraphHostName||"",msGraphHost:d.msGraphHost||"",fromNativeBroker:!1}}}class ag extends Sf{constructor(e){super(e),this.includeRedirectUri=!1}}class sg extends Nf{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,s,c,l),this.apiId=a}async acquireToken(e){if(!e.code)throw lh(Vd);const t=await ip(this.initializeAuthorizationRequest.bind(this),Il,this.logger,this.performanceClient,e.correlationId)(e,Xu.Silent),n=this.initializeServerTelemetryManager(this.apiId);try{const r=(0,Ee.A)((0,Ee.A)({},t),{},{code:e.code}),o=await ip(this.getClientConfiguration.bind(this),El,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),i=new ag(o);this.logger.verbose("Auth code client created");const a=new Vf(i,this.browserStorage,r,this.logger,this.performanceClient);return await ip(a.handleCodeResponseFromServer.bind(a),Rl,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(Yg){throw Yg instanceof ha&&(Yg.setCorrelationId(this.correlationId),n.cacheFailedRequest(Yg)),Yg}}logout(){return Promise.reject(lh(Rd))}}function cg(e){const t=null===e||void 0===e?void 0:e.idTokenClaims;return null!==t&&void 0!==t&&t.tfp||null!==t&&void 0!==t&&t.acr?"B2C":null!==t&&void 0!==t&&t.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===(null===t||void 0===t?void 0:t.tid)?"MSA":"AAD":void 0}function lg(e,t){try{qh(e)}catch(Yg){throw t.end({success:!1},Yg),Yg}}class ug{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new np(this.logger,this.performanceClient):ss,this.eventHandler=new ef(this.logger),this.browserStorage=this.isBrowserEnvironment?new Ip(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,function(e){const t=e.cloudDiscoveryMetadata;let n;if(t)try{n=JSON.parse(t)}catch(Yg){throw tc(zs)}return{canonicalAuthority:e.authority?cp(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth),this.performanceClient):((e,t)=>new Ip(e,{cacheLocation:Iu,temporaryCacheLocation:Iu,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},ss,t))(this.config.auth.clientId,this.logger);const t={cacheLocation:Iu,temporaryCacheLocation:Iu,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Ip(this.config.auth.clientId,t,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new ig(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static async createController(e,t){const n=new ug(e);return await n.initialize(t),n}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){if(this.logger.trace("initialize called"),this.initialized)return void this.logger.info("initialize has already been called, exiting early.");if(!this.isBrowserEnvironment)return this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,void this.eventHandler.emitEvent(xp);const t=(null===e||void 0===e?void 0:e.correlationId)||this.getRequestCorrelationId(),n=this.config.system.allowNativeBroker,r=this.performanceClient.startMeasurement(wl,t);if(this.eventHandler.emitEvent(_p),n)try{this.nativeExtensionProvider=await Wf.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(Yg){this.logger.verbose(Yg)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await ip(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),nu,this.logger,this.performanceClient,t)(this.performanceClient,t)),this.initialized=!0,this.eventHandler.emitEvent(xp),r.end({allowNativeBroker:n,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),Dh(this.initialized),this.isBrowserEnvironment){const t=e||"";let n=this.redirectResponse.get(t);return"undefined"===typeof n?(n=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,n),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){const t=this.getAllAccounts(),n=this.browserStorage.getCachedNativeRequest(),r=n&&Wf.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,o=r?null===n||void 0===n?void 0:n.correlationId:this.browserStorage.getTemporaryCache(Du,!0)||"",i=this.performanceClient.startMeasurement(Gc,o);let a;if(this.eventHandler.emitEvent(Vp,Xu.Redirect),r&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const e=new Kf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Qu,this.performanceClient,this.nativeExtensionProvider,n.accountId,this.nativeInternalStorage,n.correlationId);a=ip(e.handleRedirectPromise.bind(e),Zl,this.logger,this.performanceClient,i.event.correlationId)(this.performanceClient,i.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const t=this.createRedirectClient(o);a=ip(t.handleRedirectPromise.bind(t),Xl,this.logger,this.performanceClient,i.event.correlationId)(e,i)}return a.then((e=>{if(e){t.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Mp,Xu.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Up,Xu.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),i.end({success:!0,accountType:cg(e.account)})}else i.event.errorCode?i.end({success:!1}):i.discard();return this.eventHandler.emitEvent(Qp,Xu.Redirect),e})).catch((e=>{const n=e;throw t.length>0?this.eventHandler.emitEvent(Dp,Xu.Redirect,null,n):this.eventHandler.emitEvent(Lp,Xu.Redirect,null,n),this.eventHandler.emitEvent(Qp,Xu.Redirect),i.end({success:!1},n),e}))}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const n=this.performanceClient.startMeasurement(Qc,t);n.add({accountType:cg(e.account),scenarioId:e.scenarioId});const r=e.onRedirectNavigate;if(r)e.onRedirectNavigate=e=>{const t="function"===typeof r?r(e):void 0;return!1!==t?n.end({success:!0}):n.discard(),t};else{const e=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=t=>{const r="function"===typeof e?e(t):void 0;return!1!==r?n.end({success:!0}):n.discard(),r}}const o=this.getAllAccounts().length>0;try{let r;if(Fh(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),o?this.eventHandler.emitEvent(jp,Xu.Redirect,e):this.eventHandler.emitEvent(Op,Xu.Redirect,e),this.nativeExtensionProvider&&this.canUseNative(e)){r=new Kf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ku,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,n).catch((n=>{if(n instanceof jf&&Uf(n)){this.nativeExtensionProvider=void 0;return this.createRedirectClient(t).acquireToken(e)}if(n instanceof mp){this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createRedirectClient(t).acquireToken(e)}throw this.browserStorage.setInteractionInProgress(!1),n}))}else{r=this.createRedirectClient(t).acquireToken(e)}return await r}catch(Yg){throw n.end({success:!1},Yg),o?this.eventHandler.emitEvent(Dp,Xu.Redirect,null,Yg):this.eventHandler.emitEvent(Lp,Xu.Redirect,null,Yg),Yg}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(Vc,t);n.add({scenarioId:e.scenarioId,accountType:cg(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),lg(this.initialized,n),this.browserStorage.setInteractionInProgress(!0)}catch(Yg){return Promise.reject(Yg)}const r=this.getAllAccounts();let o;if(r.length>0?this.eventHandler.emitEvent(jp,Xu.Popup,e):this.eventHandler.emitEvent(Op,Xu.Popup,e),this.canUseNative(e))o=this.acquireTokenNative((0,Ee.A)((0,Ee.A)({},e),{},{correlationId:t}),Wu).then((e=>(this.browserStorage.setInteractionInProgress(!1),n.end({success:!0,isNativeBroker:!0,accountType:cg(e.account)}),e))).catch((n=>{if(n instanceof jf&&Uf(n)){this.nativeExtensionProvider=void 0;return this.createPopupClient(t).acquireToken(e)}if(n instanceof mp){this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createPopupClient(t).acquireToken(e)}throw this.browserStorage.setInteractionInProgress(!1),n}));else{o=this.createPopupClient(t).acquireToken(e)}return o.then((e=>(r.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Mp,Xu.Popup,e):this.eventHandler.emitEvent(Up,Xu.Popup,e),n.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:cg(e.account)}),e))).catch((e=>(r.length>0?this.eventHandler.emitEvent(Dp,Xu.Popup,null,e):this.eventHandler.emitEvent(Lp,Xu.Popup,null,e),n.end({success:!1},e),Promise.reject(e))))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var t,n;const r=this.getRequestCorrelationId(e),o=(0,Ee.A)((0,Ee.A)({},e),{},{prompt:e.prompt,correlationId:r});let i;if(this.ssoSilentMeasurement=this.performanceClient.startMeasurement(tl,r),null===(t=this.ssoSilentMeasurement)||void 0===t||t.add({scenarioId:e.scenarioId,accountType:cg(e.account)}),lg(this.initialized,this.ssoSilentMeasurement),null===(n=this.ssoSilentMeasurement)||void 0===n||n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",r),this.eventHandler.emitEvent(Fp,Xu.Silent,o),this.canUseNative(o))i=this.acquireTokenNative(o,Vu).catch((e=>{if(e instanceof jf&&Uf(e)){this.nativeExtensionProvider=void 0;return this.createSilentIframeClient(o.correlationId).acquireToken(o)}throw e}));else{i=this.createSilentIframeClient(o.correlationId).acquireToken(o)}return i.then((e=>{var t;return this.eventHandler.emitEvent(Hp,Xu.Silent,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:cg(e.account)}),e})).catch((e=>{var t;throw this.eventHandler.emitEvent(Bp,Xu.Silent,null,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!1},e),e})).finally((()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)}))}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const n=this.performanceClient.startMeasurement(Bc,t);lg(this.initialized,n),this.eventHandler.emitEvent(zp,Xu.Silent,e),n.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw lh(Gd);if(e.code){const r=e.code;let o=this.hybridAuthCodeResponses.get(r);return o?(this.logger.verbose("Existing acquireTokenByCode request found",t),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),o=this.acquireTokenByCodeAsync((0,Ee.A)((0,Ee.A)({},e),{},{correlationId:t})).then((e=>(this.eventHandler.emitEvent(Kp,Xu.Silent,e),this.hybridAuthCodeResponses.delete(r),n.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:cg(e.account)}),e))).catch((e=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(Wp,Xu.Silent,null,e),n.end({success:!1},e),e})),this.hybridAuthCodeResponses.set(r,o)),await o}if(e.nativeAccountId){if(this.canUseNative(e,e.nativeAccountId)){const r=await this.acquireTokenNative((0,Ee.A)((0,Ee.A)({},e),{},{correlationId:t}),Gu,e.nativeAccountId).catch((e=>{throw e instanceof jf&&Uf(e)&&(this.nativeExtensionProvider=void 0),e}));return n.end({accountType:cg(r.account),success:!0}),r}throw lh(Jd)}throw lh(Qd)}catch(Yg){throw this.eventHandler.emitEvent(Wp,Xu.Silent,null,Yg),n.end({success:!1},Yg),Yg}}async acquireTokenByCodeAsync(e){var t;this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement($l,e.correlationId),null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const n=this.createSilentAuthCodeClient(e.correlationId);return await n.acquireToken(e).then((e=>{var t;return null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker}),e})).catch((e=>{var t;throw null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!1},e),e})).finally((()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)}))}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(pl,e.correlationId),t){case nd:case rd:case od:const t=this.createSilentCacheClient(e.correlationId);return ip(t.acquireToken.bind(t),$c,this.logger,this.performanceClient,e.correlationId)(e);default:throw as(Va)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(zc,e.correlationId),t){case nd:case od:case id:case ad:const t=this.createSilentRefreshClient(e.correlationId);return ip(t.acquireToken.bind(t),el,this.logger,this.performanceClient,e.correlationId)(e);default:throw as(Va)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(ml,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return ip(t.acquireToken.bind(t),Xc,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect((0,Ee.A)({correlationId:t},e))}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);Fh(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0);return this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);qh(this.initialized),this.browserStorage.setInteractionInProgress(!0);return this.createPopupClient(t).logout(e)}catch(Yg){return Promise.reject(Yg)}}async clearCache(e){if(!this.isBrowserEnvironment)return void this.logger.info("in non-browser environment, returning early.");const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){return function(e,t,n,r){return e.verbose("getAllAccounts called"),n?t.getAllAccounts(r):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return function(e,t,n){if(t.trace("getAccount called"),0===Object.keys(e).length)return t.warning("getAccount: No accountFilter provided"),null;const r=n.getAccountInfoFilteredBy(e);return r?(t.verbose("getAccount: Account matching provided filter found, returning"),r):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByUsername(e){return function(e,t,n){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;const r=n.getAccountInfoFilteredBy({username:e});return r?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii("getAccountByUsername: Returning signed-in accounts matching username: ".concat(e)),r):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return function(e,t,n){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=n.getAccountInfoFilteredBy({homeAccountId:e});return r?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii("getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ".concat(e)),r):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return function(e,t,n){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const r=n.getAccountInfoFilteredBy({localAccountId:e});return r?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii("getAccountByLocalId: Returning signed-in accounts matching localAccountId: ".concat(e)),r):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}setActiveAccount(e){!function(e,t){t.setActiveAccount(e)}(e,this.browserStorage)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const n=vc.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(n),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,n){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw lh(Zd);return new Kf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,n||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUseNative(e,t){if(this.logger.trace("canUseNative called"),!Wf.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case fi.NONE:case fi.CONSENT:case fi.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace("canUseNative: prompt = ".concat(e.prompt," is not compatible with native flow, returning false")),!1}return!(!t&&!this.getNativeAccountId(e))||(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1)}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new Gf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new Jf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new rg(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Vu,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new Hf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new og(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new sg(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Gu,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return Uh(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){"undefined"!==typeof window&&(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){"undefined"!==typeof window&&(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){try{var t;null!==(t=e.key)&&void 0!==t&&t.includes(ci)&&this.eventHandler.emitEvent(Np);const n=e.newValue||e.oldValue;if(!n)return;const r=JSON.parse(n);if("object"!==typeof r||!vc.isAccountEntity(r))return;const o=Rc.toObject(new vc,r).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(Rp,void 0,o)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(Pp,void 0,o))}catch(e){return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return null!==e&&void 0!==e&&e.correlationId?e.correlationId:this.isBrowserEnvironment?Th():zo.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect((0,Ee.A)({correlationId:t},e||Zu))}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup((0,Ee.A)({correlationId:t},e||Zu))}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(Kc,t);n.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),lg(this.initialized,n),this.logger.verbose("acquireTokenSilent called",t);const r=e.account||this.getActiveAccount();if(!r)throw lh(Pd);n.add({accountType:cg(r)});const o={clientId:this.config.auth.clientId,authority:e.authority||zo.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:r.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},i=JSON.stringify(o),a=this.activeSilentTokenRequests.get(i);if("undefined"===typeof a){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t);const o=ip(this.acquireTokenSilentAsync.bind(this),Wc,this.logger,this.performanceClient,t)((0,Ee.A)((0,Ee.A)({},e),{},{correlationId:t}),r).then((t=>(this.activeSilentTokenRequests.delete(i),n.end({success:!0,fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:t.accessToken.length,idTokenSize:t.idToken.length}),t))).catch((e=>{throw this.activeSilentTokenRequests.delete(i),n.end({success:!1},e),e}));return this.activeSilentTokenRequests.set(i,o),(0,Ee.A)((0,Ee.A)({},await o),{},{state:e.state})}return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),n.discard(),(0,Ee.A)((0,Ee.A)({},await a),{},{state:e.state})}async acquireTokenSilentAsync(e,t){const n=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(Wc,e.correlationId),this.eventHandler.emitEvent(jp,Xu.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",n);const r=await ip(Pf,yl,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),o=e.cacheLookupPolicy||nd;return this.acquireTokenSilentNoIframe(r,o).catch((async e=>{const t=function(e,t){const n=!(e instanceof mp&&e.subError!==hp),r=e.errorCode===hu||e.errorCode===Va,o=n&&r||e.errorCode===lp||e.errorCode===dp,i=cd.includes(t);return o&&i}(e,o);if(t){if(this.activeIframeRequest){if(o!==sd){const[t,n]=this.activeIframeRequest;this.logger.verbose("Iframe request is already in progress, awaiting resolution for request with correlationId: ".concat(n),r.correlationId);const i=this.performanceClient.startMeasurement(Zc,r.correlationId);i.add({awaitIframeCorrelationId:n});const a=await t;if(i.end({success:a}),a)return this.logger.verbose("Parallel iframe request with correlationId: ".concat(n," succeeded. Retrying cache and/or RT redemption"),r.correlationId),this.acquireTokenSilentNoIframe(r,o);throw this.logger.info("Iframe request with correlationId: ".concat(n," failed. Interaction is required.")),e}return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",r.correlationId),ip(this.acquireTokenBySilentIframe.bind(this),ml,this.logger,this.performanceClient,r.correlationId)(r)}{let e;return this.activeIframeRequest=[new Promise((t=>{e=t})),r.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",r.correlationId),ip(this.acquireTokenBySilentIframe.bind(this),ml,this.logger,this.performanceClient,r.correlationId)(r).then((t=>(e(!0),t))).catch((t=>{throw e(!1),t})).finally((()=>{this.activeIframeRequest=void 0}))}}throw e})).then((t=>(this.eventHandler.emitEvent(Up,Xu.Silent,t),e.correlationId&&this.performanceClient.addFields({fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker},e.correlationId),t))).catch((e=>{throw this.eventHandler.emitEvent(Dp,Xu.Silent,null,e),e})).finally((()=>{document.removeEventListener("visibilitychange",n)}))}async acquireTokenSilentNoIframe(e,t){return Wf.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,Yu).catch((async e=>{if(e instanceof jf&&Uf(e))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,as(Va);throw e}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),ip(this.acquireTokenFromCache.bind(this),pl,this.logger,this.performanceClient,e.correlationId)(e,t).catch((n=>{if(t===rd)throw n;return this.eventHandler.emitEvent(qp,Xu.Silent,e),ip(this.acquireTokenByRefreshToken.bind(this),zc,this.logger,this.performanceClient,e.correlationId)(e,t)})))}}class dg{static async createPublicClientApplication(e){const t=await async function(e,t){const n=new Wh(e);return await n.initialize(),ug.createController(n,t)}(e);return new dg(e,t)}constructor(e,t){this.controller=t||new ug(new Wh(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}class hg extends Error{constructor(e){super(e),this.name="CredentialUnavailableError"}}Error;Error;class pg extends Error{constructor(e){super(e.message),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}}class fg extends Error{constructor(e){super(e),this.name="AbortError"}}new Set("0123456789abcdefABCDEF");function gg(){let e="";for(let t=0;t<32;t++){const n=Math.floor(16*Math.random());e+=12===t?"4":16===t?3&n|8:n.toString(16),7!==t&&11!==t&&15!==t&&19!==t||(e+="-")}return e}var mg;const vg="function"===typeof(null===(mg=null===globalThis||void 0===globalThis?void 0:globalThis.crypto)||void 0===mg?void 0:mg.randomUUID)?globalThis.crypto.randomUUID.bind(globalThis.crypto):gg;var yg,wg,bg,Cg;"undefined"!==typeof window&&window.document,"object"===typeof self&&"function"===typeof(null===self||void 0===self?void 0:self.importScripts)&&("DedicatedWorkerGlobalScope"===(null===(yg=self.constructor)||void 0===yg?void 0:yg.name)||"ServiceWorkerGlobalScope"===(null===(wg=self.constructor)||void 0===wg?void 0:wg.name)||null===(bg=self.constructor)||void 0===bg||bg.name),"undefined"!==typeof Deno&&"undefined"!==typeof Deno.version&&Deno.version.deno,"undefined"!==typeof Bun&&Bun.version;const kg="undefined"!==typeof globalThis.process&&Boolean(globalThis.process.version)&&Boolean(null===(Cg=globalThis.process.versions)||void 0===Cg?void 0:Cg.node);"undefined"!==typeof navigator&&(null===navigator||void 0===navigator||navigator.product);Error;function Sg(){return vg()}const Ag=kg;function Tg(e,t){return t||(t=Do),new RegExp("".concat(e,"/?$")).test(t)?t:t.endsWith("/")?t+e:"".concat(t,"/").concat(e)}function Eg(e,t,n){return"adfs"===e&&t||n?[t]:[]}const Ig=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ag?"Node":"Browser";return(n,r,o)=>{if(!o)switch(n){case oa.Error:return void e.info("MSAL ".concat(t," V2 error: ").concat(r));case oa.Info:return void e.info("MSAL ".concat(t," V2 info message: ").concat(r));case oa.Verbose:return void e.info("MSAL ".concat(t," V2 verbose message: ").concat(r));case oa.Warning:return void e.info("MSAL ".concat(t," V2 warning: ").concat(r))}}};function _g(e){switch(e){case"error":return oa.Error;case"info":default:return oa.Info;case"verbose":return oa.Verbose;case"warning":return oa.Warning}}class xg{constructor(e){this.logger=e.logger,this.account=e.authenticationRecord}generateUuid(){return Sg()}handleResult(e,t,n,r){var o;return(null===n||void 0===n?void 0:n.account)&&(this.account=Pg(t,n.account)),function(e,t,n,r){const o=n=>(t.getToken.info(n),new pg({scopes:Array.isArray(e)?e:[e],getTokenOptions:r,message:n}));if(!n)throw o("No response");if(!n.expiresOn)throw o('Response had no "expiresOn" property.');if(!n.accessToken)throw o('Response had no "accessToken" property.')}(e,this.logger,n,r),this.logger.getToken.info((o=e,"SUCCESS. Scopes: ".concat(Array.isArray(o)?o.join(", "):o,"."))),{token:n.accessToken,expiresOnTimestamp:n.expiresOn.getTime()}}handleError(e,t,n){if("AuthError"===t.name||"ClientAuthError"===t.name||"BrowserAuthError"===t.name){const n=t;switch(n.errorCode){case"endpoints_resolution_error":return this.logger.info(Oo(e,t.message)),new hg(t.message);case"device_code_polling_cancelled":return new fg("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":this.logger.info(Oo(e,"Authentication returned errorCode ".concat(n.errorCode)));break;default:this.logger.info(Oo(e,"Failed to acquire token: ".concat(t.message)))}}return"ClientConfigurationError"===t.name||"BrowserConfigurationAuthError"===t.name||"AbortError"===t.name?t:new pg({scopes:e,getTokenOptions:n,message:t.message})}}function Rg(e){const[t]=e.authority.match(/([a-z]*\.[a-z]*\.[a-z]*)/)||[""];return Object.assign(Object.assign({},e),{localAccountId:e.homeAccountId,environment:t})}function Pg(e,t){return{authority:Tg(t.tenantId,t.environment),homeAccountId:t.homeAccountId,tenantId:t.tenantId||jo,username:t.username,clientId:e,version:"1.0"}}class Ng extends xg{constructor(e){var t;if(super(e),this.logger=e.logger,this.loginStyle=e.loginStyle,!e.clientId)throw new hg("A client ID is required in browsers");this.clientId=e.clientId,this.additionallyAllowedTenantIds=Ho(null===(t=null===e||void 0===e?void 0:e.tokenCredentialOptions)||void 0===t?void 0:t.additionallyAllowedTenants),this.tenantId=Fo(this.logger,e.tenantId,e.clientId),this.authorityHost=e.authorityHost,this.msalConfig=function(e){const t=e.tenantId||jo,n=Tg(t,e.authorityHost);return{auth:{clientId:e.clientId,authority:n,knownAuthorities:Eg(t,n,e.disableInstanceDiscovery),redirectUri:e.redirectUri||self.location.origin}}}(e),this.disableAutomaticAuthentication=e.disableAutomaticAuthentication,e.authenticationRecord&&(this.account=Object.assign(Object.assign({},e.authenticationRecord),{tenantId:this.tenantId}))}async init(){}async logout(){var e;null===(e=this.app)||void 0===e||e.logout()}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Bo(this.tenantId,t,this.additionallyAllowedTenantIds)||this.tenantId;return t.authority||(t.authority=Tg(n,this.authorityHost)),await this.handleRedirect(),await this.getActiveAccount()||this.disableAutomaticAuthentication||await this.login(e),this.getTokenSilent(e).catch((n=>{if("AuthenticationRequiredError"!==n.name)throw n;if(null===t||void 0===t?void 0:t.disableAutomaticAuthentication)throw new pg({scopes:e,getTokenOptions:t,message:"Automatic authentication has been disabled. You may call the authentication() method."});return this.logger.info("Silent authentication failed, falling back to interactive method ".concat(this.loginStyle)),this.doGetToken(e)}))}}const Og=self.location.hash;class Mg extends Ng{constructor(e){var t;super(e),this.loginHint=e.loginHint,this.msalConfig.cache={cacheLocation:"sessionStorage",storeAuthStateInCookie:!0},this.msalConfig.system={loggerOptions:{loggerCallback:Ig(this.logger,"Browser"),logLevel:_g(Ro.getLogLevel()),piiLoggingEnabled:null===(t=e.loggingOptions)||void 0===t?void 0:t.enableUnsafeSupportLogging}}}async getApp(){return this.app||(this.app=await dg.createPublicClientApplication(this.msalConfig),this.account&&this.app.setActiveAccount(Rg(this.account))),this.app}async handleBrowserResult(e){try{const t=await this.getApp();if(e&&e.account)return this.logger.info("MSAL Browser V2 authentication successful."),t.setActiveAccount(e.account),Pg(this.clientId,e.account);const n=await this.app.getActiveAccount();if(n)return Pg(this.clientId,n);const r=t.getAllAccounts();if(r.length>1)return this.logger.info('More than one account was found authenticated for this Client ID and Tenant ID.\nHowever, no "authenticationRecord" has been provided for this credential,\ntherefore we\'re unable to pick between these accounts.\nA new login attempt will be requested, to ensure the correct account is picked.\nTo work with multiple accounts for the same Client ID and Tenant ID, please provide an "authenticationRecord" when initializing "InteractiveBrowserCredential".'),void await t.logout({onRedirectNavigate:()=>!1});if(1===r.length){const e=r[0];return t.setActiveAccount(e),Pg(this.clientId,e)}this.logger.info("No accounts were found through MSAL.")}catch(Yg){this.logger.info("Failed to acquire token through MSAL. ".concat(Yg.message))}}async handleRedirect(){const e=await this.getApp();return this.handleBrowserResult(await e.handleRedirectPromise(Og)||void 0)}async login(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t={scopes:Array.isArray(e)?e:[e],loginHint:this.loginHint},n=await this.getApp();switch(this.loginStyle){case"redirect":return void await n.loginRedirect(t);case"popup":return this.handleBrowserResult(await n.loginPopup(t))}}async getActiveAccount(){const e=(await this.getApp()).getActiveAccount();if(e)return Pg(this.clientId,e)}async getTokenSilent(e,t){const n=await this.getActiveAccount();if(!n)throw new pg({scopes:e,getTokenOptions:t,message:"Silent authentication failed. We couldn't retrieve an active account from the cache."});const r={authority:(null===t||void 0===t?void 0:t.authority)||this.msalConfig.auth.authority,correlationId:null===t||void 0===t?void 0:t.correlationId,claims:null===t||void 0===t?void 0:t.claims,account:Rg(n),forceRefresh:!1,scopes:e};try{this.logger.info("Attempting to acquire token silently");const t=await this.getApp(),n=await t.acquireTokenSilent(r);return this.handleResult(e,this.clientId,n)}catch(o){throw this.handleError(e,o,t)}}async doGetToken(e,t){const n=await this.getActiveAccount();if(!n)throw new pg({scopes:e,getTokenOptions:t,message:"Silent authentication failed. We couldn't retrieve an active account from the cache."});const r={authority:(null===t||void 0===t?void 0:t.authority)||this.msalConfig.auth.authority,correlationId:null===t||void 0===t?void 0:t.correlationId,claims:null===t||void 0===t?void 0:t.claims,account:Rg(n),loginHint:this.loginHint,scopes:e},o=await this.getApp();switch(this.loginStyle){case"redirect":return await o.acquireTokenRedirect(r),{token:"",expiresOnTimestamp:0};case"popup":return this.handleResult(e,this.clientId,await o.acquireTokenPopup(r))}}}const Lg={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function jg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Ug(e.parentContext);return e.span&&(t=t.setValue(Lg.span,e.span)),e.namespace&&(t=t.setValue(Lg.namespace,e.namespace)),t}class Ug{constructor(e){this._contextMap=e instanceof Ug?new Map(e._contextMap):new Map}setValue(e,t){const n=new Ug(this);return n._contextMap.set(e,t),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){const t=new Ug(this);return t._contextMap.delete(e),t}}const Dg={instrumenterImplementation:void 0};function qg(){return Dg.instrumenterImplementation||(Dg.instrumenterImplementation={createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(e,t)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}},tracingContext:jg({parentContext:t.tracingContext})}),withContext(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t(...r)}}),Dg.instrumenterImplementation}const Fg=function(e){const{namespace:t,packageName:n,packageVersion:r}=e;function o(e,o,i){var a;const s=qg().startSpan(e,Object.assign(Object.assign({},i),{packageName:n,packageVersion:r,tracingContext:null===(a=null===o||void 0===o?void 0:o.tracingOptions)||void 0===a?void 0:a.tracingContext}));let c=s.tracingContext;const l=s.span;c.getValue(Lg.namespace)||(c=c.setValue(Lg.namespace,t)),l.setAttribute("az.namespace",c.getValue(Lg.namespace));return{span:l,updatedOptions:Object.assign({},o,{tracingOptions:Object.assign(Object.assign({},null===o||void 0===o?void 0:o.tracingOptions),{tracingContext:c})})}}function i(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return qg().withContext(e,t,...r)}return{startSpan:o,withSpan:async function(e,t,n,r){const{span:a,updatedOptions:s}=o(e,t,r);try{const e=await i(s.tracingOptions.tracingContext,(()=>Promise.resolve(n(s,a))));return a.setStatus({status:"success"}),e}catch(c){throw a.setStatus({status:"error",error:c}),c}finally{a.end()}},withContext:i,parseTraceparentHeader:function(e){return qg().parseTraceparentHeader(e)},createRequestHeaders:function(e){return qg().createRequestHeaders(e)}}}({namespace:"Microsoft.AAD",packageName:"@azure/identity",packageVersion:"3.4.2"}),Hg=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Po;const n=Mo(e,void 0,t);return Object.assign(Object.assign({},n),{parent:t,getToken:Mo("=> getToken()",n,t)})}("InteractiveBrowserCredential");class Bg{constructor(e){if(!(null===e||void 0===e?void 0:e.clientId)){const e=new Error("The parameter `clientId` cannot be left undefined for the `InteractiveBrowserCredential`");throw Hg.info(Oo("",e)),e}this.tenantId=null===e||void 0===e?void 0:e.tenantId,this.additionallyAllowedTenantIds=Ho(null===e||void 0===e?void 0:e.additionallyAllowedTenants);const t=e,n=t.loginStyle||"popup",r=["redirect","popup"];if(-1===r.indexOf(n)){const e=new Error("Invalid loginStyle: ".concat(t.loginStyle,". Should be any of the following: ").concat(r.join(", "),"."));throw Hg.info(Oo("",e)),e}const o=Object.assign(Object.assign({},e),{tokenCredentialOptions:e,logger:Hg,loginStyle:n,redirectUri:"function"===typeof e.redirectUri?e.redirectUri():e.redirectUri});this.msalFlow=new Mg(o),this.disableAutomaticAuthentication=null===e||void 0===e?void 0:e.disableAutomaticAuthentication}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fg.withSpan("".concat(this.constructor.name,".getToken"),t,(async t=>{const n=Bo(this.tenantId,t,this.additionallyAllowedTenantIds);t.tenantId=n;const r=function(e){return Array.isArray(e)?e:[e]}(e);return this.msalFlow.getToken(r,Object.assign(Object.assign({},t),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))}))}async authenticate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fg.withSpan("".concat(this.constructor.name,".authenticate"),t,(async t=>{const n=Array.isArray(e)?e:[e];return await this.msalFlow.getToken(n,t),this.msalFlow.getActiveAccount()}))}}class zg{constructor(){this.assessmentContexts=new Map,this.currentContext=null}async initializeTenantAssessment(e,t,n){try{const r={tenantId:e,clientId:t,redirectUri:{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CLIENT_ID:"d1cc9e16-9194-4892-92c5-473c9f65dcb3"}.REACT_APP_REDIRECT_URI||window.location.origin+"/auth/callback",scopes:["https://graph.microsoft.com/Organization.Read.All","https://graph.microsoft.com/Reports.Read.All","https://graph.microsoft.com/Directory.Read.All","https://graph.microsoft.com/Policy.Read.All","https://graph.microsoft.com/SecurityEvents.Read.All","https://graph.microsoft.com/IdentityRiskyUser.Read.All","https://graph.microsoft.com/DeviceManagementManagedDevices.Read.All"]},o=new Bg({tenantId:e,clientId:t,redirectUri:r.redirectUri}),i=new uo.TokenCredentialAuthenticationProvider(o,{scopes:r.scopes}),a=lo.initWithMiddleware({authProvider:i}),s=await o.getToken(r.scopes),c={targetTenantId:e,targetTenantDomain:n,authConfig:r,graphClient:a,accessToken:(null===s||void 0===s?void 0:s.token)||""};return this.assessmentContexts.set(e,c),this.currentContext=c,console.log("Successfully initialized assessment context for tenant: ".concat(e)),c}catch(r){console.error("Failed to initialize tenant assessment for ".concat(e,":"),r);const t=r instanceof Error?r.message:"Unknown authentication error";throw new Error("Authentication failed for tenant ".concat(e,": ").concat(t))}}switchTenantContext(e){const t=this.assessmentContexts.get(e);return t?(this.currentContext=t,console.log("Switched to tenant context: ".concat(e)),t):(console.warn("No context found for tenant: ".concat(e)),null)}getCurrentContext(){return this.currentContext}async performSecurityAssessment(){if(!this.currentContext)throw new Error("No tenant context available. Please initialize tenant assessment first.");const{graphClient:e,targetTenantId:t,targetTenantDomain:n}=this.currentContext;try{console.log("Performing security assessment for tenant: ".concat(t));const[r,o,i,a,s,c]=await Promise.all([this.getOrganizationInfo(e),this.getSecureScores(e),this.getConditionalAccessPolicies(e),this.getUserSecurityInfo(e),this.getDeviceComplianceInfo(e),this.getSecurityAlerts(e)]),l=this.calculateSecurityMetrics({secureScores:o,conditionalAccessPolicies:i,users:a,devices:s,securityAlerts:c});return{metrics:l,recommendations:this.generateSecurityRecommendations({secureScores:o,conditionalAccessPolicies:i,users:a,devices:s,securityAlerts:c}),tenantInfo:{tenantId:t,tenantDomain:n,organizationName:null===r||void 0===r?void 0:r.displayName,assessmentDate:(new Date).toISOString()}}}catch(r){console.error("Security assessment failed for tenant ".concat(t,":"),r);const e=r instanceof Error?r.message:"Unknown assessment error";throw new Error("Assessment failed: ".concat(e))}}async cleanupTenantContext(e){if(this.assessmentContexts.get(e))try{var t;this.assessmentContexts.delete(e),(null===(t=this.currentContext)||void 0===t?void 0:t.targetTenantId)===e&&(this.currentContext=null),console.log("Cleaned up context for tenant: ".concat(e))}catch(n){console.error("Error cleaning up tenant context ".concat(e,":"),n)}}async getOrganizationInfo(e){try{var t;return null===(t=(await e.api("/organization").get()).value)||void 0===t?void 0:t[0]}catch(n){return console.error("Error fetching organization info:",n),null}}async getSecureScores(e){try{return(await e.api("/security/secureScores").top(1).orderby("createdDateTime desc").get()).value||[]}catch(t){return console.error("Error fetching secure scores:",t),[]}}async getConditionalAccessPolicies(e){try{return(await e.api("/identity/conditionalAccess/policies").get()).value||[]}catch(t){return console.error("Error fetching conditional access policies:",t),[]}}async getUserSecurityInfo(e){try{return(await e.api("/reports/credentialUserRegistrationDetails").get()).value||[]}catch(t){return console.error("Error fetching user security info:",t),[]}}async getDeviceComplianceInfo(e){try{return(await e.api("/deviceManagement/managedDevices").select("id,deviceName,complianceState,lastSyncDateTime").get()).value||[]}catch(t){return console.error("Error fetching device compliance info:",t),[]}}async getSecurityAlerts(e){try{return(await e.api("/security/alerts_v2").filter("status ne 'resolved'").top(50).get()).value||[]}catch(t){return console.error("Error fetching security alerts:",t),[]}}calculateSecurityMetrics(e){const{secureScores:t,conditionalAccessPolicies:n,users:r,devices:o,securityAlerts:i}=e,a=t[0],s=a?Math.round(a.currentScore/a.maxScore*100):0,c=r.filter((e=>e.isMfaRegistered)).length,l=r.length,u=l>0?c/l*100:0,d=n.filter((e=>"enabled"===e.state)).length,h=Math.round(.7*u+Math.min(10*d,30)),p=o.filter((e=>"compliant"===e.complianceState)).length,f=o.length,g=f>0?Math.round(p/f*100):100;return{secureScore:s,identityScore:Math.min(h,100),deviceComplianceScore:g,alertsCount:i.length,mfaAdoption:Math.round(u),activePolicies:d,lastUpdated:(new Date).toISOString()}}generateSecurityRecommendations(e){const t=[],{users:n,conditionalAccessPolicies:r,devices:o,securityAlerts:i}=e,a=n.filter((e=>e.isMfaRegistered)).length,s=n.length;s>0&&a/s<.9&&t.push({id:"mfa-adoption",title:"Improve Multi-Factor Authentication Adoption",category:"identity",severity:"high",description:"Only ".concat(a," out of ").concat(s," users have MFA registered.")});const c=r.filter((e=>"enabled"===e.state)).length;c<3&&t.push({id:"conditional-access",title:"Implement Additional Conditional Access Policies",category:"identity",severity:"medium",description:"Only ".concat(c," conditional access policies are active.")});const l=o.filter((e=>"compliant"===e.complianceState)).length,u=o.length;u>0&&l/u<.95&&t.push({id:"device-compliance",title:"Improve Device Compliance",category:"endpoint",severity:"medium",description:"".concat(u-l," out of ").concat(u," devices are not compliant.")});const d=i.filter((e=>"high"===e.severity)).length;return d>0&&t.push({id:"high-severity-alerts",title:"Address High Severity Security Alerts",category:"threatProtection",severity:"critical",description:"".concat(d," high severity security alerts require immediate attention.")}),t}}const Kg=()=>{const{isAuthenticated:e,user:t}=Oe(),n=re(),[r,o]=(0,i.useState)(!1),[a,s]=(0,i.useState)(null),[c,l]=(0,i.useState)(!1),[u,d]=(0,i.useState)("start-assessment"),[h,p]=(0,i.useState)({tenantId:"",tenantDomain:"",displayName:""}),[f,g]=(0,i.useState)(null),[m]=(0,i.useState)((()=>new zg)),[v,y]=(0,i.useState)({assessmentName:"Security Assessment",includedCategories:Object.keys(Ie),notificationEmail:(null===t||void 0===t?void 0:t.email)||"",autoSchedule:!1,scheduleFrequency:"monthly"}),w=async e=>{try{if(!e){const e="https://login.microsoftonline.com/common/oauth2/v2.0/authorize?"+new URLSearchParams({client_id:Pe.clientId,response_type:"code",redirect_uri:window.location.origin+"/auth/callback",scope:"openid profile",prompt:"select_account",state:"tenant-selection"}).toString(),t=window.open(e,"tenant-selection","width=600,height=700,scrollbars=yes,resizable=yes"),n=setInterval((()=>{null!==t&&void 0!==t&&t.closed&&(clearInterval(n),s("Tenant selection was cancelled"),o(!1))}),1e3),r=e=>{if(e.origin===window.location.origin)if("TENANT_SELECTED"===e.data.type){clearInterval(n),null===t||void 0===t||t.close(),window.removeEventListener("message",r);const{tenantId:o,tenantDomain:i,userInfo:a}=e.data;b(o,i,a)}else"TENANT_SELECTION_ERROR"===e.data.type&&(clearInterval(n),null===t||void 0===t||t.close(),window.removeEventListener("message",r),s(e.data.error||"Tenant selection failed"),o(!1))};return void window.addEventListener("message",r)}const t="https://login.microsoftonline.com/".concat(h.tenantId,"/oauth2/v2.0/authorize?")+new URLSearchParams({client_id:e,response_type:"code",redirect_uri:window.location.origin+"/auth/callback",scope:"https://graph.microsoft.com/.default",prompt:"consent",state:"multi-tenant-assessment"}).toString();window.location.href=t}catch(a){s(a.message||"Failed to initiate tenant login"),o(!1)}},b=async(e,t,n)=>{try{const r=ar.getInstance(),o=await r.createMultiTenantApp({targetTenantId:e,targetTenantDomain:t,assessmentName:v.assessmentName});g(o),p({tenantId:e,tenantDomain:t,displayName:(null===n||void 0===n?void 0:n.displayName)||t||e}),await w(o.clientId)}catch(a){s(a.message||"Failed to create assessment application for selected tenant"),o(!1)}};return e?(0,lr.jsxs)("div",{className:"settings-page",children:[(0,lr.jsxs)("div",{className:"settings-header",children:[(0,lr.jsx)("h1",{children:"Multi-Tenant Assessment Settings"}),(0,lr.jsx)("p",{children:"Configure and run security assessments across different Microsoft 365 tenants"})]}),"start-assessment"===u&&(0,lr.jsxs)("div",{className:"settings-form",children:[a&&(0,lr.jsx)("div",{className:"error-message",children:a}),(0,lr.jsxs)("div",{className:"form-section",children:[(0,lr.jsx)("h2",{children:"Start New Assessment"}),(0,lr.jsx)("p",{children:"Click the button below to select a Microsoft 365 tenant and begin the security assessment process."}),(0,lr.jsxs)("div",{className:"form-field",children:[(0,lr.jsx)("label",{htmlFor:"assessmentName",children:"Assessment Name"}),(0,lr.jsx)("input",{type:"text",id:"assessmentName",value:v.assessmentName,onChange:e=>y((0,Ee.A)((0,Ee.A)({},v),{},{assessmentName:e.target.value})),placeholder:"Enter a name for this assessment",required:!0}),(0,lr.jsx)("small",{children:"This will be used to identify the assessment in your dashboard"})]}),(0,lr.jsxs)("div",{className:"assessment-info",children:[(0,lr.jsx)("h3",{children:"\ud83d\ude80 What happens next?"}),(0,lr.jsxs)("div",{className:"process-steps",children:[(0,lr.jsxs)("div",{className:"step",children:[(0,lr.jsx)("div",{className:"step-number",children:"1"}),(0,lr.jsxs)("div",{className:"step-content",children:[(0,lr.jsx)("strong",{children:"Tenant Authentication"}),(0,lr.jsx)("p",{children:"You'll be prompted to sign in to the Microsoft 365 tenant you want to assess"})]})]}),(0,lr.jsxs)("div",{className:"step",children:[(0,lr.jsx)("div",{className:"step-number",children:"2"}),(0,lr.jsxs)("div",{className:"step-content",children:[(0,lr.jsx)("strong",{children:"Secure App Creation"}),(0,lr.jsx)("p",{children:"The system creates a secure assessment application with read-only permissions"})]})]}),(0,lr.jsxs)("div",{className:"step",children:[(0,lr.jsx)("div",{className:"step-number",children:"3"}),(0,lr.jsxs)("div",{className:"step-content",children:[(0,lr.jsx)("strong",{children:"Assessment Configuration"}),(0,lr.jsx)("p",{children:"Configure which security categories to include in your assessment"})]})]}),(0,lr.jsxs)("div",{className:"step",children:[(0,lr.jsx)("div",{className:"step-number",children:"4"}),(0,lr.jsxs)("div",{className:"step-content",children:[(0,lr.jsx)("strong",{children:"Security Analysis"}),(0,lr.jsx)("p",{children:"The assessment runs and provides detailed security insights and recommendations"})]})]})]})]})]}),(0,lr.jsx)("div",{className:"form-actions",children:(0,lr.jsx)("button",{onClick:async()=>{o(!0),s(null);try{await w()}catch(a){s(a.message||"Failed to initialize assessment application"),o(!1)}},className:"primary-button",disabled:r,children:r?"Initializing...":"Select Tenant & Start Assessment"})})]}),"assessment-config"===u&&(0,lr.jsxs)("form",{className:"settings-form",onSubmit:async e=>{e.preventDefault(),o(!0),s(null);try{const e=await m.performSecurityAssessment();l(!0),setTimeout((()=>{n("/dashboard",{state:{assessment:e,tenantInfo:h}})}),1500)}catch(a){s(a.message||"Failed to perform security assessment")}finally{o(!1)}},children:[a&&(0,lr.jsx)("div",{className:"error-message",children:a}),c&&(0,lr.jsx)("div",{className:"success-message",children:"Assessment completed successfully. Redirecting..."}),(0,lr.jsxs)("div",{className:"form-section",children:[(0,lr.jsx)("h2",{children:"Assessment Configuration"}),(0,lr.jsxs)("p",{children:["Assessment will be performed for: ",(0,lr.jsx)("strong",{children:h.displayName||h.tenantDomain})]}),(0,lr.jsxs)("div",{className:"tenant-info",children:[(0,lr.jsxs)("div",{className:"info-item",children:[(0,lr.jsx)("strong",{children:"Tenant ID:"})," ",h.tenantId]}),(0,lr.jsxs)("div",{className:"info-item",children:[(0,lr.jsx)("strong",{children:"Domain:"})," ",h.tenantDomain]})]})]}),(0,lr.jsxs)("div",{className:"form-section",children:[(0,lr.jsx)("h2",{children:"Assessment Scope"}),(0,lr.jsx)("p",{children:"Select security categories to include in the assessment"}),(0,lr.jsx)("div",{className:"categories-grid",children:Object.entries(Ie).map((e=>{let[t,n]=e;return(0,lr.jsxs)("label",{className:"category-checkbox ".concat(v.includedCategories.includes(t)?"selected":""),children:[(0,lr.jsx)("input",{type:"checkbox",checked:v.includedCategories.includes(t),onChange:()=>{return e=t,void y((t=>(0,Ee.A)((0,Ee.A)({},t),{},{includedCategories:t.includedCategories.includes(e)?t.includedCategories.filter((t=>t!==e)):[...t.includedCategories,e]})));var e}}),(0,lr.jsx)("span",{children:n})]},t)}))})]}),(0,lr.jsxs)("div",{className:"form-section",children:[(0,lr.jsx)("h2",{children:"Notifications"}),(0,lr.jsxs)("div",{className:"form-field",children:[(0,lr.jsx)("label",{htmlFor:"notificationEmail",children:"Notification Email"}),(0,lr.jsx)("input",{type:"email",id:"notificationEmail",value:v.notificationEmail,onChange:e=>y((0,Ee.A)((0,Ee.A)({},v),{},{notificationEmail:e.target.value})),required:!0})]})]}),(0,lr.jsxs)("div",{className:"form-section",children:[(0,lr.jsx)("h2",{children:"Schedule"}),(0,lr.jsxs)("div",{className:"schedule-options",children:[(0,lr.jsxs)("label",{className:"checkbox-field",children:[(0,lr.jsx)("input",{type:"checkbox",checked:v.autoSchedule,onChange:e=>y((0,Ee.A)((0,Ee.A)({},v),{},{autoSchedule:e.target.checked}))}),(0,lr.jsx)("span",{children:"Schedule Recurring Assessments"})]}),v.autoSchedule&&(0,lr.jsxs)("div",{className:"form-field",children:[(0,lr.jsx)("label",{htmlFor:"scheduleFrequency",children:"Frequency"}),(0,lr.jsxs)("select",{id:"scheduleFrequency",value:v.scheduleFrequency,onChange:e=>y((0,Ee.A)((0,Ee.A)({},v),{},{scheduleFrequency:e.target.value})),children:[(0,lr.jsx)("option",{value:"weekly",children:"Weekly"}),(0,lr.jsx)("option",{value:"monthly",children:"Monthly"}),(0,lr.jsx)("option",{value:"quarterly",children:"Quarterly"})]})]})]})]}),(0,lr.jsxs)("div",{className:"form-actions",children:[(0,lr.jsx)("button",{type:"button",onClick:()=>d("start-assessment"),className:"secondary-button",children:"Start New Assessment"}),(0,lr.jsx)("button",{type:"submit",className:"primary-button",disabled:r,children:r?"Running Assessment...":"Run Security Assessment"})]})]})]}):(0,lr.jsxs)("div",{className:"authentication-prompt",children:[(0,lr.jsx)("h2",{children:"Authentication Required"}),(0,lr.jsx)("p",{children:"Please log in to access assessment settings."})]})},Wg=()=>{const e=re(),[t,n]=(0,i.useState)("processing"),[r,o]=(0,i.useState)("Processing authentication...");return(0,i.useEffect)((()=>{(async()=>{try{n("success"),o("Authentication successful"),setTimeout((()=>{e("/dashboard")}),2e3)}catch(t){console.error("Auth callback error:",t),n("error"),o("Authentication processing failed")}})()}),[e]),(0,lr.jsx)("div",{className:"auth-callback-page",children:(0,lr.jsx)("div",{className:"auth-callback-container",children:(0,lr.jsxs)("div",{className:"auth-status",children:["processing"===t&&(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)("div",{className:"spinner"}),(0,lr.jsx)("h2",{children:"Processing Authentication"}),(0,lr.jsx)("p",{children:r})]}),"success"===t&&(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)("div",{className:"success-icon",children:"\u2713"}),(0,lr.jsx)("h2",{children:"Authentication Successful"}),(0,lr.jsx)("p",{children:r}),(0,lr.jsx)("p",{className:"redirect-notice",children:"Redirecting you to the dashboard..."})]}),"error"===t&&(0,lr.jsxs)(lr.Fragment,{children:[(0,lr.jsx)("div",{className:"error-icon",children:"\u26a0"}),(0,lr.jsx)("h2",{children:"Authentication Failed"}),(0,lr.jsx)("p",{children:r}),(0,lr.jsx)("button",{onClick:()=>e("/login"),className:"retry-button",children:"Try Again"})]})]})})})};function Vg(){const{isAuthenticated:e,loading:t}=Oe();return t?(0,lr.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,lr.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):(0,lr.jsxs)(be,{children:[(0,lr.jsx)(ye,{path:"/login",element:(0,lr.jsx)(vr,{})}),(0,lr.jsx)(ye,{path:"/auth/callback",element:(0,lr.jsx)(Wg,{})}),(0,lr.jsx)(ye,{path:"/dashboard",element:e?(0,lr.jsx)(mr,{}):(0,lr.jsx)(ve,{to:"/login"})}),(0,lr.jsx)(ye,{path:"/history",element:e?(0,lr.jsx)(wr,{}):(0,lr.jsx)(ve,{to:"/login"})}),(0,lr.jsx)(ye,{path:"/settings",element:e?(0,lr.jsx)(Kg,{}):(0,lr.jsx)(ve,{to:"/login"})}),(0,lr.jsx)(ye,{path:"/",element:(0,lr.jsx)(ve,{to:e?"/dashboard":"/login"})})]})}const Qg=function(){return(0,lr.jsx)(Se,{children:(0,lr.jsx)(Vg,{})})},Gg=document.getElementById("root");if(!Gg)throw new Error("Failed to find the root element");(0,s.H)(Gg).render((0,lr.jsx)(i.StrictMode,{children:(0,lr.jsx)(Qg,{})}))})();